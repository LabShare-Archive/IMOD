#####################
# Makefile for clip
#
#
#  $Author$
#
#  $Date$
#
#  $Revision$
#
#  $Log$
#  Revision 3.3  2003/10/24 02:30:40  mast
#  Changes for windows/Intel compiler
#
#  Revision 3.2  2003/02/28 18:09:32  mast
#  Changes for cygwin/windows
#
#  Revision 3.1  2002/11/05 23:25:43  mast
#  Add -limod to call copyright function
#
#  Revision 3.0  2001/11/29 18:10:05  rickg
#  *** empty log message ***
#
#  Revision 1.2  2001/11/27 15:59:17  mast
#  Add dependency on .version file
#
#
include ../configure

O = $(OBJEXT)
OBJS = clip.$(O) clip_proc.$(O) clip_transform.$(O) clip_io.$(O)\
	correlation.$(O) fft.$(O) filter.$(O)

PROG = clip$(BINEXT)

all : $(PROG)

# DNM 3/12/01: put $(F77LIBS) back on the link list just in case it's needed
$(PROG) : $(OBJS)
	@echo "Making clip: libifft is in the flib source code."
	$(FLCC) -o clip $(OBJS) $(LDFLAGS)  \
	$(LIIMOD) $(LIMOD) $(LIFFT) $(TIFFLIBS) $(LIBS) $(F77LIBS)

install : $(PROG)
	strip $(PROG)
	$(CP) $(PROG) $(INSTBINDIR)

clean : 
	$(FIND) . -type f -name "*.o*" -exec rm "{}" \;
	$(FIND) . -name "*~" -exec rm "{}" \;
	$(FIND) . -type f -name "core*" -exec rm "{}" \;
	$(FIND) . -type f -name "clip" -exec rm "{}" \;
	$(FIND) . -type f -name "clip.exe" -exec rm "{}" \;

$(OBJS) : clip.h
clip.$(O) : ../.version


#
# If there is no fortran compiler available and hence
# no fftlib then uncomment the following rule
# to make a clip with to fft ability.
#.c.o:
#	$(CC) -c $(CFLAGS) -DNOFFTLIB $<

