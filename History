IMOD History
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
9/22/09: Fixed Point2model so that there can be blank lines in the file,
and added options for setting color, symbol and point sizes, and image
reference coordinates.

9/20/09: In Etomo, fixed incorrect binning in the B axis in Tomogram
Positioning.

9/17/09: In Etomo, fixed final aligned stack progress message.

9/16/09: Xyzproj modified to make projections suitable for common line
analysis and to make simple vertical projection more efficient.

9/16/09: Fixed the PEET tab, which was not being set properly when a new
dataset was created.

9/15/09: IMOD_4-0-14
9/14/09: Made Stitchalign vary metro factor when search fails.

9/8/09: Added hot key for toggling the clipping plane in model view.

9/8/09: This time thread number really will be controlled by OMP_NUM_THREADS.

9/8/09: Added Fitpatches to do linear and local fitting on patch vectors in
supermontage overlap zones and manage patch files and vector models when
edited.

9/7/09: Made Stitchalign able to eliminate vectors if they are not present in 
all the versions of a patch file managed by Fitpatches, and if they are
outliers or had high residuals in fits in Findwarp.

9/7/09: Switched centering of transform in Xfsimplex to conform to centering
in interpolation routine.

9/4/09: Andrew Noske's Interpolator plugin added to 3dmod.

9/4/09: In Nonanisotrophic Diffusion correcting the handling of spaces in the
iteration list.

9/2/09: In eTomo preventing "Use..." buttons from causing invalid stacks to be
used.

9/2/09: Fixed residual outputs into patch files from Refinematch and Findwarp;
residuals were being assigned to the wrong vectors.  

9/2/09: Added ability for Refinematch to put out the residual vectors as
"reduced patches", and for Findwarp to put out the fraction of fits in which
each patch is an outlier.  Patch2imod will store the outlier fraction in the
model and Imod2patch will output it to a new patch file.

9/2/09: Fixed 3dmod crash when starting a new contour with limited points per 
contour and there are two empty contours.

8/31/09: New interface added to eTomo for erasing all gold by finding it in
a tomogram and reprojecting.

8/23/09: IMOD_4-0-13
8/20/09: Fixed eTomo bug that made it rerun copytomocoms completely
(overwriting existing com files and their parameters) upon opening the Final
Aligned Stack panel if the CTF correction com files are not present (In 3.13).

8/19/09: Made Mtffilter allocate memory dynamically, so it can filter
moderately large volumes in 3D without breaking them into pieces.

8/19/09: Stopped 3dmod from dismissing filesystem cache under Linux unless
directed with an environment variable.  Files will now load faster when opened
a second time.

8/19/09: Fixed problem with slicer processing mouse moves after the button
release.

8/17/09: Added variant of PBS queue type for getting load under Maui.

8/14/09: Fixed power option in densnorm.

8/11/09: IMOD_4-0-12
8/10/09: Many changes to Ctfplotter: Eliminated two sources of inconsistency
between Ctfplotter and Ctfphaseflip in the relation between defocus and
frequency; implemented nearly exact shifting of spectra from off-center tiles
instead of shifting by integer amounts; made the shifting variable so as to
align both first and second zeros between off-center and central tiles;
started caching power spectra for individual tiles so that after they are
computed once it is quick to recompute a summed spectrum; added fitting to a
CTF-like curve and to a polynomial and made the CTF-like fitting the default;
reorganized the angle range dialog to put the important options at the top;
revised the guide and added snapshots from various stages of working on an
example set.  Also added an option to both programs to invert the sign of the
tilt angles, in case the set of angles gives reconstructions with inverted
handedness.

8/4/09: Fixes for SIRT: fixed Splittilt to use a different boundary info file
for reprojection; fixed Sirtsetup to pass the boundary parameter properly and
to detect last reconstruction correctly; fixed parallel writing in the
reprojection.

8/4/09: Implemented ability to read DigitalMicrograph stack files with dm2mrc
and 3dmod, allowed dm2mrc and raw2mrc to work with filenames starting with
dash, fixed problem with dm2mrc accessing files not in current directory, and
removed -d option and cleaned up dm2mrc man page since all files are scanned. 

6/25/09: Changed Tilt to allocate its memory and added a temporary option to
specify the memory size.

6/22/09: Changed Newstack to allocate needed memory; added option for user to
limit memory usage, and made newstack and Fortran I/O code work with images
bigger than 2 gigapixel.

6/22/09: Changed cubic interpolation so thread number is controlled by
OMP_NUM_THREADS.

6/22/09: Fixed mrcx for 64-bit systems.

6/22/09: Fixed raw image dialog.

6/18/09: 3dmod and tif2mrc can now read 32-bit integer TIFF files and RGBA
files.

6/15/09: IMOD_4-0-11
6/15/09: Cubic interpolation routine was parallelized with OpenMP, which will
speed up Newstack somewhat.

6/14/09: Rotatevol, Matchvol and Warpvol were improved by: converting to 
Fortran 95 and using dynamic memory allocation, where the array size can be
set by the user; setting up rectangular input and output volumes to use memory
and read from disk more efficiently; computing data within cubes and cubes in
a more efficient order; parallelizing with OpenMP.

6/10/09: Fixed a bug in Etomo which preventing it from logging the residual
when fine alignment was run from a 3dmod which has been opened from either the
Coarse Alignment or the Fiducial Model dialogs.

6/5/09: Implemented a new method of filling in missing transforms in Warpvol
to avoid discontinuities in transforms and other problems when they are
extrapolated to long distances from existing transforms.  Modified Findwarp to
put out a warp file with missing transforms so that filling in and extending
transforms is done only once, in Warpvol.

6/10/09: Fixed problem running Xfmodel to find transforms with PIP input.

6/10/09: Fixed imodhelp for Linux, broken since Qt 4 upgrade.

6/10/09: Made Etomo compatible with the IMOD_BRIEF_HEADER environment variable.

6/8/09: In Etomo added an interface for flattening to Post Processing.  It runs
flattenwarp and warpvol.

6/8/09: In Etomo improvements added to RAPTOR.

6/5/09: Fixed problem with Zap HQ mode not being turned back on after pan or
rubberband change.

5/28/09: IMOD_4-0-10
5/29/09: Fixed crash when meshing some open contours.

5/26/09: Fixed processchunks to ignore error lines when getting ssh version.

5/7/09: Fixed scalebar when data are loaded with binning.

5/7/09: Added option to Extracttilts to get information for all frames of a 
montage.

5/7/09: In Etomo attempting to prevent duplicate processes from being started
on different computers.

5/4/09: In Etomo added a simple interface to RAPTOR.

4/30/09: Fixed problems in dm2mrc for latest tcsh and in DM conversion when
there is an unsupported image type in front of the one of interest.

4/27/09: In Etomo added a panel for changing the file paths when files are
moved.

4/27/09: In Etomo fixed a problem where PEET was not displaying its data file
at the bottom of the dialog.

4/21/09: Fixed problem with panning while drawingtools is open on 64-bit Mac.

4/20/09: In Etomo saving the selected computers and CPUs when Etomo exits
during a parallel process.

4/20/09: In Etomo - PEET added more validation.

4/15/09: In Etomo fixed processchunks process messages.

4/15/09: In Etomo logging reconnect attempts and major failures.  Preventing
the deletion of the aligned stack while a process is running.

4/14/09: In Etomo fixed processchunks resume with a queue; it wasn't getting
updated number of CPUs.

4/6/09: IMOD_4-0-9
4/6/09: In Etomo fixed the Tomosnapshot menu option so that it is on all the 
time (In 3.13).

4/6/09: Workarounds to Qt 4.5/Mac cursor problems: preserve the model cursor 
when clicking on a window, keep the right cursor when using rubberband.

4/2/09: In Etomo - PEET changed Phi, Theta, Psi increments so that a 0 value
defaults to 1 (In 3.13).

4/1/09: In Etomo - Join using clip rotx instead of clip flipyz handle a flipped
tomogram (still creating a .flip file).  Rotx does not change handedness.

3/31/09: Tif2mrc and 3dmod will both read grayscale TIFF files with multiple
samples per pixel by treating each sample as a separate image.  When a
multipage TIFF file has multiple image sizes, the smaller ones (e.g.,
thumbnails) are now ignored.  Mrc2tif now writes data using libtiff and
supports compression options.

3/30/09: Try to prevent degenerate solutions in Findwarp by detecting when
most patches are on a diagonal.

3/30/09: Mac fixes: Raise windows at start, raise and activate window on mouse
press in Qt 4.5, set current directory in file chooser.

3/27/09: Header now inverts the sign of rotation angles from FEI header because
they are defined as clockwise positive (In 3.13).

3/26/09: Improved performance of Object List window when adding or removing
group checkboxes for lots of objects.

3/25/09: Implemented new ghost mode that displays contours just from nearest 
section with contours for the particular object and made this the default.

3/25/09: Fixed uninitialized variable in Xfjointomo (In 3.13). 

3/24/09: IMOD_4-0-8
2/24/09: Fine alignment run in 3dmod will appear in the Etomo project log.

3/24/09: Tomosnapshot copies coms to a directory and strips .com (In 3.13).

3/24/09: In Etomo, added Angle Offset to Tiltxcorr.

3/23/09: Fixed initialization of maximum in Ctfphaseflip so output file with
negative values will not have a maximum of 0 (In 3.13).

3/23/09: Switched clip stat -2d maximum position from centroid over 49 pixels
to parabolic fit over 9 to avoid misleading positions.

3/23/09: Etomo gets a message from 3dmod after Tiltalign is run and puts entry
in the project log.

3/23/09: In Etomo - PEET added a useful error message when PARTICLE_DIR is not
set.

3/22/09: Changes for 64-bit version with Qt 4.5 on Mac OS X 10.5.

3/22/09: 3dmod makes sure dialogs and image windows are fully on the screen
and, on Mac, keeps them from overlapping their parent (Info window or model
view).

3/21/09: Fixed bug in using O hot key when cont/surf/point dialog not open.

3/18/09: Fixed bug in Tomopitch when two contours of a pair are drawn in
opposite directions (In 3.13).

3/18/09: Fixed computation of volume inside mesh in imodinfo (In 3.13).

3/17/09: Added option to Tiltxcorr to enter an angle offset, which can sharpen
correlations at high tilt when the specimen is tilted at 0 degrees.

3/16/09: Added transferfid messages to the Project log window.  Added the
contents of pop dialogs to the Project log window.

3/13/09: Fixed subarea floating when moving rubber band in Zap window 
(In 3.13).

3/13/09: Changes to produce new 64-bit Windows version.

3/12/09: Fixed layout of Open buttons in startup window.

3/11/09: In Etomo improved error reporting when retrieving rubberband and
slicer rotation values from 3dmod. 

3/9/09: IMOD_4-0-7
3/9/09: In fine-grained dialog, added an option to see points with mesh
connections as squares in the Zap window, ability to change multiple selected
contours, and output of the general value for the current point or contour.

3/9/09: Added ability to define mesh connection numbers that block the mesh
from going to the end of one contour when meshing between two open contours,
or from filling a gap on one side when meshing between a contour with a gap
or open end and one without (see fine grain dialog help).

3/9/09: Added hot key O for toggling between open and closed contours; added
ability to toggle multiple selected contours with hot key or radio buttons,
and made the ends of the current contour have triangles instead of circles for
an open contour.

3/9/09: Fixed display of current point in model view to stay on model point in
model mode (In 3.13).

3/9/09: In Etomo - Fine Alignment, removed unnecessary error that was popping
up after Compute Alignment was run.

3/9/09: In Etomo, added the -fg option to run Etomo in the foreground.

3/5/09: In Etomo - NAD, prevented the use of huge test volumes.

3/6/09: Fixed Tiltxcorr's adjustment of shift for uncentered correlation box
to avoid division by 0 at 90 degrees (in 3.13).

3/5/09: IMOD_4-0-6
3/5/09: Fixed value set into global rotation spin box in Midas.

3/5/09: Etomo remembers position and size of log windows between sessions and
starts up with it offset from the main window.

3/5/09: Removed extensions from tomosnapshot name, may make it more mailable.

3/4/09: Changed Zap, Slicer, Xyz, and Locator windows to process mouse move
events when appropriate to avoid falling behind with events from tablet.

3/3/09: Changed Processchunks to handle up to 99999 com files and to avoid
problems from * in error strings.

3/3/09: Made combine.com convert volcombine.csh to unix line endings to get
around bug in Cygwin tcsh (in 3.13).

3/2/09: In Etomo preventing processes from running the attempt to reconnect to
an existing process is finished.

2/27/09: Fixed trimvol command in info window (missing -x).

2/27/09: Fixed 3dscat option in Imodmop, broken by change on 1/7/09 (In 3.13).

2/26/09: In Etomo - Generic Parallel Process allowing comscript names with more
digits.

2/26/09: In Etomo - PEET added an error check for szVol.

2/25/09: Turned off keyboard tracking for remaining spin boxes.

2/25/09: Added keyboard / and * to page up/down in big steps, step size
settable in Options.

2/24/09: IMOD_4-0-5
2/24/09: Added Shift-PageUp and PageDown to move to next or previous Z with
contours in the current object.

2/24/09: To avoid problems with tablets, process mouse move events so as to
skip to the current event in model view, and skip updating dialogs when
doing continuous drawing in Zap window.

2/24/09: Fixed fatal bug in parallel writing routine.

2/24/09: Etomo CTF correction now works with non-integer spherical aberration
(In 3.13).

2/24/09: Colors changed so grid appears when printing from Ctfplotter.

2/24/09: Imodinfo -c option now reports a centroid based on line segments
rather than enclosed area for open contour objects.

2/19/09: IMOD_4-0-4 and IMOD_3-13-2 released
2/19/09: In Etomo fixed unit testing utilities so that they work with earlier
versions.

2/19/09: In Etomo - Fine Alignment, no longer placing local area residual
errors in the Project Log Window in order to avoid overloading it with too
much information.

2/19/09: In Imodjoin, increased maximum size in model header to hold new
joined model so whole model can be viewed in Zap window.  In Remapmodel, 
adjusted maximum Z to hold remapped Z values.

2/18/09: In Etomo corrected tooltips that where being formatted twice.

2/16/09: Set working directory permissions in Copytomocoms and Makejoincom and
set permissions of copied files in align.com, Finishjoin, Xfalign,
Tomosnapshot to get around problems in Vista (In 3.13).

2/16/09: Made error messages produced by PIP come out on one line (In 3.13).

2/16/09: Improved messages from Solvematch and guide instructions when the
center shift is above the limit (In 3.13).

2/15/09: Added structure for avoiding artifacts when writing to one file from
multiple computers, implemented it for Tilt/Splittilt and 
Ctfphaseflip/Splitcorrection.  ALL MACHINES USED FOR PARALLEL PROCESSING
WITH DIRECT WRITING MUST BE UPGRADED TOGETHER.

2/15/09: Added details on the contents of the extended header and commands for
extracting data to Header program output.

2/15/09: Added options to Alterheader to set pixel spacing from pixel size in
FEI/Agard style extended header, and to invert sign of origin.  Wrote proper
man page for Alterheader.

2/15/09: Fixed problem with getting max coordinates in Point2model (In 3.13).

2/15/09: Fixed geometry problems in model view object edit and object list 
windows.

2/13/09: Added a separate log window for user entries and selected excerpts from
process logs. 

2/12/09: In Etomo got rid of the exception that is added to the etomo log when
header is used to read a file that doesn't exist.

2/12/09: In Etomo - Tomogram Generation saved the trial tomogram names in the
combo box.

2/12/09: In Etomo - Setup Tomogram popping up an error message if Frame Type is
incorrect.

2/10/09: In Etomo recalculated trimvol parameters when the size of the file
being trimmed has been changed since last time trimvol was run.  A warning
message is displayed when this is done.

2/7/09: Etomo has a new Project Log Window that records some output from
program logs, can be typed into, and is saved automatically.

2/5/09: In Etomo added more error checking to the PEET interface.

2/2/09: Sychronize all on/off buttons when meshing turns an object on 
(In 3.13).

1/26/09: Fixed right-click popup menu on Final Aligned Stack panel (In 3.13).

1/26/09: Fixed eTomo reporting of error messages from Ctfplotter (In 3.13).

1/25/09: IMOD_4-0-3
1/25/09: Fixed a bug in Flattenwarp in handling non-planar contours.

1/23/09: Fixed size of current point sphere in model view if data loaded with
binning (In 3.13).

1/23/09: Processchunks now prevents etomo from dropping machines until at
least one chunk has succeeded.

1/21/09: Matchshifts makes sure solve.xf is readable by owner to solve problem
on Vista when files appear to have no permissions to cygwin (In 3.13).

1/21/09: Made Findbeads3d set mean of correlation reference to zero, needed
for valid correlations (In 3.13).

1/17/09: Fixed problem getting min and max X of contours in Flattenwarp.

1/16/09: Fixed runimodqtapp for spaces in IMOD_DIR (In 3.13).

1/15/09: Stopped beadfixer from deleting current contour when deleting ones
below threshold (In 3.13).

1/15/09: IMOD_4-0-2  (as switchpoint for build scripts)
1/15/09: Port to Qt 4.4 of all Qt-based programs.

1/12/09: Fixed problem of Midas starting up with cosine stretch on (In 3.13).

1/7/09: Added option to imodmop to paint tubes only in planes (In 3.13).

1/6/09: IMOD_4-0-1
1/6/09: Added Flattenwarp, a program to produce warping transformations for
flattening a volume.

1/6/09: Fixed model view display problem on some Macs caused by stereo 
changes by swapping buffers twice more after the draw (In 3.13).

1/2/09: Made a script for imodhelp to run it properly (In 3.13).

12/31/08: Added option to Warpvol to set default output size the same as input.

12/29/08: Fixed Stitchalign to avoid multiple vectors at same Z level and put
out only one layer of vectors if input edges have only one layer (In 3.13).

12/29/08: Made Findwarp give an appropriate error when discounting zero vectors
leaves no fits; adjusted ratio of measured/unknown if one layer in Z (In 3.13).

12/22/08: Fixed imod2patch and patch2imod command wrappers so edgepatches will
run in Windows (In 3.13).

12/22/08: Blendmont uses a new method of padding for cross-correlation to
reduce artifacts, and has an option (activated with VerySloppyMontage) to 
evaluate multiple correlation peaks with a real-space correlation coefficient
computed from filtered images.

12/19/08: Trimvol fixed to avoid 1-pixel errors in X/Y when extracting odd
sizes from even or vice versa.

12/19/08: Taperoutvol changed to not add padding to a single slice in Z.

12/18/08: Changed isosurface color again, changed object names and scaled down 
new color when saving an isosurface (In 3.13).

12/17/08: IMOD_4-0-0 and branch to IMOD_3-13-0
12/17/08: Fixed problem in Edgepatches with reading a Frame entry with no Z.

12/17/08: Create a stereo-capable widget only when stereo is turned on to avoid
problems on Macs.

12/16/08: Updated tutorial.

12/16/08: Changed trimvol command output to info window and used for extract
from -yz to -rx when data are flipped, figuring it is better to preserve
handedness in extraction.

12/15/08: Fixed a bug where the bead diameter came up wrong when the 3dmod
instance was already running.

12/15/08: A tilt axis angle near 90 degrees is now handled properly from eTomo.

12/14/08: Set a color and modified material properties for the isosurface so
that detail will not be washed out when viewing a surface face-on.

12/14/08: Fixed problems with automapping of variables in Tiltalign and
Beadtrack when angles go above 80 degrees; make beadtrack not adjust
displacements by a cosine stretch when angles go above 80; fixed problems with 
selection of view range for local view tracking and with initialization of
tilt variables at high angles where two might get mapped to one variable.

12/12/08: Made it harder for autocentering in Bead Fixer to go to an adjacent
stronger bead when clicking within a bead.

12/12/08: Added a file index.html in the html directory and an alias "imodhelp"
to the startup scripts to start Qt Assistant with all IMOD documentation
accessible.

12/12/08: In Etomo - Fiducial Model exposed the beadtrack parameter
BeadDiameter.

12/12/08: Fixed Tilt for reconstructions from data with angles to and above
90 degrees; made Tiltxcorr give error if cosine stretching is enabled and 
angles are too high for it to be valid.

12/11/08: Added output from the Tiltalign surface analysis of the unbinned
thickness needed to contain gold centers and shift needed to center the range
of gold in Z.

12/11/08: Fixed copytomocoms output for blending coordinates when there is 
a 90-degree rotation.

12/11/08: Fixed model view update when running from 3dmod and there are no 
image windows, as when editing patch vectors.

12/11/08: In Etomo - Join, popping up Warnings from xfjointomo.

12/10/08: Added findbeads3d for automatically finding gold beads in a tomogram.

12/10/08: In Etomo - Join, fixed a bug where the Alignment Reference Section
was always saved under trial, even when a finish join was done.  Will fix
previous .ejf files only in the case where the trial join was never run.

12/10/08: In Etomo - Join, fixed the format problem affecting spinners in the
Join tab.

12/10/08: Made Transferfid work if the fiducial model was last loaded on a
stack with different binning from the current stacks.

12/10/08: Changed Repackseed and Solvematch so that matching coordinates from
Transferfid would still work if either fiducial model was last loaded at a
different binning from when Transferfid was run.

12/10/08: Fixed bug in Remapmodel when entering shifts with -add option.

12/10/08: Improved the Etomo log file to include time stamp and data set
information.

12/9/08: IMOD_3-12-24
12/9/08: Fixed bug in reading ascii models written with reference info.

12/9/08: Made imodmesh turn mesh drawing on when meshing and off when erasing.

12/9/08: Added hot key k for copying contour when contour copy dialog is open.

12/9/08: In Etomo - Fiducial Model dialog, corrected the bead diameter passed
to beadtrack and 3dmod.  Taking Coarse Aligned binning into account.  Removed
centroid radius from the dialog, converting centroid radius into bead diameter
in existing track.com files.

12/9/08: In Etomo - Final Aligned Stack dialog, resetting the OutputFileName in
ctfcorrection.com each time it is saved.

12/9/08: Added entry to File menu for conveniently changing JPEG quality.

12/9/08: Modified transferfid to use bead diameter instead of centroid radius.

12/8/08: Fixed Processchunks "hold" to hold off only a failed machine.

12/8/08: Added ability to scale line thicknesses and symbol sizes when taking
a montage snapshot, added an option for taking the whole image at 1:1 zoom,
and saved all the montage snapshot settings between sessions.

12/8/08: Fixed a potential crash and eliminated extra lines of background 
in montage snapshot.

12/6/08: Eliminated 1 pixel shift and ability to shift image with mouse when
zoomed image fits exactly in window.

12/6/08: Slicer in centering mode will now stay exactly centered on model 
points when stepping through a contour.

12/5/08: Etomo error logs are now saved to $HOME/.etomologs unless the user
has ETOMO_LOG_DIR set.

12/4/08: In Etomo - Fiducial Model dialog, sending the View Skip List to 3dmod
when opening it with the Fix Fiducial Model button.  The View Skip List will
appear under the checkbox called "Ignore gaps at views:" in the Bead Fixer.

12/3/08: Turned models on when loading into 3dmod, so if the user turns it off
by mistake and doesn't know about 't', it will reappear when they reload it.

12/3/08: Fixed Copytomocom's handling of output sizes for sampling and final
aligned stack when images are being rotated by ~90 degrees, adjusted sample
positions to account for data loss from rotation, and fixed sample parameters
for very small input data.

12/3/08: Fixed field width of output in Maxjoinsize so that a shift of -1000
in Y does not screw everything up.

12/2/08: Made 3dmod detect a 3D FFT and not mirror it.

12/2/08: Changed Beadtrack to take true unbinned bead diameter and a binning
and compute the radius for centroid as well as modify box size appropriately.
Also changed Copytomocoms to feed into this properly and to give box sizes
up to 100 instead of stopping at 48.

12/2/08: In Etomo - Gold Erase, changed Better Radius to Fiducial Diameter.

12/2/08: Point values will now be stored when meshing a contour as a tube.

12/1/08: In Etomo added an options to Settings to default to montage.

12/1/08: Made imodfindbeads do kernel filtering with 0.85 ("smooth") as 
default.

12/1/08: Switched bead fixer autocentering to use correlation with a 
sobel-filtered model bead.

11/30/08: Reduced edge artifacts in some kernel filtering operations (e.g., 
clip) by extending image with replicted pixels instead of mean.

11/30/08: Fixed a problem with contrast floating when starting in middle Z
and contrast set from model.

11/29/08: Enabled selection of contours, deletion of contours, and undo/redo
when running as 3dmodv (standalone mode).

11/29/08: When stepping through contours (c/C), a new current point is
picked that is the closest in X/Y on the closest Z plane.

11/29/08: Bead fixer: added ability to ignore gaps on list of skipped views,
output global and local mean residuals to info window, allowed the keypad 
Insert key to be used instead of middle mouse button for seeding and gap 
filling.

11/29/08: Added ability to link slicers together when multiple volumes are
loaded.

11/28/08: Added option to Imodjoin to change the colors of objects being added
to a model, to avoid getting a model with all green objects.

11/27/08: Fixed slicer angle table display of coordinates to start from 1.

11/27/08: Made scale bars go away when dialog is closed.  Made scale bar menu
item be permanently present in model view View menu.

11/27/08: Added sphere at the current point and a bounding box display to
model view, with menu entries in the View menu, ability to edit their
properties, and a hot key to toggle the current point.

11/27/08: Made Delete do same as Insert in Midas and Shift-Home do same as
Insert in 3dmod because new Mac keyboards have neither Delete nor Help there.

11/21/08: IMOD_3-12-23
11/21/08: Fixed Etomo - NAD.  Opening the volume in 3dmod was failing because
of a corrupt path name.

11/21/08: Increased filename length limits in Maxjoinsize, Xftoxg, and Xfmodel.

11/21/08: Increased array sizes in Blendmont to allow 8Kx8K frames and output
line length up to 500000.

11/21/08: In Etomo - Fine Alignment saving the state of the Beam Tilt panel
header.

11/20/08: IMOD_3-12-22
11/20/08: Interface for transforming fiducial model and erasing gold was
added to Aligned Stack panel.

11/20/08: Added image reference information to ascii model.

11/19/08: Bug fixes.  In Etomo - Final Aligned Stack, fixed a problem where CTF
Correction attempted to run more then once when the button was pressed, and a
problem where binning was overridden by Tomogram Positioning.  In Tomogram
Generation fixed a problem that prevented trial tomograms from running.

11/19/08: Fixed Ctfphaseflip to work with parallel processing again.

11/15/08: Model view object edit will make the isosurface be the current
object when either window is opened, so the user will realize it is editable.

11/15/08: In meshing panel of model view object edit, added checkbox for dome
caps, added a progress report, and allowed meshing parameters of multiple
objects to be changed together.

11/15/08: Implemented option for capping tubes with hemispheres (domes), made
open contour meshing maintain consistent lighting direction in most cases, and
fixed a bug in getting the next Z value that could crash meshing.

11/14/08: Fixed clip flipz for odd-sized files and made clip flipyz/rotx be a
little faster for large files by using up to twice the memory.

11/14/08: Added option to imodcurvature for getting mean of stored values.

11/13/08: Made Tilt able to project a model built on a tomogram onto all the
images used to build the tomogram.

11/13/08: In Imodinfo, added a computation of volume inside a mesh, renamed
"mesh volume" to "contour volume", and made it omit the "cylinder" values
if the mesh-based values exist.

11/11/08: IMOD_3-12-21
11/11/08: Fixed problem with bead fixer when prealigned stack loaded binned.

11/11/08: In Etomo fixed a problem with Final Aligned Stack dialog's binning
value, and a problem with Trial tomogram.

11/10/08: The new aligned stack panel was split into tabs for each operation.

11/7/08: Isosurface now keeps a separate threshold for each time (volume).

11/7/08: Fixed the zap subarea coordinates after dragging a rubber band.

11/7/08: Added ctfcorrection log and mtffilter options to the Etomo Final
Aligned Stack dialog's right-click menu.

11/6/08: Fixed autocontrast of reference slice in Midas in reference mode.

11/6/08: Fixed bug in 3dmod float that froze program.

11/2/08: Etomo now supplies tilt angles to Midas for fixing coarse alignment
to allow cosine stretching, but the cosine stretch is initially turned off.

11/2/08: Added options to Tilt to allow incremental reconstructions to be
computed, adding or subtracting selected views.

11/2/08: Added option to Xfproduct to multiply by just one of the transforms
in a file of multiple transforms.

11/2/08: Added option to Newstack to overwrite sections in existing output
file. 

10/29/08: Tomogram generation panel was split into two, one for aligned stack
and one for tomogram.  CTF correction interface added to aligned stack panel.

10/20/08: The CTFfiles option to copytomocoms was changed to specify whether
to copy one file or both.

10/17/08: IMOD_3-12-20
10/16/08: Changed Copytomocoms to produce com files for CTF correction, with
options to set common parameters.

10/16/08: Sped up mrctaper by 7x for 4K, 32x for 7K images.

10/12/08: Added ability to display images with cosine stretch in Midas if tilt
angles are  supplied.

10/6/08: IMOD_3-12-19
10/6/08: In Etomo, tables have been changed to have paging buttons and hot keys
instead of sliders when they get too long; the user can set the maximum length
of a table in the options.

10/2/08: Fixed hardware stereo.

10/2/08: In isosurface display, added binning, ability to delete small pieces,
and ability to unlink the X/Y/Z coordinates of the displayed box from the
current point.

9/29/08: Fixed Replace Patch Vectors on Windows.

9/26/08: Added a -name option to the installer to change the name of the
actual directory from IMOD.

9/23/08: Made attach to nearest point consider only objects that are on, added
a preference to select the old behavior.

9/23/08: Added ability to adjust point size with scroll wheel.

9/21/08: Added *join to file filter in startup list, added filters for PNG
and JPEG.

9/19/08: Fixed/finished ability to make tube meshes with different size
segments.  Fixed display of mesh and spheres with diameter -0.5.

9/11/08: IMOD_3-12-18
9/11/08: In Etomo fixed a null pointer exception which stopped execution in
Combine.

9/10/08: In Etomo - PEET fixed some reliability problems with Etomo writing to
.prm file.  The .prm file array descriptors should no longer contain "NaN".

9/5/08: In Etomo - PEET fixed a problem where nWeightGroup appeared in the .prm
file when it was disabled in the dialog.

8/26/08: In Etomo - NAD making sure that the clean up button works properly by
asking the user to exit from files that will be deleted.

8/22/08: IMOD_3-12-17
8/22/08: Fixed bug in extra object code from 7/13/08 that crashed 3dmod when
using bead fixer on Mac (and should have crashed elsewhere...).

8/21/08: Fixed problem running Refinematch with > 10000 patches.

8/21/08: Increased filename length limit for montagesize to 320.

8/21/08: Added equalization of CCCs across missing wedge weight groups to the PEET interface in Etomo.

8/20/08: Fixed a bug in Etomo - PEET which prevented the use of zero Phi, 
Theta, and Psi values.

8/20/08: Fixed bug in accessing connections numbers during meshing that made
wrong connections if contours had other fine-grained properties set.

8/19/08: Made + zoom up as well as = in all image windows except slicer;
made keypad + zoom like = in slicer and model view.

8/18/08: In Etomo - Join added the Finishjoin option -local, which causes 
Xftoxg to do local fits to 7 adjacent sections.

8/18/08: Fixed ability to delete surface and point labels.

8/18/08: Fixed chunk size value written to model file for labels.

8/1/08: Fixed bug in drawing large non-integer zooms in nonHQ display.

7/31/08: IMOD_3-12-16
7/31/08: Modified install script for Ubuntu to avoid using /etc/profile.d and 
to take care of libtiff and libg2c problems.

7/30/08: Fixed the stay-on-top function in Info window, broken 5/26/08.

7/24/08: In Etomo - Tomogram Positioning boundary model contours are now
limited to two points.  The next contour will automatically be created when
the third point is added.

7/18/08: In Etomo Settings dialog added the ability to turn on parallel
processing.

7/16/08: IMOD_3-12-15
7/16/08: Changed Beadfixer to start at beginning when model is reloaded in 
gap finding mode; finished features needed for examining seed contours with
values from Imodfindbeads and deleting contours below threshold.

7/16/08: In Etomo - Fine Alignment exposed Rotation Angle so that it can be
adjusted when it is a fixed value.

7/15/08: Copytomocoms issues a warning if tilt angles are supposed to be in
existing .rawtlt and it doesn't exist yet.

7/15/08: Processchunks needs to list all log files if one does not seem to
exist to avoid spurious timeouts (Redhat 5 update 2 NFS problem?).

7/15/08: Added ability to start new contour automatically when contour reaches
a set number of points.

7/15/08: In Etomo - Postprocessing, changed the dialog to show that it can
retrieve Z settings from 3dmod as well as X and Y.

7/15/08: In Etomo, preventing tilt from using XTILTFILE when align was run
fiducialess.

7/15/08: In Ccderaser, order 0 can now be specified in order to replace points
with the mean of the border points instead of fitting to them.

7/14/08: Prevented Xfjointomo from fitting to coplanar contour segments.

7/13/08: Fixed problem of model view object edit not dropping extra objects 
when they stop being used.

7/13/08: Prevented saving model and opening image windows during initial
data load.

7/11/08: Fixed bug when resizing locator window that made it become square.

7/6/08: IMOD_3-12-14
7/6/08: Eliminated ratio of measurements to variables in search (old incorrect
ratio) from Tiltalign output; modified Alignlog to work with this.

7/6/08: Made Processchunks killing more robust on our system by listing the
.pid files if they do not seem to exist.

7/4/08: Fixed clip splitrgb, broken 1/11/08.

7/3/08: IMOD_3-12-13
7/2/08:  Made "Examine patch vector model" open model view object edit window
so residual values can be displayed more easily.

7/2/08: Fixed bug that crashed 3dmod when opening a model without an image
and going to section 1 (broken in 3.12.12).

7/1/08: Changed Transferfid to limit the search range for all variables, to
avoid collapsing transformations.

7/1/08: Upgraded Xfsimplex to PIP input, and added options for limiting the
range of the search and for filtering and selecting an arbitrary area to align
within the program.

6/30/08: Changed combine.com to save volcombine script to file instead of 
piping to csh, to fix problem with big scripts on Windows.

6/25/08: Fixed Refinematch crash on residual output when data fit right away.

6/23/08: Added option to Blendmont to prevent trimming of fill areas produced
by distortion correction from overlap areas used for correlations.

6/21/08: In Imodfindbeads, fixed black level in file when dip is below minimum.

6/21/08: Added option to Beadtrack to get information about which surface
each bead is on.

6/20/08: IMOD_3-12-12
6/20/08: In Etomo added tilt angles to 3dmod calls which display tilt series.

6/20/08: Fixed a bug in Etomo - NAD where the test K value list would only
accept whole numbers.

6/19/08: Added filterplot for plotting IMOD filter functions.

6/19/08: Added imodfindbeads for detecting gold particles in images.

6/19/08: Fixed imodinfo to give extra verbose output with -vv as advertised.

6/17/08: Implemented three ways to change diameter of a tube mesh within a 
contour, available from both Imodmesh and 3dmod.

6/17/08: Added centroid calculation to integrals in Nda and Mtk.

6/17/08: When inserting fine-grained changes, no longer wipe out later
matching changes inserted by the users.

6/12/08: Made scale bar and light vector display come out on top of models.

6/10/08: IMOD_3-12-11
6/10/08: Fixed some problems with lighting direction with multiple models, and
added a vector display of light direction while moving the light.

6/8/08: Added ability to fit a cylinder instead of a sphere to Imodcurvature,
using a stupid exhaustive angular search; also fixed bug in 3D fitting when
the points are spaced apart farther than half the window length.  Made value
output in model be scaled from pixels into user's units, and added option to
get curvature values rather than radius of curvature values.

5/31/08: Added general values and point sizes to ascii model output.

5/30/08: Rewrote mrcbyte and imodauto to read data slice by slice instead of
reading the whole file into memory.

5/30/08: Added option to Boxstartend to specify a size in X, Y, and Z, so 
square boxes are no longer required; fixed centering in Z so that the option
to set slices before and after actually works.

5/29/08: Added instructions to Tilt output for scaling to -15000 to 15000.

5/29/08: When the input data are bytes, Copytomocoms will set the mode for
the aligned stack to integers so it can be filtered without saturating.

5/29/08: Changed Tomostitch to run Blendmont with ExcludeFillFromEdges only
if that option is specified to Tomostitch.

5/29/08: Right mouse button can now be used to select points in the isosurface
display; the current image point is set to the picked point.

5/29/08: Fixed crash when starting a new model with model view open.

5/28/08: Fixed sphere drawing in slicer when there is a Z scale or
differential binning.

5/28/08: Fixed problems with Etomo Join table handling after a row deletion
and some problems with very large tables.

5/27/08: IMOD_3-12-10
5/27/08: Fixed running of Tilt from Whole Tomogram Positioning (broken in 
3.12.9).

5/27/08: Synchronized contrast radio button in autocontour window with F9/F10.
Made autocontour Next operation work with autoapply in image processing.

5/27/08: The isosurface display position can now be set from the rubber band.
The computation is now multithreaded but this is not used by default and 
requires IMOD_PROCESSORS to be set to activate it.

5/26/08: Added options settable in Preferences for starting at middle section
(default on) and for doing autocontrast on the first section seen (default is
to do this when starting without loading a model). 

5/26/08: Added hot keys t, b, l, r, f, k for looking at all 6 faces of model
in model view, fixed orientations for rotations around Z in object
edit move panel, remapped low-resolution toggle to hot key R.

5/26/08: Bug fixes: Fixed drawing of multiple X or Y image planes in model
view (it was drawing the same plane at different positions).  Fixed changing
of current point on mouse release when starting movie.  Fixed crash if model
view or object edit closed while meshing.  Prevented autocontour and line
tracker windows from opening when color data is loaded.

5/26/08: Added options to make a scale bar be a false color ramp.

5/26/08: Added hot key and menu item for opening model view and isosurface
from 3dmod.

5/26/08: Added Ctrl T hot key for toggling the current object on/off.

5/25/08: Added ability to mesh all objects in model view object edit.  

5/25/08: Added option to rotate slicer around model view center of rotation
when their rotations are linked.

5/25/08: Added option for reading in a tilt angle file; angles are displayed
in the zap window toolbar instead of the window size.

5/24/08: Added option to apply image processing filter automatically when
changing sections.  Added option to smoothing filter to not rescale the data,
so that thresholds are comparable between slices.

5/24/08: Implemented interpolation in the conversion from pixels above
threshold to boundary contours in auto-contouring and in imodauto.  Added an
option for kernel smoothing to imodauto to match what is done in 3dmod.

5/23/08: Added checkable option in File menu to save TIFF snapshots of image 
windows as 8-bit grayscale.

5/23/08: TIFF changes: Added an option to mrc2tif to make a single TIFF stack.
Added support for floating point data in mrc2tif and tif2mrc, and 3dmod will
read such data.  Mrc2tif also puts out the minimum and maximum when data are
16-bit integer or floating point.

5/23/08: RGB changes: Added option to tif2mrc to convert RGB to gray-scale by
NTSC weighting, but kept old option for equal weighting.  Made 3dmod use this
conversion when reading in RGB as gray-scale and when snapshotting to
grayscale.

5/23/08: Pixel view window can now show value of any loaded data from memory,
including RGB triplets for color data, and can show RGB as gray scale.

5/22/08: Zap and model view montage snapshots can now be either TIFF or 
non-TIFF types.

5/22/08: Made it possible to edit extra objects like the isosurface object in
the model view object edit dialog.  Made the on-off buttons in that dialog
appear and disappear as needed when the real object count changes.

5/22/08: Added Others On button to object list dialog.

5/21/08: Fixed crash when closing model view window during montage snapshot.

5/20/08: Added option to Finishjoin to do local fits instead of global
alignment when running Xftoxg.

5/20/08: Changed mrctaper to taper over 1% of the image size (mean of X and Y
dimensions) when size is above 1600 pixels.

5/20/08: Changed Makejoincom to put out sequential lines for stacking sample
averages to avoid having one very long line.

5/20/08: Fixed Densmatch to work on a single section.

5/20/08: Added ability to do 3D filtering directly on an image file and not
just on an FFT with mtffilter.

5/16/08: In Etomo making kill and pause work for a reconnected processchunks
process.

5/13/08: In Etomo added a right click menu to most of the process buttons.
This menu allows the associated 3dmod process to be run after the process
started by the button is done.

5/7/08: IMOD_3-12-9
5/7/08: Fixed xfalign when run with filtering, broken 1/4/08.

5/7/08: Increased line length in vmstocsh so that startjoin.com will work when
combining lots of files into sample average.

5/6/08: IMOD_3-12-8
5/6/08: Made object bounding box routine get bounding box from meshes if there
are no contours, so that centering on a saved isosurface object works.

5/2/08: Fixed imodmop painting of tubular lines when points are spaced farther
apart in Z than the diameter.

5/1/08: In Etomo - PEET, automatically bringing up isosurface display for
averaged volumes.

4/29/08: Isosurface display of image data added to model view based on mesh
code from Chimera.

4/28/08: Fixed bug in 3dmod floating that let black slider go above 255.

4/27/08: IMOD_3-12-7
4/27/08: Changed Tomostitch to match densities across overlap zones instead
of between centers of whole volumes and added verbose output option.

4/25/08: Added options to Densmatch to specify the region to be matched and
to allow for an offset between volumes; also made it do at least 10 samples 
along each axis, so large area tomograms will still be sampled on 10 planes.

4/21/08: In Etomo - Join remember the location of the previously added section
(while Etomo is running).

4/17/08: Fixed an error when running etomo with --help.

4/15/08: Fixed the reading of .prm files by Etomo - PEET.

4/14/08: Fixed Sirtsetup/Splittilt for Windows: switched Sirtsetup to unix line
endings, used \echo to output \rm to workaround tcsh problems (In 3.11).

4/14/08: Fixed Blendmont bug when using ExcludeFillFromEdges, which tomostitch
uses.

4/14/08: Made Findwarp detect and eliminate degenerate fits that would give
numeric errors in the transforms.

4/10/08: Fixed tomostitch when using temporary directory.

4/8/08: In Edgepatches, fixed creation of Section entry with Z values, and
added options for specifying range in X and Y of pieces to add.

4/8/08: Made tomostitch produce a residual model even after failed findwarp
runs.

4/4/08: Fixed some problems with allocation and freeing of extra objects and
fixed some memory leaks in 3dmod.

4/2/08: Fix problem displaying "<" in tooltips.

4/2/08: In the PEET interface fixed the handling of a missing model file entry.

4/1/08: IMOD_3-12-6
4/1/08: Added option to pass image data into 3dmod from standard input.

4/1/08: Fixed transparency when running model view from 3dmod, broken 3/5/08.

4/1/08: Fixed PEET prm file put out by eTomo, broken in last version.

4/1/08: In PEET interface, added controls for masking.

3/26/08: Fixed IMOD.adp, fixed package to include bash.profile for Mac (In 
3.11.5).

3/24/08: IMOD_3-12-5
3/21/08: Changed to a less memory intensive method of popping up the log files
in eTomo.

3/21/08: Made the opening of fine alignment logs files more flexible, so that
the solutions logs is more likely to be opened in low memory conditions.  

3/21/08: Fixed running of Finishjoin from eTomo (In 3.11).

3/20/08: Modified Windows .cmd wrappers so scripts can be run by their full
path (but still doesn't work from eTomo).  (In 3.11).

3/17/08: Added an environment variable ETOMO_MEM_LIM to set the java memory
limit in etomo.

3/10/08: Fixed crash from key handling by scale bar dialog in 3dmodv mode.

3/6/08: Made Boxstartend scale model coordinates to the volume being
extracted, so the model can be made on a binned-down volume.

3/5/08: PEET interface in eTomo has new controls to select efficient
full range searching.

3/5/08: Fixed artifact on right edge of image in HQ highly zoomed slicer.

3/5/08: Added option to make scale bars vertical.

3/5/08: Made 3dmod save and restore settings of float and subarea checkboxes.

3/5/08: Made rubber band moving work when bead fixer or other plugin is taking
mouse events.

3/4/08: Increased allowed points in Tiltalign to 1000 in 3D, 140000 in 
projections.

3/4/08: Changed Beadtrack to be able to track huge numbers of fiducials as long
as they are done in local areas; handled image boxes better to relieve memory
restrictions on them.

3/4/08: In Ccderaser, fixed bug when patch had more than 1000 pixels, fixed
merging of multiple circles, and increased linear maximum extent of patches to 
200 (In 3.11).

3/3/08: Fixed ability to run graphical Fortran programs on Mac (broken 3.10.22)
and provided individual script to run each so it would run from command file
(In 3.11).

3/3/08: IMOD_3-12-4
3/3/08: In Blendmont, fixed bad scaling of mode 1 data, fixed double-scaling 
of one line with binned output, and restored old behavior of floating to
positive range for mode 1 (In 3.11).

2/29/08: In Etomo fixed "Start Combine" button in the Tomogram
Combination dialog so that it is enabled correctly when the "Create Combine
Scripts" button is pressed.

2/28/08: In Etomo retrieve low and high Z from 3dmod with rubberband command.

2/28/08: Increased size of arrays in Corrsearch3d (In 3.11).

2/27/08: Fixed vmstopy, broken 1/5/08.

2/27/08: In the PEET interface in Etomo added "Add Row" button to the iteration
table.

2/21/08: Fixed ability to run anisotropic diffusion from etomo in Windows:
changes in Chucksetup, Processchunks, eTomo (In 3.11).

2/21/08: In 3dmod added Extract File... option to the File menu.  This option
runs trimvol based on rubberband coordinates and low and high Z choices.

2/18/08: IMOD_3-12-3
2/18/08: Stopped Processchunks from misinterpreting 'cd:' in a complaint about
a key from ssh as a failure to cd (In 3.11).

2/18/08: Stopped eTomo from taking up increasing memory and CPU time up to
100% if the parallel processing screen is left open for hours (In 3.11).

2/18/08: Kept processchunks from using lots of CPU time when there are many
"machines" and many chunks (In 3.11).

2/6/08: Prevented 3dmod started from eTomo from crashing by writing messages
(e.g., from modv snapshots) to terminal after eTomo has exited (In 3.11).

2/6/08: In the ZaP windows added section selection to the rubberband
functionality.

2/4/08: Fixed findhotpixels if filenames entered with -input & -output 
(In 3.11).

2/3/08: In Model View, added scroll wheel zoom, option to swap left and middle
buttons, and ability to rotate model or clipping plane with Shift-Right button.

1/31/08: Increased allowed filename length from 120 to 320 in header (In 3.11).

1/30/08: Fixed Final thickness being used instead of Sample thickness in whole
tomogram positioning (backtagged into 3.11.2).

1/28/08: IMOD_3-12-2 and IMOD_3-11-2 released
1/28/08: In eTomo, fixed updating of shift and offset values after running
tomopitch with whole tomogram positioning (In 3.11).

1/28/08: Fixed bug that made program crash if object list window no open.

1/27/08: IMOD_3-12-1
1/27/08: Added ability to define and name multiple object groups in object
list window.

1/25/08: In eTomo, fixed reconnect to non-parallel tilt, problem with combine
process monitor in Java 1.6, and mistaken enabling of parallel processing for
tomogram processing (In 3.11)

1/25/08: Fixed problems with Ctfphaseflip: interpolation width no longer fixed
at 36 and strip width no longer fixed at 256 (In 3.11).

1/25/08: Added install option to use libg2c packed with IMOD if the package
has it (In 3.11).

1/25/08: Added scale bar dialog to 3dmod (from edit menu).

1/23/08: Andrew Noske's drawingtools plugin added to IMOD.

1/22/08: Converted patch2imod, imo2patch wrappers with dos2unix (In 3.11).

1/21/08: Stripped control characters from ssh version test and quoted drop
message to avoid script failure in Processchunks (In 3.11).

1/21/08: Added grouping capability to object list window to allow objects to
be edited in groups.

1/21/08: Synchronized model view object edit and object list after object
deletion, renumbering, and combining (In 3.11).

1/19/08: Added an On button to the Draw Data Type in model view object edit
to turn objects back on without having to select Contour/Mesh (In 3.11).

1/19/08: 3dmod creates a new empty object after the user deletes all objects
to avoid crashes (In 3.11).  Also eliminated most crashes with no object.

1/14/08: In eTomo handling an Imod directory path with embedded spaces.

1/14/08: In eTomo added the ability to reconnect to a parallel process.

1/13/08: Added a Multi-Z window to display successive slices in an array of 
panels.

1/10/08: Fixed Ccderaser to scale the model file to pixel coordinates on the
current stack even if the model came from a binned stack (In 3.11).

1/9/08: Fixed error from closing file twice with clip splitrgb (In 3.11).

1/8/08: Edpiecepoint can now be used to generate a piece list for a montage.
(In 3.11).

1/8/08: Fixed contour sort routine and made it work from 3D distances 
(In 3.11).

1/4/08: Translated PIP to plain vanilla Python to avoid version problems with
extension module.

1/4/08: Fixed scripts to handle space in IMOD_DIR and IMOD_TMPDIR.

12/28/07: Added the directory size to the Clean Up dialog.

12/27/07: Added an option to extracttilts to give a warning if the tilt angles
are suspicious; made copytomocoms use the option (In 3.11).

12/26/07: Added Etomo arguments to allow the reconstruction Setup dialog to be
completed automatically.  See etomo -h.

12/21/07: IMOD_3-12-0 and branch to IMOD_3-11-0
12/17/07: IMOD_3-10-24
12/17/07: Nicing processchunks when using a queue.

12/17/07: Modified PEET interface to handle a change in a flag definition 
in PEET.

12/13/07: Provided renamed executables and script wrappers for patch2imod
and imod2patch since Vista decided they were dangerous.

12/12/07: IMOD_3-10-23
12/12/07: Automatically running newstack, blendmont, and tilt with
AdjustOrigin. For a single axis tomogram created prior to this change, trimvol
will be run the option "-k" which prevents the origin adjustment.
ALL MACHINES USED FOR PARALLEL PROCESSING MUST BE UPGRADED TOGETHER.

12/12/07: Fixed panning in Xyz window from getting stuck at one end.

12/12/07: Made Solvematch compute the scaling along each of the three axes and
issue a warning if the scaling is not isotropic within 10%.

12/11/07: Removed warning from Tiltalign when solving for a single X tilt
variable plus rotation.

12/10/07: Fixed processchunks failure when it read a long error message from
nad_eed_3d, improved argument processing in nad_eed_3d to detect missing 
values after options.

12/10/07: Processchunks Resume will work after exiting and rerunning eTomo even
if eTomo exits abnormally.  Resume will not work if processchunks is still
running.

12/10/07: Fixed problem with vmstocsh created 11/20/07, that makes scripts fail
with FC2 package.

12/9/07: Added ability for Ccderaser to erase points inside of boundary
contours and in circles around scattered points; the latter can be used to
erase fiducials.

12/6/07: Added option to Blendmont to adjust origin for starting X, Y, Z.

12/6/07: Fixed Newstack min/max values in output header when not rescaling.

12/6/07: Made Tilt able to produce origin values that are based on the aligned
stack origin and account for all size and shift entries so different volumes
will be congruent.  ALL PARALLEL PROCESSING MACHINES MUST BE UPGRADED TOGETHER
TO THIS VERSION.

12/6/07: Allowed 3dmod to sort contours in open contour objects.

12/5/07: Converted Boxstartend for extracting subvolumes at model points to
PIP input and made it able to output practically any size volume.

12/5/07: Added option to Newstack to adjust origin values for scaling, binning,
and outputting a subarea of the original volume, and made Trimvol use this 
option, so that models built on a volume will display correctly on a subvolume.

12/4/07: Changed 3dmod to support cursor-like extra object drawn by plugin, and
implemented array of extra objects to avoid conflicts between components using
them.  Documented 3dmod functions available to plugins, exported undo/redo and
selection list functions, and modified beadfixer2 to serve as better example.

12/4/07: Changed Linux startup scripts to place IMOD/bin on path only once.

11/30/07: Added ability to link model view to top slicer and rotate them
together.

11/27/07: Added option to imodmop to extract just volume needed for objects
being painted.

11/22/07: Generalize the kernel smoothing in 3dmod and clip to use Gaussian
kernels, 3x3, 5x5, or 7x7, with specified sigma.  Using a larger sigma should
reduce need to iterate, but also added an option to iterate smoothing in clip.

11/20/07: IMOD_3-10-22
11/20/07: Switched to using individual script for each Fortran graphics program
(nda, mtk, etc) in the Mac so they can run from command files without using
runimodqtapp; added commands to put qtlib on the library path to scripts
produced by vmstocsh and vmstopy.

11/17/07: Increased allowed length of concatenated and temporary file names
in Fortran programs from 80 to 320; increased filename lengths to 320 for
rotatevol, matchvol, warpvol and newstack.

10/16/07: Added ability to make the side views bigger or smaller relative to
the XY view in the XYZ window, and added a centering button.

11/13/07: IMOD_3-10-21
11/13/07: Fixed linklibs-mac to work on OS X 10.5, to include new IMOD
library, and to provide more error checks.

11/13/07: Added setting in 3dmod preferences to control the volume size at
which slicer speeds up its computations, made it drop high-resolution display
before radically reducing number of slices averaged, gave credit for multiple
processors if defined by IMOD_PROCESSORS, and eliminated double draws when
changing slicer angles.

11/12/07: Interface to anisotropic diffusion added to eTomo.

11/10/07: Made s save model in slicer window, assigned l hot key to show
slice instead.  Fixed updating of slicer angle window when new model is
created, and stopped synchronization to slicer angle table when Auto button is
turned on since direction of action is ambiguous.

11/9/07: Added option to imodmesh to recompute normals from an existing mesh.

11/9/07: Added ability to set a directory to receive snapshots in 3dmod.

11/1/07: Fixed reading of ascii model with DOS line endings

10/29/07: Converted Xcorr to PIP input, removed redundant filters, adjusted 
origin when run on a subset of stack, renamed to Xcorrstack to reduce confusion
with xcorr.com.

10/24/07: Fixed install script to work on Vista and allowed alternate
installation directory for Windows.

10/21/07: Converted Boxavg to PIP input, made it take a model file instead of
a point file, and made it operate with and align to non-integer coordinates.

10/19/07: IMOD_3-10-20
10/19/07: Fixed defocus scaling bugs in ctfplotter and ctfphaseflip.

10/19/07: Fixed two bugs in mtk: computation of multiple graphs (broken 1/5/06)
and selection of neighboring mesh objects with multiple graphs.  Also added
an option to get lengths of connector lines between points of close approach.

10/18/07: Added Point2model as a complementary program to Model2point to allow
simple format for getting data into and out of IMOD models.

10/15/07: Fixed Tif2mrc when reading unequally sized images on Windows, added
an option to set output size, made different sizes work with all data modes and
made the image be centered in the output area when it is clipped or padded.

10/14/07: Fixed model2point to output index coordinates by default and added
an option to get scaled model coordinates instead.

10/14/07: Changed file size shown when opening a file to be in KB instead of
512-byte blocks and labeled with a K.

10/12/07: Changed interpolation routines used by Newstack and Blendmont to
operate around the true center of the image instead of being offset by half a
pixel.  This will change some output, but now the tilt axis should be located
properly for aligned tilt series rotated by large angles like 90 degrees.

10/10/07: Fixed Corrsearch3d's handling of volume shifts when volume sizes
are unequal.

10/4/07: Made Corrsearch3d compute positions and correlation coefficients more
carefully to avoid numeric problems correlating solid gray areas.

10/3/07: Made Processchunks able to run without a -finish.com file.

10/3/07: Made Taperoutvol set the origin to match the coordinate system of the
input volume, and made Assemblevol set the origin based on the origin of the
first input subvolume.  Thus origins should be preserved through chunk 
processing and reassembly.

10/3/07: Made nad_eed_3d work with unsigned integer (mode 6) input.

10/1/07: IMOD_3-10-19
10/1/07: Added test mode output to Edgepatches.

10/1/07: Handling of defocus values in multiple tilt ranges improved in 
Ctfphaseflip; documentation of defocus file fixed.

10/1/07: Fixed bug in filter setup function that would crash Tiltxcorr if run
with no filtering (broken in 3.10.10).

9/28/07: Etomo now supports parallel processing on a cluster defined in 
cpu.adoc, and queuechunk is fixed to work better on a PBS queue.

9/24/07: IMOD_3-10-18
9/24/07: Copytomocoms now sets up a SCALE entry in tilt.com that roughly 
compensates for the dependence of Tilt's scaling on the width of the input 
data.

9/21/07: Added option to show stored values with constant color to make it
possible to distinguish ones below and just above a threshold.

9/20/07: Added ability to visualize the current clipping plane as a
semitransparent plane and improved predictability of clipping planes by making
them rotate around the point closest to the center of the window.

9/20/07: Added ctfplotter for determining defocus in groups of low-dose tilt
images, and ctfphaseflip to correct for CTF in tilted images with phase
flipping only.

9/20/07: Split libimod into pure model library and a utility library.

9/17/07: Added environment variable IMOD_RETAIN_FSCACHE to keep 3dmod from
dismissing data in file system cache while loading it (see man imodenv).

9/16/07: Enhanced install scripts to provide options for specifying the
destination to copy startup scripts to or skipping this step, added help
output, fixed handling of relative path for install location.

9/16/07: Switched high resolution drawing in 3dmod from quadratic to cubic
interpolation, which gives less pixelation at high zoom amd is only 15% slower.

9/14/07: Added script by which Processchunks can put jobs on a cluster queue.

9/12/07: Added options to model2point for getting non-integer output, and
object and contour numbers.

9/11/07: IMOD_3-10-17
9/11/07: Added options to sirtsetup for better management of intermediate
reconstructions, and added more instructions to man page.

9/11/07: Added an option to trimvol to allow scaling of floating point to 
integer.

9/8/07: Fixed Tilt's reading of SHIFT and some other options, broken in PIP 
upgrade, 3.10.13.

9/7/07: Fixed Blendmont to stop truncating integer input data at 0 for mode 1 
or 32767 for mode 6.

8/30/07: Fixed Rotatevol, Matchvol, Warpvol to work with more than 32767 slices
in a layer of cubes.

8/30/07: Made clip flipyz/rotx read multiple slices of data up to 500 MB worth
then write the slices out, reducing real time consumed by 6-10 fold.

8/28/07: In eTomo parallel processing allowing Resume after exiting and re-
starting eTomo.

8/21/07: In eTomo added a warning message to Tomogram Combination for
situations where the X and Y min and max values should be changed.

8/20/07: Fixed Findcontrast to work with densities over 1000000.

8/17/07: IMOD_3-10-16
8/17/07: Fixed sirtsetup to work with binning and when making a log stack.

8/16/07: In eTomo, added ability to set the size of the aligned stack in
the advanced section of the Newstack/Blendmont panel.  This is to allow the
SIRT procedure to be used on a trial subarea, and to allow oversized
recontructions to recover area lost due to rotation of the tilt axis to
vertical.

8/15/07: Fixed processchunks to work with > 999 chunks, up to 9999.

8/15/07: Fixed bug in slicer that crashed 3dmod, which showed up with new mouse
rotations.

8/13/07: Added a Locator window to 3dmod to keep track of and manipulate the
area displayed in the Zap window.

8/12/07: IMOD_3-10-15
8/10/07: Sirtsetup has a man page and can work with a tilt command file that
has a LOG entry.

8/10/07: Densnorm has new options to handle data stored as signed integers
with 32768 subtracted.

8/8/07: Added Default values to the Settings dialog so that the user can
customize the initial value of some fields on the Setup and Post Processing
dialogs.

8/7/07: Fixed picking of points in model view to avoid context-setting error 
messages.

8/6/07: Added #/$ hot keys to start/stop movies in Z in place of mouse click.

7/30/07: In eTomo Join, allowing the project to be saved before "Make Samples"
is pressed.

7/27/07: In eTomo Tomogram Combination the "Starting points to use from A"
field can now take "/", which it will convert to an empty string.

7/27/07: Clarified the etomo fiducial tracking interface.  Instead of a
separate button to copy the fiducial model to the seed model, there is now a
button to copy and then track the resulting seed model.

7/25/07: In eTomo PEET added the ability to read the tilt log file to retrieve
a tilt range.

7/24/07: IMOD_3-10-14
7/23/07: In eTomo PEET screens, fixed button to bring up averages, and 
changed sense of the checkboxes to take reference or average equally from all
tomograms to match code.

7/19/07: Added 3dmod hot keys !/@ for jumping to first and last time index, or
to start and end limits on Time set in the Edit-Movies dialog.

7/19/07: Added sirtsetup to set up command files for SIRT.  No man page yet.

7/18/07: IMOD_3-10-13
7/18/07: Fixed some problems with edgepatches run with narrow overlap zones.

7/16/07: Added Densnorm for density (mass) normalization.

7/16/07: A small zero-frequency component was added to the backprojection
in Tilt to prevent some artifacts from lines having different mean levels;
ALL MACHINES USED FOR PARALLEL PROCESSING MUST USE TO THIS VERSION IF ANY DO.

7/16/07: Splittilt modified to handle reprojections from a tomogram and to
be compatible with setting up files for iterative operations.

7/16/07: Tilt can now reproject from a tomogram file and produce reprojections
that match the input data even when X axis tilting, Z factors, or local
alignments were used.  It can take weighting factors for a relative mass
normalization.

7/15/07: Added ability to enter 0,0 as limits to assemblevol when there is
no overlap between volumes being assembled.

7/15/07: Fixed filling of edge areas when using xyzproj with constant scaling.

7/13/07: The Xyz window now has fixed subwindows for each area in which the
images zoom up and pan around.  Keypad insert key works for modeling here.

7/8/07: 3dmod changes to make bulk model cleanup operations easier: Object
deletion will delete multiple selected objects.  There is an Object Combine
menu entry that will move all contours from multiple selected objects into one
object and delete the other objects.  Popup messages asking for confirmation
of high-level deletion operations now have a Yes Always option.  Groups of
objects can be switched between open and closed and the automatic new contour
feature can be selected with buttons in the Lines panel of the Model View
Object Edit dialog.  Dragging the mouse in model view with the third button
and the Ctrl key down will add contours that are crossed to the selected
contours.

6/27/07: Increased point limit in solvematch to 10000.

6/21/07: Converted Tilt to PIP input without having to retain old code by 
torturing PIP into accepting a few odd things.

6/18/07: IMOD_3-10-12
6/18/07: Fixed model view rotation around X axis.

6/15/07: IMOD_3-10-11
6/15/07: In Slicer, the volume can now be rotated relative to its current
orientation with mouse or keypad keys just like the model in Model view.
This is done with Shift key down, or with a new Shift lock toolbar button on.
Also fixed various synchronization problems with the slicer angle dialog plus
two bad but obscure bugs.

6/13/07: Added ability for 3dmod to read PIF files produced by Bsoft.

6/11/07: Upgraded ascii model format to retain more properties.

6/7/07: Improved error reports from low-level I/O routines for Fortran to 
include filename and to report a system error string correctly.

6/7/07: Added Ctrl-Shift-D hot key to delete a surface, and added an option
to Object-Type window to get a new contour automatically on each new section 
when modeling with open contours.

6/7/07: In Etomo - PEET, allowed the root name to be changed when importing a
.prm file.

6/7/07: In Etomo - PEET, allowed nonsupported parameters in the .prm file.

6/6/07: IMOD_3-10-10
6/6/07: Fixed miscentering in Zap window after doing a drag draw, and after
deleting points, by setting current point coordinates correctly.

6/6/07: In Etomo - PEET, added "Change Model" button to the Volume Table.

6/5/07: In Etomo - PEET, added flgWedgeWeight to the interface ("Use tilt range
in alignment").

6/5/07: In Etomo - PEET, fixed a bug which prevented the "New PEET" menu item
from being enabled correctly.

6/4/07: In Etomo - PEET, added "Copy Parameters" button, which allows the reuse
of a preferred set of parameters.

6/4/07: Attaching to a model point in Slicer now rotates points for analysis
so that it will pick points only within 0.5 pixel of the current plane.

5/31/07: In Etomo - PEET, fixed a problem creating the .epe file when importing
a .prm file or duplicating a project.

5/31/07: Added options to Mtffilter so that it provides the same set of 
filter shapes as Enhance does, and can be used in place of Enhance.

5/31/07: Added a time toolbar to Slicer identical to the one in the Zap window,
and added an angle-saving toolbar that appears when the Slicer Angles dialog 
is opened and has some of the controls that were in the Slicer Angle dialog.

5/29/07: Improved error reporting for load averages.  Added a "Restart Load"
button which causes Etomo to restart any failed load averages.

5/29/07: The Zap info button now reports a trimvol command for excising the 
selected area of the current slice that takes account of whether the data are
loaded in flipped and is easily extensible to multiple slices.

5/29/07: Slicer has a new mode in which the center point is not tied to the
current image/model point and the mouse now pans the image; there is a toolbar
button to switch between this and classic mode.  A slicer can now be time
locked too.  Automatic scaling is used to match the image contrast to that of
a singel slice when 4 or more slices are being summed.  FFT's are also
automatically scaled to have contrast in the same range as images.  Images
edges are now tapered before taking an FFT to eliminate artifacts.

5/25/07: Added ssh options to both etomo and processchunks to keep ssh from
asking for passwords when there is either no account or no passwordless
access.  Processchunks also turns off strict host key checking.

5/24/07: Added a dialog to 3dmod to save slicer angles in the model and reset
slicer to the saved angles.

5/22/07: IMOD_3-10-9
5/22/07: Fixed bug in Blendmont (added in 3.10.5) that gave bad origin values.

5/22/07: In the Etomo Parallel Processing table, added the ability to exclude
rows based on the current user.  See "users" in the cpuadoc man page.

5/22/07: Changed Extracttilts after changing the way that SerialEM packs a
float into two shorts in the extended header.

5/21/07: In the Etomo Parallel Processing table, added the ability to exclude
rows based on the type of interface in use (Join, PEET, etc).  See
"exclude-interface" in the cpuadoc man page.

5/21/07: In the Etomo Parallel Processing table, removed the Users column,
which is inaccurate in Fedora Core 6.  To keep the Users column, add a
"users-column" attribute to the global section of cpu.adoc.

5/18/07: IMOD_3-10-8
5/18/07: In Etomo Parallel Processing, the lowest possible Nice is now 4.  This
can be changed by adding the attribute "min.nice" to the global section of the
cpu.adoc file.

5/18/07: Added option to Extracttilts to extract dose information saved by 
SerialEM.

5/18/07: Etomo PEET interface now includes row deletion, importing from an
existing prm file, and data set duplication.

5/18/07: Added options to imodmop to specify background fill value and color.

5/7/07: For 32-bit Windows, added flag to 3dmod and midas to allow them to
access up to 3 GB of memory instead of 2 GB, if boot parameter /3GB is used.

5/5/07: Movie snapshots from Zap or Slicer will no longer check for the first
free snapshot filename, which gets slow with many hundreds of files.

5/3/07: IMOD_3-10-7
5/3/07: Etomo now includes an interface for the PEET particle averaging 
programs.

5/3/07: Fixed bugs in Processchunks when there are failures running a sync file
or running a command on a machine.

5/3/07: In Tiltalign, changed projection stretch to be after rotation so a beam
tilt can be used correctly, discovered a variable redundancy in the projection
stretch and reduced it to a projection skew of X and Y axes.

4/26/07: IMOD_3-10-6 (Etomo unstable)
4/26/07: Rebuilt imodmop to incorporate ability to make a projection series
(formerly done by imodcmopp), handle all kinds of data including FFT's,
allow control of output image size and image scaling, extract regions defined
by scattered points and cylinders along open contours, and output either
monochrome or color data.

4/26/07: Added option to Xyzproj to keep the scaling constant at different
tilt angles, instead of dividing by number of pixels along a projection ray.

4/26/07: Made 3dmod set model image reference information correctly when 
the image is a mirrored FFT, so model will display interchangeably between
mirrored and non-mirrored FFT.

4/23/07: In Etomo Rejoin, fixed the upper slice limit sent to Finishjoin for
the final rejoin (back-tagged into 3.10.4 Etomo).

4/23/07: Fixed ability of Fortran programs to read header of mode 16 files (In 
3.9).

4/11/07: IMOD_3-10-5 (Etomo unstable)
4/11/07: Added option to Imod2vrml to output separate point/normal list for
every polygon (an attempt to avoid holes in some viewers.)

4/9/07: Added option to Blendmont to make it exclude gray fill areas from
edge function analysis.

4/8/07: Added programs Edgepatches, Stitchalign, and Tomostitch for stitching
together adjacent tomograms.

4/7/07: Increased array limits in Warpvol and Findwarp to support work with
supermontages.

4/7/07: Added options to Blendmont to support running in parallel and added a
splitblend script to produce command files for this.

4/7/07: Added options to Blendmont to specify range in Z over which an edge
gives good edge functions, to eliminate effects of bad edge functions when
stitching adjacent tomograms.

4/6/07: Increased range of light movement in model view and made rate of
movement fairly uniform across range of angles.

3/28/07: Fixed bug in binvol for (large?) images with ny < nx.

3/28/07: Fixed crashes of 3dmod when focus is in a toolbar edit box in slicer,
zap, graph or tumbler window and window is closed with Escape.

3/23/07: Fixed bug that crashed 3dmod when model view object edit window was
opened after creating a new object (In 3.9).

3/21/07: IMOD_3-10-4
3/19/07: Changed the way Solvematch determines the center shift so it won't get
screwed up if the center points are all on one surface.

3/9/07: Made Zap montage snapshots work when taking automatic movie snapshots.

3/8/07: Made Tiltalign put out at least two local areas in each direction and
made Tilt insist on this.

3/8/07: Compacted output from beam tilt search, and fixed output and alignlog
so it does not show up in error output from alignlog, but in a new -b output.

3/8/07: Etomo added a tiltalign parameter to the Fine Alignment dialog,
TargetPatchSizeXandY, which can be used in preference to
NumberOfLocalPatchesXandY.

3/7/07: Etomo:  Added beam tilt fields to the Fine Alignment dialog.  The 
.xtilt file will be created by align.com and will be use by tilt.com.

3/5/07: Renamed option in Tiltalign to FixedOrInitialBeamTilt.

3/2/07: Increased string size from 80 to 160 in Corrsearch3d (In 3.9).

3/1/07: IMOD_3-10-3
2/22/07: Fixed a problem in Etomo - Parallel Processing that may have affected
some bash users with .cshrc files.  The local load average was always failing.

2/19/07: Tiltalign modified to solve for a beam tilt angle
(non-perpendicularity of beam and tilt axis) and to express it as tilts around
the X axis and modifications of tilt angle and rotation, so that this can be
incorporated into the reconstruction.  Added an option to specify the size of
local areas instead of the number, in which case local areas will cover the
area occupied by fiducials instead of the image area.  Made local fits skip
views with no points and make groups larger when views have fewer than 3
points.

2/12/07: IMOD_3-10-2
2/12/07: Changed Newstack to provide better fractional pixel origin values when
data are binned and the output size is a specified size.

2/9/07: Etomo has a new interface for refining the alignment of joined 
tomograms.

2/2/07: Fixed bug in binvol when specifying input file with -input.

1/31/07: Added option to Xfmodel to specify a scaling of the shifts so it can
transform a model built on binned stack with transforms for unbinned stack.

1/31/07: Stopped Finishjoin from scaling offset down by binning.

1/31/07: Added option to rotatevol to set fill value for areas with no image.

1/31/07: Made clip transfer header "start" information to output file.

1/24/07: Finishjoin no longer allows dashes in the slice range entries, because
negative numbers can now be entered to get gray slices.

1/24/07: Fixed ancient bug that kept Remapmodel from working with significant
sized models (In 3.9).

11/23/07: Etomo - Combine:  Fixed a failure in "Replace Patch Vectors" (In 
3.9).

11/23/07: Etomo - Join:  Fixed a bug that occurred when running Makejoincom.
Failure occurred when a section was rotated and the .rot file already existed
and did not need to be changed (In 3.9).

1/23/07: Made Blendmont bin overlap areas for cross-correlation when they 
exceed 1Mpixel in size.

1/17/07: Fixed failure to initialize number of patches to exclude in Findwarp
(in 3.9).

1/9/07: IMOD_3-10-1
1/8/07: Fixed bug in slicer in which the Z coordinate computed from a mouse
position was limited by the X size instead of the Z size (In 3.9).

1/6/07: Made Mtk preserve point sizes when assigning contours to new objects.

12/29/06: Fixed bug in Pixel View display of mouse position value from memory
(value from file was OK) (In 3.9).

12/20/06: Added options to Newstack for outputting sections at a regular
increment and for outputting blank sections given section numbers out of
range.  Finishjoin now has an option to accept numbers out of range for
producing blank slices between sections.

11/27/06: IMOD_3-9-2 released

11/22/06: For model view movie-making, fixed behavior of file type buttons
when montaging and added check for perspective (In 3.9).

11/16/06: SGI:  Prevented out-of-memory errors from popping up incorrectly (In
3.9).

11/15/06: In eTomo join, prevented join size from being reset to default 
(In 3.9).

11/14/06: Allowed 10,000,000 points in line/point arrays in mtk (In 3.9).

11/10/06: Added attempt to deal with SELinux in install script (In 3.9).

11/4/06: Fixed treatment of ends of open contours in Imodcurvature (In 3.9).

11/4/06: Add time values to tube meshes so multiple times don't all show up at
once (In 3.9).

11/3/06: IMOD_3-10-0 and branch to IMOD_3-9-0
11/3/06: In Etomo - Join, handling inverted samples by making sure that the
final start and end slices are in the right order.

11/2/06: Fixed problem of gaps and missing contours when contours with color 
changes are displayed in model view.

11/2/06: Fixed a problem with numeric precision of circle fits in 
Imodcurvature.

10/31/06: Made Imodmesh propagate properties like gaps to created connector
points made when meshing complex geometry.

10/30/06: Fixed Resamplemod rotation when mean vector has a negative Z 
component.

10/30/06: Fixed Mtk moving surface contours to a new object for last or only
meshed object.

10/27/06: Converted Remapmodel to PIP and added options to allow easy
remapping of a model after rejoining serial tomograms with a different
spacing.

10/26/06: Added Xfjointomo to refine alignment of serial section tomograms
with a fiducial-type model.  Added an option to Finishjoin to incorporate the
refining transformations from this program.

10/24/06: IMOD_3-8-28
10/24/06: Added an option to xftoxg to make one section be the reference that
others are aligned to.

10/20/06: In eTomo - Post Processing, made Rotate around the X-axis the default
reorientation method.

10/20/06: Fixed install script so its new offer to remove previous versions
does not include the current version.

10/19/06: Improved parallel processing failure reasons shown in eTomo.

10/18/06: Fixed beadfixer to remember "Automatic new contour" between sessions.

10/17/06: In eTomo - Join, display a warning highlight in sections which will
be inverted in the final join.  Also added an Invert Table button, to change
which sections will be inverted.

10/17/06: In eTomo, fixed a bug in Windows where an ImodSendEvent error
message pops up when fine alignment is run and the .preali is not open.

10/17/06: In eTomo - Join - Setup & Join, fixed a bug where the Final Start and
End values are set to zero when a value is entered only in the X (or Y)
rotation angle.

10/17/06: Added Findhotpixels so it will be easier to use for people setting
up SerialEM.

10/17/06: Added a module for reading and writing autodoc-type files and
providing data from key-value pairs to C or Fortran programs.

10/14/06: Added option to Imodcurvature to rotate arbitrarily oriented
contours into a Z plane and to fit circles to them.

10/13/06: In eTomo - Tomogram Combination - Final Match - Volcombine
Parameters, added a field to set parameter for taking low frequency data from
both tomograms.

10/12/06: IMOD_3-8-27
10/12/06: eTomo now manages log files and files used for process monitors
better to solve problem in Windows with trying to rename or delete open files.

10/11/06: T now turns off current and endpoint symbols in slicer too.

10/11/06: Fixed crash from closing Xyz window with Esc if pixel view open.

10/11/06: Changed routine for finding mean normal to a contour, so slicer will
be more robust with open, almost straight contours.

10/9/06: Took ERROR: out of Imodkillgroup's message when it can't find process.

10/6/06: IMOD_3-8-26 (eTomo unstable)
10/6/06: Made slicer multi-threaded to take advantage of multiple processors.
The default is to use 4 threads but this can be overriden by setting the
environment variable IMOD_PROCESSORS to the number of processors.

10/6/06: Startup files now source site-specific startup files IMOD.sh and
IMOD.csh if they exist in $IMOD_CALIB_DIR.

10/5/06: Made beadtrack exit with error if the seed model is empty.

10/5/06: Set the model max values to the new size if -n is used in imodtrans.

10/5/06: Stopped rotating tilt axis angles from FEI/Agard headers by 180
degrees if they were beyond +/- 90; this would screw up handedness.

10/5/06: Added xf2rotmagstr for converting a transform file to rotations,
magnifications, and stretches.

10/5/06: Removed fitrotsearch; the approach was flawed.

10/5/06: Set up a second non-TIFF snapshot format, so that both PNG and JPEG
snapshots can be made without switching the primary format.  Three formats are
now available in image and model movie control dialogs, and Ctrl-Shift-S can
be used ot snapshot with the second non-TIFF format from any window.

10/4/06: Fixed problem with zap window having wrong size to fit toolbar.

10/4/06: Implemented a structure for using Python within IMOD.  This consists
of: a module for running programs and getting MRC header information
conveniently; an extension module for the PIP parameter parsing interface; and
a program, vmstopy, that converts the IMOD command file format (and some of
the C-shell constructs found in them) to a Python script.

10/1/06: Added .cmd wrappers for scripts in Windows so that they can be run
from a DOS window as long as IMOD and Cygwin are on the path.

10/1/06: Alterheader now reads data in chunks for mmm and rms commands so it
will work with any size data.

10/1/06: Added a capability for brief header output from Fortran programs when
they read MRC headers; it is activated by setting an environment variable
IMOD_BRIEF_HEADER.  This is now used in volcombine.com.

10/1/06: Fixed large-file seeking routine to handle files with X/Y planes
bigger than 2 Gpixels, and fixed Fortran and C I/O routines to work with such
images as far as possible.  Newstack works with such large images, 3dmod
appears to work as well.  Other programs may need to be fixed when needed since
the assumption that the expression nx * ny will give a valid product is
ubiquitous.

9/21/06: Fixed problem with reading FFF files with one section, made 3dmod 
go right to checking for raw files if any of the raw specifications are
entered, and fixed setting mode with a MRC-like file so pixel view displays
correctly.

9/21/06: In eTomo, warning the user when the pixel spacing in an mrc header is
invalid.

9/20/06: In eTomo - Tomogram Positioning, changing the interface to work with
Fiducialess Tomograms.

9/20/06: IMOD_3-8-25
9/20/06: In eTomo - Tomogram Combination, giving access to cross correlation
coefficients (patch_vector_ccc.mod) created by Patchcorr.  Opening the 3dmod's
Imodv Objects window, so that false colors can be viewed.  Patch_vector.mod is
now being created by Matchorwarp.  Matchorwarp is also creating a residual file
called patch.resid.

9/20/06: In Tomogram Positioning, changing the display for fiducialess sample
creation.

9/18/06: Made processchunks able to detect and report a failure to cd to the
data directory or a failure to run IMOD commands.

9/18/06: Stopped imodmesh from rotating or flattening contours to be meshed as
tubes.

9/18/06: Added continuous display of mouse position and value in pixel view
window from Zap, XYZ, and Slicer windows, as well as option to close the grid
of values.

9/18/06: Stopped time movie when 1, 2, or time arrow in zap toolbar is pushed.

9/13/06: IMOD_3-8-24
9/13/06: Tilt.com:  removing Local File and Z Factor File when creating a
fiducialess sample.

9/13/06: Handling bowl shaped tomograms in Combine.  Added center shift limit
to Solvematch.  Allowing the initial match size to be adjusted in matchvol1.
Added initial shift to Patchcorr.

9/13/06: Added an option to Combinefft to average very low frequencies from
both tomograms, to eliminate lines between pieces containing boundaries between
dense and light material.

9/12/06: 3dmod can now mesh objects through a new panel in the Model View 
Object Edit window.  Meshing parameters are stored in the object both by 3dmod
and by Imodmesh.  Imodmesh has new options to use or override the stored
parameters.

9/12/06: Contours at any orientation can now be meshed, provided that all the
contours in a surface are at the same orientation and are properly spaced
apart.  Modeling in the Slicer has been enhanced to provide contours that
satisfy these requirement: modeled points will now come out exactly in a
plane; there is a new hot key to return to the orientation of an existing
contour; when the lock button is on, continuous drawing with the mouse is
possible and PageUp and PageDown step by one pixel perpendicular to the slice.

9/3/06: 3dmod can now read files in EM format, DigitalMicrograph 3 format,
and Hanspeter Winkler's FFF format.

9/1/06: IMOD_3-8-23
9/1/06: Added options to Matchorwarp to make a patch vector model with 
stored residual values and clipping planes.

9/1/06: Added 3dmod menu option to flatten all contours in an object, i.e.
make their points have a single integer Z value.

9/1/06: The model view window now allows visualization of multiple selected
contours, the selection of multiple contours with Ctrl-third button, the
selection of all visible contours with Ctrl-A, and deletion of multiple
selected contours with D.

9/1/06: Patch2imod will store correlation coefficients or residuals as values
in the model so that they can be viewed in false color in the patch vector
model.  It also sets up clipping planes to allow a subset of vectors to be
viewed easily.  Imod2patch will write stored values to a new patch file.

9/1/06: Imodcurvature can store curvature values directly; Imodmesh can encode
stored values in the mesh for dynamic color display of curvature.

9/1/06: Added ability to control multiple clipping planes together.

9/1/06: Models can now contain general stored values that 3dmod can display
as a modulation of intensity or in false color.  The mesh view panel in the
model view object edit window was changed to control of this display and to
allow items above or below the contrast threshold to be turned off.

8/30/06: Etomo - Tomogram Positioning:  fixed a problem with whole tomogram
generation where the _full.rec file wasn't created.

8/29/06: Added a field for KernalSigma to Etomo - Combine - Patchcorr.

8/27/06: 3dmod can now display 8-bit color tiff files with embedded color
maps.  Multiple files and multipage files can be read.  Tif2mrc can also
convert these to 24-bit color MRC files.

8/27/06: Allowed custom false color maps to be read into 3dmod and
imodcurvature.

8/24/06: Enhanced 3dmod graph window to average multiple lines of pixels,
show mean value, graph subsets of data selected by the Zap rubber band, and
to have a help page.

8/24/06: Stopped bead fixer from generating error when told to reopen a log
file before one is opened.

8/23/06: In Solvematch, added local fitting and an assessment of the shift of
the center so Corrsearch3d can be started off with a correct shift if
necessary.  Added options to specify the Z shift and tilt angle offset used 
when running Tilt, so using these options in tomogram generation will no
longer screw up Solvematch.  Fixed output of list of points used in B.

8/21/06: Converted Findwarp and Refinematch to PIP input, made them handle
either orientation of volume, changed outlier output to a summary, added
option for patch and residual output.  Made automatic fitting in Findwarp more
flexible in the thin dimension and made it try to meet a series of criteria
without being run repeatedly.  Modified Matchorwarp appropriately; all of this
makes the matchorwarp log file much more readable.

8/17/06: IMOD_3-8-22
8/17/06: Fixed a bug in eTomo Post Processing (trimvol) where the scaling from
sub-area values decreased by 1 each time eTomo was ended and restarted.

8/17/06: Added LC_LOCALE C setting to scripts doing arithmetic with awk to
prevent comma instead of period in floating point output.

8/16/06: Revamped Corrsearch3d so it uses displacements of neighboring patches
to adjust the center of the patch from B being correlated.  Also converted to
PIP input, made it do FFT correlations internally, added kernel smoothing,
made it handle volumes well in either orientation, allowed for a model on B
and for an initial displacement between the volumes.

8/15/06: Changed trimvol to treat -sx and -sy arguments as 3dmod coordinates.

8/11/06: Etomo: opening and re-reading the align log in 3dmod automatically.

8/10/06: Etomo: sped up the process monitors for mtffilter, prenewst, tilt,
and newst.

8/9/06: Adding more status information to the newst monitor and the regular
volcombine monitor.

8/4/06: Made clip stat a bit more efficient for mode 1 files and output
location of minimum.

8/3/06: Etomo can now reconnect to a currently running tilt upon entry.

8/3/06: Fixed Blendmont to take mode 6 files.

7/31/06: Created a compact version of Etomo.

7/26/05: Fixed cumulative correlation in Tiltxcorr, which failed on Windows
with two equal lowest tilt angles (e.g., +1 and -1).

7/21/06: In eTomo Setup Tomogram, placed distortion correction and mag gradient
correction into advanced when a distortion directory is not in place.

7/21/06: In eTomo fixed the font size functionality.  Font sizes 10 and up work
correctly after exiting and rerunning eTomo.

7/20/06: Fixed a bug in eTomo where processchunks never completed or gave an
error message when the local computer was missing from the cpu.adoc and
%mountname was used in the remote mount rule.

7/19/06: In eTomo Fiducial Model, changing the "Seed Fiducial Model" button
label to "View Seed Model" when transferfid is used.

7/19/06: In eTomo Fiducial Model, moved the "Use Fiducial Model as Seed"
button to the Basic screen.

7/19/06: In eTomo Tomogram Combination, no longer adding default Z min and max
values.

7/18/06: IMOD_3-8-21
7/18/06: Fixed bug where eTomo did not use the user specified display settings
in the Setup Tomogram screen or in the first data file opened.

7/18/06: Fixed bug in Tomogram Positioning where eTomo complained about align
not being run when the "Fiducialless alignment" checkbox was checked.

7/18/06: Fixed initial display of fonts and styles on setup screen in eTomo
and when it is opened with an edf file from the command line.

7/18/06: Made eTomo go back to clipboard communication with 3dmod on Windows
due to problems with core duo processors.

7/17/06: Stopped Bead fixer from recentering added or moved points in Zap
window, made up and down arrows in gap mode non-optional, made sure hot keys
only worked in the appropriate mode.

7/17/06: Labeled local area mean residual output from Tiltalign and provided
mean and range for all local areas.

7/17/06: Made reading and writing JPEG's in 3dmod available on the Mac.

7/14/06: Fixed mtk to transfer the power of a graph to the mean and SD graphs
from random shifting.

7/13/06: Made the default image format for non-TIFF snapshots be jpeg, except
on SGI.

7/13/06: Fixed bug in Solvematch that made it unable to use the transferfid
coordinates sometimes on a Mac.

7/11/06: Changed binvol to write in chunks so it will work with any size data.

7/11/06: IMOD_3-8-20
7/10/06: Changed "cut order" to "Z order" in join table; stacking sections in
reverse of cut order does not always preserve handedness.

7/10/06: Fixed problem in post-processing panel with blank entries in X/Y 
region to use for scaling.

7/8/06: IMOD_3-8-19
7/8/06: Increased array limits for extra header in Edmont, Newstack,
Extractpieces, Extracttilts.

7/8/06: Added ability to stretch around two fixed points in Midas, which
should make it easier to correct stretches.

7/5/06: IMOD_3-8-18 and IMOD_3-8-18_WKSHP
7/5/06: Fixed problem with buttons not working on tomogram position panel
after pressing done without doing final alignment.

7/4/06: IMOD_3-8-17 and IMOD_3-8-17_WKSHP
7/4/06: Fixed finishjoin problems with line endings on Windows (in 3.7).

7/3/06: Fixed running of Tiltalign from Bead Fixer on Windows (also broken by
new communication scheme) and switched to using Qt process instead of thread
to run it (no more flashing DOS window).

7/3/06: Fixed problem in Windows of 3dmod started from eTomo not really dying
when killed by user, due to new communication scheme.

7/2/06: Bead fixer enhanced by setting up 3 operating modes that each display
just the relevant controls; by adding a color overlay display to seed-making
mode to provide a visual cue to whether a point is on the top or bottom
surface; by making gap finding start from the last point examined even if the
current point changes, and providing the ability to go back to a previous gap.

6/30/06: IMOD_3-8-16 and IMOD_3-8-16_WKSHP
6/30/06: Fixed a bug where exiting eTomo cause errors in the Combine dialog.

6/30/06: eTomo:  improved performance by storing environment variables rather
then retrieving them each time.

6/29/06: eTomo Join:  numbering samples by order cut.

6/29/06: Fixed fatal problem in tomosnapshot caused by change on 6/6 (In 3.7).

6/28/04: IMOD_3-8-15
6/28/06: Fixed bug in setting truncation limits in Findcontrast.

6/28/06: Post-Processing:  Added an option in the trimvol panel which allows 
the scaling to be based on a subarea in X/Y as well as a subset of slices.

6/28/06: Fixed a bug in eTomo where action listeners where not being removed
from the tracking button, making it try to perform its action multiple time
when pressed.

6/27/06: IMOD_3-8-14
6/27/06: Post-Processing:  Added an option in the trimvol panel which allows 
the trimmed tomogram to be rotated in X.

6/27/06: Fixed eTomo bug in running alignlog for single axis tomogram.

6/26/06: IMOD_3-8-13
6/26/06: Added autocontrast function to Midas.

6/24/06: Fixed Copytomocoms and Setupcombine to accommodate a change in Cygwin
sed 4.1.5. (In 3.7)

6/24/06: Added button to 3dmod image processing window to report the frequency
of a position in an FFT.

6/23/06: Fixed etomo startup script for SGI (broke 4/21/06) (in 3.7).

6/23/06: Added options to Clip and Trimvol to rotate volumes by 90 degrees
instead of flipping Y and Z.

6/26/06: Etomo no longer uses imodsendevent to communicate with 3dmod.

6/21/06: Etomo is now displaying help with Qt Assistant, and the full IMOD 
documentation is available and searchable.

6/19/06: Added ability for Tilt to make reprojections at multiple nonzero 
angles.

6/19/06: Fixed polarity of projections from Xyzproj so that it will match
input to Tilt, fixed a half-pixel shift, and converted to PIP.

6/19/06: mrc2tif will now write unsigned integer files.

6/19/06: Fixed a scaling problem in newstack when input was floating point.

6/18/06: Added ability to use standard input instead of clipboard for messaging
to 3dmod.

6/18/06: Fixed programs using new version of amoeba search routine, broken
at least in 64-bit Linux.

6/16/06: Added open/close and advanced/basic mini-buttons to the fiducial model
dialog.

6/15/06: If a script is being run by eTomo, a warning message that it will 
probably not finish will pop up when the user exits 

6/14/06: IMOD_3-8-12
6/14/06: Added a checkbox to the transfer fiducials panel which causes one of
the images to be mirrored around X.

6/13/06: IMOD_3-8-11
6/13/06: Added imodcurvature to measure radius of curvature and encode in
model as color changes or point sizes.

6/9/06: Fixed problems with missing triangles in multicolored meshes seen on 
some NVidia cards on Mac and Linux.

6/9/06: Added option in Edit-Object dialog to display spheres only on the
central section in the Zap and XYZ windows.

6/9/06: In Tomogram Positioning, eTomo now warns the user if they press the
"Done" button when the final Alignment has not been done or is out of date.

6/9/06: In Tomogram Combination, eTomo now turns off the Combine button when
the scripts don't exist or are no up to date. 

6/8/06: Added an attribute to cpu.adoc:  "separate-chunks".  When
"separate-chunks" is present in cpu.adoc and not set to "0", splittilt will be
run with a "-c" option.  The "separate-chunks" attribute is a global 
attribute - it is only valid when it is placed before the sections.

6/8/06: Made Xfsimplex read in data binned so there are no limitations on
input data size as long as data are binned to < 2Kx4K; changed it so that the
reduction parameter specifies binning rather than successive reductions by 2.
Changed Xfalign, Transferfid, Matchrotpairs, Setupcoms and Setuplong to
accommodate this.

6/7/06: eTomo is now turning off auto-centering when fix fiducials is first 
run, and not managing it after that.

6/7/06: eTomo now keeps data from processes in its data file when it exits.
eTomo will not allow a new process to be run when a process started by eTomo is
still running on the same axis.

6/6/06: Fixed control-stripping for Windows in Copytomocoms, Makejoincom,
Tomosnapshot, Trimvol (all in 3.7), Splitcombine and Selfalign.

6/6/06: Fixed Tilt to keep min/max/mean output line from being broken in two, 
and converted Splittilt and Trimvol to unix line endings in Cygwin.

6/6/06: Made Copytomocoms put control-character stripping commands in 
sample.com for Windows (in 3.7).

6/2/06: IMOD_3-8-10
6/2/06: Added option to Transferfid to deal with mirror-image data sets.

6/1/06: Fixed bug in Warpvol's checking of input cube sizes created 2/26/06.
Increased Rotatevol, Matchvol, and Warpvol array allocation to 500 MB.

5/23/06: eTomo now warns the user if they try to overwrite a modified seed file
or fiducial file with the "Track Fiducial Seed Model" or "Use Fiducial Model As
Seed" buttons.

5/20/06: Added menu entry to Midas to mirror image around X axis, modified
amat_to_rotmagstr to handle inverted axes as negative stretch.

5/19/06: IMOD_3-8-9
5/19/06: Fixed bugs in new handling of tomogram positioning information and
restructured code controlling the positioning dialog. 

5/16/06: IMOD_3-8-8
5/16/06: eTomo now instructs Transferfid to output a transfer coordinate file,
detects the presence of it on the combine panels, and modifies the interface
appropriately so that transfer coordinates can be used.

5/16/06: Prevented xyzproj from amplifying data near edges of tilted block.

5/13/06: Added option to Midas to set colors used in overlay display.

5/13/06: Added option to Newstack to set fill value for areas without image
data.

5/13/06: Normalized difference measure output by Xfsimplex, added an option
to Xfalign to output the difference measure, and adjusted scaling of 
difference measure in Transferfid and Matchrotpairs.

5/12/06: Fixed Mtk's reassignment of contours with close approaches to new
objects when contour to mesh measurements are being done, and allowed contours
associated with the meshes to be reassigned also.

5/11/06: eTomo now sends existing positioning information to Tomopitch, parses
Tomopitch's output, and shows original, added, and total values for position
parameters.

5/10/06: IMOD_3-8-7 (eTomo unstable)
5/10/06: Added sync statements to command files for running Tilt in parallel
to stop problems on Macs.

5/10/06: Fixed model view movie maker which was taking first two pictures at 
same X/Y/Z image location.

5/8/06: In fine grain dialog, added ability to set contour connection numbers
to force or prevent mesh connections between contours on adjacent sections.
In Imodmesh, implemented use of these connection numbers and fixed the forcing
option to connect nearest pairs of contours.

5/5/06: Setupcombine converted to take command line arguments and to set up
solvematch.com correctly with a transfer coordinate file.

5/5/06: Set up a system for getting information about corresponding fiducials
directly from Transferfid to Solvematch: Transferfid (via Repackseed) outputs
a file with coordinates of corresponding points, and Solvematch has options to
use this information to match up the final fiducial points even if some points 
have been deleted.

5/4/06: Fixed contour copy in the line tracker for Windows with Intel compiler
8+. (In 3.7)

5/2/06: Added options to Tomopitch so that it can output original and new
total values for shift, angle offset, and X-axis tilt.

5/2/06: IMOD_3-8-6
5/1/06: Big additions to testing functionality in eTomo; a full test can now
be scripted.

5/1/06: Increased allowed number of bins in nda, mtk, and sda to 1000.

5/1/06: Fixed function passing mesh to Mtk so it will shift coordinates
correctly when model loaded on a subset of the image.

4/21/06: In etomo startup script, set LD_ASSUME_KERNEL only for a 2.4 kernel
so it will work in FC5.  (In 3.7)

4/20/06: Fixed display of ghost contours when there are tiny differences in Z
values of points in a contour.

4/10/06: Fixed bug in Beadtrack error check of box size. (In 3.7)

4/8/06: IMOD_3-8-5 (eTomo unstable)
4/8/06: Changed Tiltxcorr so that it will not shift images to keep tilt axis
in center when the NoCosineStretch option is given, and to avoid numeric
errors when the tilt angle is 90 degrees.

4/6/06: In Join, when creating a sample, no longer recreating the .rot files,
unless the rotation angles have changed.

4/1/06: Added continuous output of window or rubberband size to Zap toolbar.

3/30/06: Automatically checking Seed mode and Autocenter in 3dmod Bead Fixer
as needed when opening the .preali file.

3/30/06: Added individual advanced/basic buttons to Coarse Alignment.

3/27/06: Added advanced checkboxes "Convert to bytes", which adds "-mo 0" to
prenewst.com, and "Float intensities to mean", which adds "-float 2" to
prenewst.com, to coarse align page.

3/27/06: Fixed problem in cubic interpolation routine that showed up when
running Tiltxcorr with a rotation angle of exactly 90 degrees.

3/24/06: IMOD_3-8-4
3/24/06: Modified Tilt and Splittilt so that parallel reconstruction will
write directly to a single output file, eliminating need to reassemble.

3/24/06: Fixed progress monitor for mtffilter with files > 2 GB.

3/23/06: Fixed Splittilt so it takes image size from aligned stack instead
of assuming that FULLIMAGE is the size to do, so it will work with an
oversized or subset aligned stack.

3/23/06: In Setup Tomogram, improved the popup message when the dual axis
image stack does not end in a.st.

3/23/06: Fixed bug in Avgstack that averaged all sections when 0,0 was entered,
which was making auto alignment of first section boundary in a join fail when
there was only one sample slice from the first section.

3/22/06: Fixed Tilt so a negative SUBSETSTART could be used to reconstruct
from an aligned stack that is bigger than the original stack.

3/22/06: In Tomogram Generation, backing up the fully aligned stack when "Use
Filtered Stack" is pressed.  Also backing up the tomogram when "Use Current
Trial Tomogram" is pressed.

3/21/06: In the Join Align tab, moved the chunk display so the chunk number
matched the row number.

3/20/06: Etomo: Added a generic interface for parallel processing to a separate
tab.

3/15/06: Parallel processing for a single computer with multiple CPUs is now
available in Windows.

3/15/06: Fixed a problem in Etomo - Combine Tomogram where the wrong .rec file
was opened when opening patch region model.

3/15/06: Fixed a problem in Etomo - Combine Tomogram where the wrong .rec file
was used for error checking.

3/15/06: Fixed a problem in Etomo - Combine Tomogram where the X and Y values
could become out of synchronization with the match direction.

3/15/06: Fixed a problem in Etomo - Setup Tomogram where a failure of
copytomocoms did not cause a useful error message to pop up.

3/7/06: IMOD_3-8-3
3/7/06: Changed Findcontrast to take PIP input and take unflipped or flipped
coordinates, and added options to Trimvol for setting X and Y limits in running
Findcontrast.

3/7/06: Changed Finddistort's model for finding stretch from rotated images.

3/2/06: Added Fitrotsearch for fitting a surface to noisy output from 
Matchrotpairs and finding the best pair reliably.

3/1/06: In Bead Fixer, made "Move All in Local Area" stop displaying images
and listing residuals, and fixed limits on performance with huge numbers of
residuals here and in the undo module.

2/27/06: IMOD_3-8-2 (eTomo unstable)
2/27/06: Finddistort and Matchrotpairs, used to find image distortion fields,
now have man pages.

2/27/06: Added a button to the Fine Grain dialog to go to the next point,
contour, or surface with a change.

2/26/06: Increased maximum box size in Beadtrack to 100 pixels and added error
check. (In 3.7)

2/26/06: Changed Matchvol and Warpvol so they do not open input file and roll
previous file to backup until after errors could occur.

2/26/06: Changed Findcontrast and Densmatch to process data in chunks so they
will work on virtually any size data.

2/26/06: Fixed Blendmont to work when pieces are displaced more than one frame
width from their nominal positions, and switched matrix inversion to double
precision to make it work better for large numbers of pieces.

2/23/06: Changed Extracttilts to exit with error when there are no entries for
the requested item, and made Copytomocoms pass error on. (In 3.7)

2/22/06: Fixed a bug in Combine where Replace Patch Vectors fails when 
patch.out is missing. (In 3.7)

2/20/06: Fixed archiving of original stack to work under Windows. (In 3.7)

2/15/06: Revised scripts to use new header and strip control characters from
output of header and other programs, since new sed in cygwin does not take
care of this unless CYGWIN is set to nobinmode. (In 3.7)

2/15/06: Made Header take options and produce simple output when given an
option so that scripts can get numbers more easily. (In 3.7)

2/14/06: Made Blendmont put out a section with no data if there is only one
piece being output; needed if a sample is empty.

2/12/06: In Beadfixer, added autocentering and a seed mode in which a new
contour is started automatically for each point.

2/10/06: Added options to Makejoincom to skip rotating a volume that has
already been rotated, and to make the rotated volume as big as needed in Z.

2/9/06: Added hyperlinks to the html versions of the man pages.

2/6/06: IMOD_3-8-1
2/6/06: In Etomo, running a process will cause two-state buttons associated
with later processes to show their "not yet run" state.

2/6/06: Added Findgradient to analyze magnification gradients from montages
taken at high tilt, and Makegradtable to make a mag gradient table from either
a Findgradient log file or the transformations between images taken at
different Z heights.  Modified Blendmont to estimate the best mag gradient
for correcting a montage error.

2/6/06: Made default ccderaser radius vary with fiducial size. (In 3.7)

2/3/06: Fixed linklibs-mac for new library. (In 3.7)

2/3/06: Fixed running tomosnapshot from eTomo under Windows. (In 3.7)

1/31/06: Made Ccderaser handle adjacent lines correctly.

1/30/06: IMOD_3-7-3 released
1/27/06: Improved the error checking in the Etomo Join panel.

1/26/06: Keeping two-state buttons on when they are pressed to show that a
process has been run.  Saving the state of two-state buttons in the .edf file.

1/25/06: Made Beadtrack a bit more robust against tilt align failures.

1/25/06: Fixed gaps in zap montage snapshot and set read buffer so it works
on Quadro cards. (In 3.7)

1/23/06: Added Idfprocess for doing simple operations on image distortion 
fields.

1/23/06: Fixed progress output of matchvol/warpvol for > 999 cubes. (In 3.7)

1/21/06: Made new version of image distortion field file that can hold more
than one field, and made Newstack able to apply a different field to each
section.

1/19/06: Increased default radius in eraser.com from 2.1 to 3.6 pixels. 
(In 3.7)

1/14/06: Made 3dmod initialize a model with pixel size and Z scale from image
file.  Added an ability to set an incremental Z-scale when the image header 
contains a difference between pixel sizes in Z and X/Y.

1/12/06: Added option to Tif2mrc to read only first image of multi-page file.
(In 3.7)

1/10/06: Fixed Imodmesh to treat a gap at the end of a contour properly.
(In 3.7)

1/10/06: Redimensioned Newstack to allow full rotation of 8K images. (In 3.7)

1/6/06: Fixed a bug which prevented starting and ending error messages from
processchunks from being completely displayed to the user. (In 3.7)

1/6/06: Fixed processchunks to send standardized error messages upon failure
of the start, finish, or sync files and to send the error from the log file.
(In 3.7)

1/6/06: Fixed a bug which caused the Matchvol1 and Matchorwarp done percentage
monitors to start late. (In 3.7)

1/6/06: Fixed a bug that caused the autodoc reader to send an error to the
error log when $AUTODOC_DIR wasn't set. (In 3.7)

1/5/06: Fixed a bug where processchunks failed on a working directory path with
embedded spaces. (In 3.7)

12/22/05: Added help message to Etomo.

12/20/05: Changed reading of piece coordinates from header to treat X and Y
as unsigned instead of signed integers.

12/16/05 Fixed a bug in Join which allowed the user to get into the align and
join tabs with out of date screen values. (In 3.7)

12/13/05: IMOD_3-8-0 and branch to IMOD_3-7-0
12/13/05: Fixed a bug in Etomo Join which caused the default X and Y sizes in
the Join tab to be incorrect when a tomogram was rotated.

12/13/05: Fixed problem with xfalign trying to filter odd-sized images, which
broke automatic alignment of sample averages after volumes are rotated.

12/12/05: Added a parallel process checkbox to the Setup screen to specify the 
default parallel processing setting.

12/12/05: Fixed a bug which caused the final tomogram to appear on the clean up
dialog when the dataset name had a dash in it.

12/12/05: Added a menu option to the File menu to run tomosnapshot.

12/12/05: Fixed a bug which prevented part of a process from running when the
user pressed a process button while the process was running.

12/11/05: Fixed perspective in model view so that the slider in the control 
dialog really does set the angular field of view regardless of the near
clipping plane setting.  Changed the placement of the default clipping planes
so that they are not as far out by default but can be increased by selecting
a new option, because very far out clipping planes gave bad displays on some
systems.

12/9/05: Various changes to make programs palatable to gfortran, which seems
to be usable on the Mac but not yet on FC4.

12/7/05: Change the exit warning, so it would only pop up when exiting would
prevent the current process from completing.

12/7/05: Changed Ccderaser to allow model output up to the maximum size for
models in Fortran programs, and added an option for merging patches in an input
model, to facilite editing and use of an output model as an input model.

12/6/05: In Join, when a section is rotated, the final start and end in Z
entered on the Setup page now reflect the rotation on the Join page, and the
new volume will be made the right size in X and Y to hold the rotated images.

12/5/05: On the Etomo Setup screen, rounded the pixel size to 6 significant
digits.

12/4/05: Changed 3dmod startup scripts used in Windows to solve a permission
problem running a W2K build under XP and to preserve spaces in up to 9
arguments.

11/30/05: Added an option to Makejoincom so that rotated volumes could
automatically be made the right size in X and Y to hold the rotated image.

11/29/05: When getting load averages for the parallel processing table, only
use ssh when the computer is remote.

11/28/05: IMOD_3-6-17 (etomo unstable)
11/26/05: Fixed saving of memory to TIFF in 3dmod.

11/21/05: Fixed a bug in Tomogram Generation and Tomogram Combination which
left the parallel processing checkbox on when cpu.adoc could not be found.
 
11/21/05: Can exit Etomo and/or log off while running tilt or volcombine with
processchunks.

11/14/05: Added ability to put wildcards (* and ?) on image filenames in 3dmod
startup window.

11/11/05: Changed Splittilt to make more chunks when the X axis tilt requires
only a minimal number of extra slices in each chunk.

11/11/05: Implemented support for an unsigned 16-bit integer mode (6) for
MRC files, including in raw2mrc and tif2mrc.

11/11/05: Changed test for byte-swapped files so that image files can now be 
bigger than 60000 in 2 dimensions.

11/10/05: Etomo can automatically translate from local directory paths to
remote directory paths in a shared file system when running processchunks.
The translation information (mount rules) should be placed in the cpu.adoc
file.  Etomo will pass the remote directory path to processchunks using the -w
option.

11/8/05: Added options to Blendmont to control cross-correlation parameters,
including a VerySloppyMontage option that sets most of them appropriately, so
the program will work better with montages done by moving the stage.

11/7/05: Fixed bug that crashed Midas when trying to fix edges in a large
montage with missing pieces.

11/3/05: Fixed display of the parallel processing panel when it is first
opened in contracted state with no rows checked.

11/3/05: Stopped opening Tomogram Combination automatically after Done is
pressed in Tomogram Generation to prevent bad display of parallel processing
panel.

11/2/05: Fixed MTF filter monitor: it now works with montages and takes
starting and ending views into account.

11/2/05: Added midas limit to the Join Setup tab.

11/2/05: Added error messages for Setup Combine.

10/31/05: Implemented some workarounds to problems with loading many files
through the 3dmod startup dialog when the paths total > 32767 characters: 
removed current directory from names, warned user not to edit a truncated list.

10/31/05: Fixed the Save menu option in Join so that it works whether or not
Make Samples has been run.  Fixed the Save menu option in tomogram
reconstruction so that it saves the state of the current dialog.  Prevented the
use of Save As during Setup Tomogram.  An error message is given when Save
fails.

10/28/05: IMOD_3-6-16
10/31/05: Fixed Imodtrans, which was transforming the model twice (forced 
into 3.6.16).

10/28/05: Fixed a problem in Tomogram Combination when processchunks is being
run for volcombine.  Splitcombine was being told to use the user's temporary
directory, instead of a local temp directory.  Splitcombine and processchunks
are no longer affected by the temporary directory.

10/28/05: Fixed a problem in the B axis when the B stack was added after Setup
Tomogram was completed.  Processchunks might fail on the last chunk in this
situation.  Etomo is automatically fixing IMAGESIZE in tiltb.com when either
Create Fixed Stack or Calculate Cross-Correlation is pressed in the B axis.  At
this time Etomo will also extract tilt angles, the piece list (montage only),
and magnification gradients as necessary.

10/24/05: Added option to Xfmodel to transform a model by applying one
transform per chunk of Z values for a set of chunks.

10/21/05: Fixed tilt progress monitor so that it works with binning, slices in
Y, and thickness in X.

10/19/05: Increased limits on number of patches to 40000 in Corrsearch3d,
Refinematch, and Findwarp.

10/19/05: Added options to Imodtrans for transforming a whole volume with one
2D transform, manipulating the flipped state of a model, and transforming it to
match an image file.  Made transformation of mesh normals and clip planes work
for all cases except section-by-section 2D transformations.

10/18/05: Fixed a problem which caused whole tomogram in Tomogram Positioning
to run more then once when the Create Sample Tomograms button was pressed
while a process was running.

10/18/05: Disabled the archive button in the Clean Up dialog when it is not
needed.

10/16/05: Added model transformations to imodjoin to bring all models to
a common coordinate system before joining.

10/14/05: Added Reload Model menu entry to 3dmod.

10/14/05: Preserved both openings when two open-type contours in a
closed-contour object are joined together.

10/14/05: Fixed Rotatevol's setting of header origin to account for pixel size.

10/14/05: Changed Setup Join so it will create an .ejf file and save if the 
user exits before running Make Samples.

10/13/05: Fixed 3dmod's scaling of clip plane information when model is
read in on subset, flipped, squeezed or binned data.  Fixed Z-scale problems
in model display when data are read in with anisotropic binning.

10/13/05: Added fine-grained display info to the model checksum so model 
changes are detected.

10/11/05: Made Matchvol preserve origin values so if Squeezevol is used on a
volume with non-zero origin, a model will display in the correct place.

10/11/05: Made Finishjoin base the average alignment on tomograms with
similar rotation angles, so tomograms with 90 or 180 degree rotations do not
need special handling (i.e., initial rotation, or making one section be the 
reference).  It also uses the new Newstack option to avoid long lines of
transform numbers.

10/11/05: Added option to Newstack to have it apply the same transform for
all sections in a file and just have one transform per file.

10/11/05: Added option to Xftoxg to exclude sections with very different
rotation angles from the computation of the average rotation.

10/8/05: Made Makejoincom adjust sample slice numbers properly when volume
is turned upside down by a rotation.

10/8/05: Fixed Splittilt and Tilt so parallel reconstruction from binned image
would work.

10/7/05: Fixed Transferfid, which was failing on old-style tracka.com that
had never been run through etomo.

10/6/05: Fixed problems with undo/redo when moving all contours in a surface
to another object.

10/6/05: Added option to Processchunks to give path to directory that is
needed on remote machines; after a chunk processing failure it will now try
it on other machines and quit if the same chunk fails many times.

10/5/05: Fixed Copytomocoms to get actual size of B axis instead of assuming
it is a transpose of size of X axis.

10/4/05: Made tomosnapshot collect all *.com, *.log, *.com~, *.log~.

9/29/05: IMOD_3-6-15
9/29/05: Added parallel processing interface to eTomo for volcombine, moved
the monitor table to the progress bar.

9/22/05: Fixed joining of contours by concatenation when their ends are
at different Z levels.

9/22/05: Fixed model view display of multicolored mesh for Linux.  Made
Imodmesh produce caps of the right colors when there are surface colors and
take contour/surface properties into account when joining contours laterally.

9/19/05: Fixed bug in Sumdensity when there are empty contours.

9/15/05: Added ability to generate a high-resolution internally montaged 
snaphot of the Zap window, available in the Movie control dialog.

9/12/05: IMOD_3-6-14
9/12/05: Added parallel processing interface to eTomo for tomogram generation.
The interface is enabled by a file named cpu.adoc in IMOD_CALIB_DIR; a sample
file is included in the IMOD autodoc directory.

9/12/05: Modified Imodmesh to incorporate fine-grained display properties into
the mesh, including color and transparency changes and gaps.  It now puts out
a more efficient mesh that is not backward-compatible; an option is provided
for generating a backward-compatible mesh.  3dmod can now display all of this
information and handles transparency by drawing all solid elements of all
objects first, then all transparent elements.  Added ability to use the
rubberband to specify starting and ending points for a property change.

9/9/05: Fixed bug in writing meshes from a model loaded onto binned data.

8/31/05: IMOD_3-6-13
8/31/05: Various eTomo bugs fixed.

8/24/05: IMOD_3-6-12
8/24/05: Fixed processchunk's ability to kill jobs by adding a new script
to kill the process group, using system-dependent ps commands, and got it
working to run processes on an SGI also.

8/22/05: Fixed Blendmont's computation of excluded border regions so that
cross-correlations are not thrown off by edges in distortion corrected images.

8/19/05: Made image loading routine allow 3dmod to respond to messages
periodically while reading a large section.

8/15/05: Increased array limits in Mtffilter to allow 8K x 8K image.

8/14/05: Increased array limits in Beadtrack to allow 48x48 boxes for 500 
beads.

8/14/05: Increased array limits in Tilt to allow up to 40x40 local areas for
120 tilts.

8/14/05: Fixed model scaling in 3dmod when opening an externally created model
(e.g. .resmod) on binned data.

8/14/05: Fixed opening 3dmod with startup dialog when an image file argument
has spaces in the path.

8/11/05: Added a context menu when right-clicking on the 3dmod buttons in
eTomo with options Open in startup window and Bin by 2.  Added the same
options with checkboxes to the Options pulldown menu.

8/9/05: Fixed View Match Check Volume button in Combine Tomograms, which was
failing.

7/26/05: IMOD_3-6-11
7/26/05: Increased extra header array limits in Newstack and Edmont.

7/26/05: Made squeezevol and archiveorig killable from Etomo.  

7/26/05: Removed the error message in Etomo that comes up after a process is
killed.  Changed message on the progress bar to reflect the ending state of the
process (done, killed, or failed).

7/26/05: Fixed a bug which caused Etomo to hang when out of range Z values 
were used in Tomogram Combination setup.

7/24/05: Increased array sizes in Blendmont to allow overlaps up to 600 pixels.

7/24/05: Fixed Splitcombine to insert standard commands for finding an
appropriate temp directory on the machine running the command file, so it
will run on a Mac with no /usr/tmp.

7/20/05: Fixed a problem in Tomogram Combination setup where a X, Y, or Z
value that is too big for the current tomogram caused Etomo to hang.

7/19/05: Fixed a montage bug which caused Calculate Cross-Correlation to build
a .dcst file instead of a .bl file after running Make Distortion Corrected
Stack.

7/18/05: Fixed a bug which caused Etomo to hang when a filename without an
extension was passed to it.

7/15/05: IMOD_3-6-10
7/15/05: In Processchunks, added ability to let running jobs finish before
stopping.  Started counting failures so that it will quit if nothing ever
starts working after trying all machines, and so that it can drop out a machine
if it fails too many times in a row.  Switched to having ssh run a bash login
shell, which obviates the fix on 6/30/05 and solves problems on the Mac.

7/15/05: eTomo changes at various times: Implemented montage binning and
building of whole tomograms with montages; fixed ability to generate whole
tomograms with single-axis sets; fixed warnings when changing coarse aligned
stack binning; and stopped running header over again on files that have not
changed.

7/6/05: Eliminated unneeded repack_mod routine which was breaking Beadtrack
and a few other programs on the SGI.  (In 3.5)

7/1/05: Tiltalign's report of the ratio of measurements to unknowns was 
actually the ratio to the number of variables in the search, which omits the
lateral shifts.  Both the true ratio and the old one are now reported.

6/30/05: Fixed tomosnapshot for SGI and for spaces in the path.

6/30/05: Fixed processchunks for spaces in the directory path, enhanced the
messages, and figured out how to get it working for bash users in Red Hat or
Fedora Core < 4; the latter fix is in the man page.

6/29/05: Implemented ability to set fine-grained display properties for points
within contours and contours or surfaces within objects.  3dmod manages the
information consistently but imodmesh still needs to be reworked to
incorporate property changes into the mesh.  Other programs will ignore or
mangle the information (e.g., reducecont, clipmodel).

6/24/05: Increased limit on number of buttons for object list window to 5000.

6/16/05: Expanded Ctrl-A selection in Zap window to include open contours
that travel in Z and pass through the selection area.

6/15/05: In Zap window, made hot keys change locked time, fixed buffer 
flushing problem with locked time, and allowed Ctrl A to select contours that
are outside the range of the image.

6/15/05: Fixed bug in behavior of F1-F8 keys when contrast floating is on. 
(In 3.5)

6/14/05: Fixed a bug in Fine Alignment where the global Rotation Solution Type
was set from MagOption in align.com, instead of RotOption.  (In 3.5)

6/14/05: Added checkbox to control the FixXYZCoordinates option in
Fine Alignment.  Fixed a bug which caused this option to be set to false with 
older command files.  (In 3.5)

6/13/05: IMOD_3-6-9
6/13/05: The option to fix 3D fiducial coordinates with local alignments has
been getting lost since IMOD 3.4.17.  The command file now specifies it with
a number, and Copytomocoms now fixes the coordinates only for dual axis sets.

6/10/05: Etomo switched from scaling Tilt and Tiltalign parameters for
binning to specifying binning and using unbinned parameters, which eliminates
several bugs and vulnerabilities.  Also made a separate binning for whole
tomogram positioning and tomogram generation.

6/9/05: Added an option to Tiltalign to specify binning factor to use in 
scaling entered axis shifts.

6/7/05: Added an option to Tilt to specify binning factor to use in scaling
thickness, offsets, etc.

6/6/05: Added ability to edit 2D line width for many objects in model view
object edit window, and ability to display just spheres with the fill color.

6/3/05: Made imodsortsurf copy many object properties when making new objects.

6/3/05: Added binning to blendmont.

5/31/05: IMOD_3-6-8
5/31/05: Fixed bad bug in Newstack created 5/27/05.

5/30/05: Fixed scaling in Reducecont for images with pixel size.

5/30/05: Made Smoothsurf load only one object at a time.

5/28/05: IMOD_3-6-7
5/27/05: Enabled moving a contour to a new surface that does not exist yet.

5/27/05: Changed Newstack so that transform line numbers can be entered on
multiple lines and Finishjoin to use multiple lines, to avoid line length
limitations with very big data sets.

5/26/05: IMOD_3-6-6
5/26/05: Added ability to sort surfaces into different objects in Imodsortsurf.

5/26/05: Switched Sumdensity to loading one object at a time and added output
of count of pixels output to model.

5/26/05: Fixed bug that kept eTomo from recognizing that _fixed.st existed.

5/25/05: Changed computations of mean/SD to use double precision in Newstack
(where it was screwing up the floating of data around -32000), and in 
Alterheader and Subimage.

5/25/05: Fixed linetrack's test for whether copy contour is on adjacent slice.

5/24/05: Converted Reducecont to PIP input, made it skip scattered point 
objects and load only one object at a time.

5/24/05: Implemented functions for returning only selected objects instead of
whole model to Fortran programs, to allow some programs to be modified to run 
with much larger models.

5/23/05: Made clip stat use doubles for computing mean and SD.

5/21/05: Implemented multiple passes (-P) in imodmesh for open contour objects.

5/20/05: IMOD_3-6-5
5/20/05: Fixed a bug where Etomo deletes the .edf file on exit after it tries
to bring up tiltalign log(s) which are too large.  Allowed Etomo to bring up
tiltalign log files more rapidly and avoiding using as much memory by leaving
out the rarely used sections when a log file gets very large.

5/19/05: Added a button to run Archiveorig to Etomo Clean Up.

5/19/05: Increased model size that C routines will feed to a Fortran program,
so now allowed model size really is doubled. (In 3.5)

5/19/05: Fixed problem with 3dmod crashing on a tiff file that it can't open.

5/18/05: Fixed alignlog output of surface analysis when program is run with
PIP input.

5/13/05: IMOD_3-6-4
5/13/05: Transitioned track.com to PIP input.  Added new fields to Etomo: Local
Tracking, Local area size, Minimum beads in area, Minimum beads overlapping, 
and Max. # views to include in align.

5/13/05: Switched master align.com to have tilt angles grouped by default, to
avoid bad behavior without grouping near zero tilt.

5/13/05: Added options to Sumdensity to trim points out of the pixel model
by requiring them to have a minimum number of adjacent points.

5/12/05: Increased limits to allow beads up to 100 pixels in Beadtrack.
                                                          
5/12/05: Etomo changed to put the two axes in separate windows, with buttons
to control single or dual window display.  Autofit is now on permanently to
avoid problems in the absence of autofit.  Interface to new version of
Beadtrack was implemented, including tracking over local areas.

5/12/05: Modified Processchunks to allow command files that can be used to
synchronize results after running a group of files in parallel.  Fixed it to
work on Windows (multiple processors should work; multiple machines still
untested.)  Made Chunksetup insert a newline if the master command file is
missing one at the end.

5/12/05: Fixed problem with local alignments being off inappropriately in
tomogram generation panel (In 3.5).

5/11/05: Changed stripping so all Fortran programs built on OSX 10.3 will run
on 10.4. (In 3.5)

5/7/05: Fixed linklibs-mac to include libifft.  (In 3.5)

5/7/05: Fixed dm2mrc to work on Mac (it now uses hexdump instead of od where
available).  (In 3.5)

4/26/06: Made Tiltxcorr work with 5Kx5K image and work as long as the trimmed
area is smaller than this.

4/26/05: Fixed problem that killed Beadtrack with less than 8 points.

4/22/05: Added Archiveorig, a script to archive the original stack as a small
compressed file of differences after removing X-rays.

4/21/05: Changed defaults in align.com so that local distortion solution is
off; it will get turned on by eTomo when enables user global distortion.

4/19/05: Removed WARNING string from minimization errors in Tiltalign since
there is nothing to worry about if search succeeds with a metro factor change.

4/13/05: IMOD_3-6-3
4/13/05: Fixed ability to get binned prealigned stack in eTomo (not broken in 
3.5)

4/13/05: Modified Avgstack to read data in chunks so it can handle large
images.

4/12/05: Modified Binvol to bin by separate amounts in X, Y, and Z and made it
read data in chunks to handle larger volumes.

4/12/05: Made Tiltalign set object colors in 3D model to standard colors when
there are fiducials on two surfaces.

4/12/05: Restructured the way the Zap window records subarea location for 
contrast floating and enabled floating for movements within a section, so that
now the subset float option works when fixing fiducials, when panning the
Zap window, or when moving the rubberband around in the Zap window.

4/12/05: Added button to Bead fixer to move all points in local area by 
residual.

4/11/05: Made Beadtrack ignore separate objects when run from Transferfid.

4/7/05: IMOD_3-6-2
4/7/05: Etomo modified to produce a distortion-corrected stack for fixing
montage overlaps.

4/6/05: New version of Beadtrack takes PIP input, can track in local areas
and/or in a local subset of views, uses improved variable mapping, and has
several other changes that improve tracking somewhat.  If a model file has more
than one object, the program will automatically track them separately with
existing non-PIP command files.

4/6/05: Added option to Blendmont to create distortion-corrected copy of
input stack without blending edges, to be used when fixing edges in Midas.

4/6/05: Fixed problem with model view montage snapshot that showed up on one 
of our Linux machines.

4/4/05: Fixed Imodmesh and other problems caused by duplicate function cleanup
on 3/21/04.

4/4/05: Fixed Imodmesh problem with contours on last section being forced
down to previous section.

4/1/05: IMOD_3-5-3 released
3/28/05: In Zap window, made cursor change when mouse is moved over edges of 
rubberband; moved time buttons to a second toolbar.

3/25/05: Fixed bugs in Tiltalign: multiple nondefault grouping lists could get
off if there were excluded views; rotation variable mapping was not being
done right with linear mapping and one fixed angle, or with block mapping;
separate view groups were not remapped properly when views were excluded.
(In 3.5)

3/23/05: Fixed problem with float losing contrast setting after going to
section with slider settings that were truncated to stay in range. (In 3.5)

3/23/05: Added a and b hot keys to image processing window and made the
grow and shrink functions be options in the threshold panel. (In 3.5)

3/23/05: Fixed moving of multiple contours. (In 3.5)

3/13/05: Increased array limits in Tiltalign and Beadtrack to allow 500
fiducials.

3/11/05: IMOD_3-6-1
3/11/05: Added nad_eed_3d, Frangakis and Hegerl's edge-enhancing anisotropic 
diffusion program. (In 3.5)

3/10/05: Montaging interface added to eTomo.

3/10/05: Fixed an eTomo bug in which a process finishing on one axis could
start the next process on the other axis. (In 3.5)

3/8/05: Added an FFT mode to slicer window.

3/7/05: In 3dmod, centered FFT of subarea in the subarea so it could be
visualized better; fixed problem with subarea not being updated upon resize.
(In 3.5)

3/6/05: Fixed synchronization of rubberband state and toolbar. (In 3.5)

3/1/05: Fixed synchronization of parameters between eTomo panels when Done is
pressed (e.g., Z offset between fine alignment and positioning). (In 3.5)

3/1/05: Added distortion and mag gradient corrections to blend com files
produced by Copytomocoms.

3/1/05: Changed Copytomocom's test for whether to set the log base to 32768
so that it is based on a negative mean instead of a negative maximum. (In 3.5)

2/28/05: A procedure in Warpvol for determining the size of input that
needs to be loaded for each output cube had to be run iteratively to avoid
crashes in extreme cases. (In 3.5)

2/28/05: Added image distortion correction and magnification gradient 
correction to Blendmont; added linear and cubic interpolation with cubic as
the new default.

2/25/05: IMOD_3-6-0 and branch to IMOD_3-5-0
2/24/05: IMOD_3-4-23
2/24/05: Added sourcedoc program to produce documentation from source files.

2/24/05: Added ability to select multiple contours from more than one object
with Ctrl and first mouse button; contours from multiple objects can be
deleted, shifted/transformed, and moved up and down in Z.

2/24/05: Fixed problems with using Qt Assistant for help by providing fallback
for IMOD_DIR in Windows, and by putting Assistant in IMOD/bin when Qt is not
being packed in distribution. 

2/18/05: IMOD_3-4-22
2/18/05: Added ability to set center of contour rotation and stretching and
display of center as in midas, and allowed contour adjustment when no current
point is defined (as is the case after Ctrl-A).

2/18/05: Fixed problem with eTomo not keeping track of fiducialless, local
alignment, whole tomogram positioning and Z factor states separately for two
axes.

2/15/05: Made Tiltalign put the prealigned stack size in the fid.xyz file, so 
that Solvematch will now work properly if tomograms are made from centered
subsets instead of from the whole aligned image.

2/11/05: IMOD_3-4-21
2/11/05: Fixed problem of no transferfid log when there is an error.

2/11/05: Fixed problems wih turning on contrast float after starting to do
image processing on a section.

2/11/05: Fixed problems with Makejoincom's handling of Windows filenames; 
stopped eTomo join interface from running Rotatevol on everything.

2/11/05: Disabled image process and reload menu items when no image or RGB
images loaded, thus preventing crashes.

2/11/05: Fixed bug in tab function in eTomo; eliminated Window menu as 
redundant to prevent problems on Mac.

2/10/05: IMOD_3-4-20
2/10/05: Fixed bug in anisotropic diffusion for 64-bit machines and added
appropriate includes to prevent other problems from implicit declarations.

2/9/05: Fixed bug in anisotropic diffusion in 3dmod with non-square images.

2/9/05: Fixed bug in Newstack in scaling blank images when changing mode.

2/8/05: IMOD_3-4-19
2/8/05: Added ability to rotate, stretch and scale contours as well as shift
them in the Zap window, using same mouse buttons as in Midas.  This mode now
stays on until turned off.  It works with multiply selected contours.

2/8/05: Added tabs for multiple data sets loaded into eTomo.

2/4/05: Fixed tomosnapshot problems for Windows, added file headers.

2/3/05: Fixed problem in Tomopitch with model on very thick whole tomogram.

2/3/05: Fixed Imod2vrml output when the model mesh has empty polygons.
 
1/29/05: Made Sumdensity work properly with nested contours.

1/28/05: Made Imodsortsurf remove existing surface information to avoid empty
surfaces. 

1/28/05: Fixed bug in Copytomocom's handling of exclude list in new align.com.

1/27/05: Added 2D anisotropic diffusion to 3dmod image processing and to clip.

1/27/05: When tilt angles are specified as start and increment values, eTomo
now provides defaults for the central view number parameters needed when
transferring fiducials from other axis; it also stores all transferfid
parameters in the edf file.  Progress monitors have been added for 2D
filtering, mathvol and matchorwarp steps.

1/26/05: Made imod2vrml produce sphere output for all points that have non-zero
size.

1/24/05: Fixed bug that crashed imodmesh when the capping exclusion list
included first and last slices in the model.

1/18/05: IMOD_3-4-18
1/18/05: Etomo log files can be placed in a chosen directory by defining the
environment variable ETOMO_LOG_DIR with the path to the directory.  The log
files will be given a date/time stamp; the directory will be purged to 60 
files.

1/17/05: Doubled size of model that can be used in Fortran programs.

1/17/05: Reworked Clip so that all but a few processes operate slice-by-slice
instead of reading whole volume; made sure that input and output size and
mode options and appending worked with this new mode of processing.  Abandoned
rotate, translate, and zoom processes.

1/13/05: Made reducemont work with negative piece overlaps (spaces between
pieces) up to 10% of frame size, made it check for image size, and increased 
buffer for blendmont and reducemont to hold two 4Kx4K images.

1/14/05: Etomo tomogram generation has a new field to specify additional views
to exclude.

1/12/05: Fixed clip 2D correlation, broken by changes on 11/4/04.

1/11/05: IMOD_3-4-17
1/11/05: eTomo can now generate tomograms using the Z-dependent factors from a
Tiltalign stretch solution.  The check boxes to use Z factors and to do local
alignments are now disabled when the last alignment did not produce the
appropriate file.

1/11/05: In Sumdensity, added a model output of pixels above threshold and
fixed a bug in the computation of the sums.

1/10/05: Added -d option to self-install script to allow installation in
other than the default location (except on Windows).

1/9/05: Fixed fatal problem with Sumdensity's .adoc file.

1/7/05: Added median filtering option to Clip and to 3dmod image processing
dialog, 2D or 3D, with adjustable size.  Warning: append, overwrite, and
output size options will not work with this or the operations listed on 1/6/05.

1/6/05: Fixed Nda, Mtlengths, Resamplemod, and Mtpairing to ignore pixel
size in image file header and work with pixel size in model header.  Also
fixed Resamplemod to line up all vectors in the same direction along the main
axis before summing, even when not inverting MTs.

1/6/05: Made date/time in MRC header titles be produced in system-independent
fashion for C-programs, so they will be added in Windows.

1/6/05: Fixed brighten, contrast, and shadow options in Clip, and added
options for simple filtering operations available in 3dmod: smooth, sharpen, 
laplacian, graham, gradient, prewitt, sobel.

1/3/05: Converted Tiltalign command files to PIP input; eTomo has been
modified to handle new or old files and output new files and it now allows
grouping of global rotations and easy selection of skew-only distortion
solution, and produces a Z factor file when distortion solution is obtained.

12/23/04: Fixed handling of italics, bold, and special characters in program
that makes html files from man pages.

12/23/04: Fixed bug that made 3dmod lose track of the Z offset from a previous
loading of a model on a subset stack.

12/22/04: Added imodqtassist, a program to allow eTomo to use Qt assistant to
show help pages.

12/17/04: IMOD_3-4-16
12/16/04:  The flipped state will now be monitored properly for the squeezevol
interface. 

12/14/04: IMOD_3-4-15
12/13/04: eTomo now saves the .edf as well as the .ejf file automatically at
various points when processes are run and upon exit.  This will enable it to
keep track of processing state better between sessions.

12/13/04: Fixed bug in running 3dmod from eTomo in some cases, created by
fixes for spaces in the path on 12/3/04.

12/6/04: Fixed imodinfo -a -f output_file for getting ascii file.

12/4/04: IMOD_3-4-14
12/5/04: Fixed problem with converting backslashes in Makejoincom.

12/3/04: Added interface on the eTomo post-processing page to run Squeezevol
on the trimmed volume.  (Will not work right yet if the trimmed volume is not
flipped).

12/3/04: Fixed some eTomo problems in combine and joining when there are
spaces in the path to the working directory.

12/3/04: Fixed bug that crashed 3dmod when pressing Delete with no current
contour, and also changed Delete behavior to delete last point in a contour
without deleting contour, and to delete an empty contour.

12/2/04: Added ability for 3dmod to read raw image files; properties can be
defined with command-line options and/or in a dialog box that comes up when
a file cannot be read otherwise.

12/1/04: Dragging with Ctrl and first mouse button will now add any contours
in the current object that the cursor crosses to the multiple selection.

11/30/04: eTomo now presents an option for reducing vertically and
horizontally oriented amplitudes in Combinefft, to avoid crosshatched noise
in combined tomograms.

11/29/04: Fixed bug that prevented binning large images in newstack.

11/29/04: Added ability for 3dmod to read in images and take snapshots in any
of the file formats supported by Qt's QImage class (e.g., PNG, JPEG, PNM).
The snapshot format can be selected in place of an RGB snapshot in the
preferences dialog, and JPEG quality can also be set.

11/28/04: IMOD_3-4-13
11/28/04: Revised serial tomogram joining guide for eTomo interface.

11/23/04: Added options for controlling whether contours are joined by adding
all of their points together end to end, versus connecting them or splicing
them together at nearest or selected points.  The default settings will now be
best for joining fragmentary contours.  Multiple contours can be selected and
joined at once.

11/22/04: Implemented a new help system for 3dmod using Qt Assistant, and set
up a framework for transitioning help pages into the system.

11/22/04: eTomo now includes an interface for joining serial section
tomograms, with the ability to select the component tomograms, specify
slices for samples, align samples automatically or with Midas, build a trial
joined volume with a small subset of images, and easily set the size and
offset of the joined volume.

11/21/04: Added undo and redo capability to 3dmod.  Virtually all modeling
changes can now be undone.

11/11/04: Fixed model view not being able to turn off Low Res mode if a file
was saved in that mode.

11/11/04: Made line widths for current image point marker and slicer lines in 
Zap window be 1, made markers on current object have its width.

11/11/04: Added ability to take FFT of subset area from image processing 
dialog.

11/9/04: Fixed a problem in the way warpvol determined range of data to load
for each cube, which was giving gray areas in interior of volume.

11/9/04: IMOD_3-4-12
11/8/04: Fixed problem with insufficient array size in contour copying
function of Line Track.

11/6/04: Implemented Fourier filtering and taking an FFT in the 3dmod image
processing dialog.  Fixed problems with intensity scaling and floating in
when processing, and changed some of the existing functions to avoid
saturation or loss of dynamic range.

11/5/04: Changed <> to "" in includes of IMOD header files to avoid problems
on Suns.

11/4/04: Image processing in 3dmod is now done in a separate thread to keep
the user interface active.

11/4/04: Implemented routines to make 3dmod buttons larger when they are
rounded, as in Aqua style in the Mac.

11/4/04: Improved filter function in clip to work for non-square images, to
work properly for high-pass filtering, and to not have abrupt onset of
filtering.  Made sure it works with either mirrored or non-mirrored FFTs.

11/4/04: 3dmod will now automatically mirror FFTs around the origin when the
input file has an odd dimension in X.  Clip will now no longer produce
mirrored 2D FFTs and will take in either mirrored or non-mirrored FFTs.  FFTs
produced by Clip and Fftrans are now identical.

11/2/04: Allowed various drawing colors (e.g., for current point marker) to be
changed as storable settings.  Made the Defaults button in Edit-Options restore
defaults only for the current tab.  Added ability to shift a whole contour with
first mouse button after activating with hot key P or button in Contour Move
dialog.

11/1/04: Changes to 3dmod:
   Changed attach function for zap, slicer and Xyz windows to enable attaching
to a 3D point as long as it is visible, even if it is not on the current
section.
   In Contour Move dialog, added ability to convert a spherical point to a set
of circular contours in another object.
   Added menu entry to delete a whole surface.
   Changed meaning of model resolution to be zoom-dependent, so that
continuously added points would be added at an interval appropriate for the
zoom.
   Added help screen for Model Header dialog.
   Fixed Xyz window to retain floating point model point positions.
   Changed rubberband so that it has invariant position in image as image is
panned and zoomed, and is constrained to the image not the window.
   Implemented multiple contour selection with Ctrl and first mouse button or
with Ctrl-A to select all contours on a section or inside rubberband.
   Made contour join work with two selected contours or with one set contour
and the current contour; provided hot key J to join.
   Contour deletion will delete multiple selected contours after confirmation.
   Contour Move dialog will also move multiple selected contours to another
object or surface.
   In the Subset panel of the Model View - Edit Object window, showing the
current surface only will now work with meshes displayed and not just with the
contours displayed.

10/29/04: Fixed centering of extracted items in Boxstartend.

10/29/04: Allowed Rotatevol to run with only one option; provided defaults for
output size and angles.

10/28/04: Added Binvol for binning a volume down in 3 dimensions.

10/28/04: Added options to Finishjoin to get a report on the size needed to
hold the aligned images, and to get a trial stack with a subset of sections.

10/27/04: Fixed csh startup files on Linux, Mac, and SGI and scripts for
running Qt programs to work if the path or the dynamic library path contains
entries with spaces.

10/25/04: Added option to Midas to define a transform output file different
from the input file.

10/24/04: Changed Tiltalign to use matrix products instead of explicit
equations for computing the projection matrix and its derivatives, converted
to PIP input, added an option to solve for a single stretch during projection,
added ability to group rotation angles during global solution, and added
outputs of factors for adjusting back-projection position as a function of Z
height, both into a separate file for global factors and into the local
alignment file.

10/24/04: Switched to a C version of the FFT library (a translation of the
Fortran version), added a 3D FFT option to Fftrans, and speeded up clip fft 3d.
Switched setupcombine to use Fftrans since it seems faster than clip.

10/22/04: Under Linux, made 3dmod clear file system cache for each section
that it reads (only effective with 2.6 kernel/FC 2).  This is to prevent image
memory from being swapped out in favor of file data; it may need to be
controlled with a preference or environment variable.

10/21/04: Changed Combinefft so that the default method of reducing the power
in the missing wedge regions is to use spherical shells and comparisons
between the different regions.

10/21/04: Added ability for Tilt to adjust the backprojection position for
Z-height in the reconstructed slice, which is needed when there is specimen
stretch along an oblique axis.

10/15/04: Fixed bug in xfalign that prevented using a filter.

10/13/04: IMOD_3-4-11
10/12/04: Fixed a bug in writing meshes in a model to an NFF file.

10/12/04: Fixed a bug in Tilt in the Y-positioning of a tomogram when it falls
back to old style X-axis tilting, and fixed/optimized fallback strategies for
X-axis tilting and cosine stretch when running out of memory.

10/10/04: Fixed a bug causing local alignments to be scaled erroneously 
in Tilt (typically by 2-10%).

10/8/04: Fixed Tiltalign's failure to give both model and residual output with 
a filename containing a period.

10/7/04: IMOD_3-4-10
10/7/04: Fixed mtk to work with model built on image with pixel size in header.

10/7/04: Added a script, tomosnapshot, to collect information for diagnosing
tomogram building problems.

9/29/04: Made Splitcombine check for writability of user's temporary directory
to avoid runaway failures.

9/28/04: Overhauled Imodinfo to add a volume computation that takes account of
the spacing between contours connected by a mesh; to handle multiple clipping
planes; and to give consistent volume and surface area results in the main
output, full object, surface, and centroid outputs when there are inside
contours, clipping plane, or a subset selected.

9/27/04: Kept Imodmesh from combining polygons at different Z levels when there
are low and high resolution meshes present, which would screw up other programs
that rely on one polygon per Z plane.

9/24/04: Added reprojection option to Tilt.

9/24/04: Added interface for plugins to receive messages and added messages
to open or reread align log file in Bead Fixer.

9/24/04: IMOD_3-4-9
9/23/04: Fixed reference mode in Midas, broken by block mode changes.

9/21/04: Added ability to use multiple clipping planes per object, and to set
up global clipping planes also (up to 6 in each case).  Added surface labels
that can be input in the Surface/Contour/Point window.  Added ability to
adjust the colors of multiple objects at once.  Changed the model view object
list window to embed checkboxes in a scrolling view, not truncate names nearly
as much, allow 512 objects, and display colors of objects.  Fixed
synchronization of names, on/off state, and colors between 3dmod and model
view components.  Added a menu entry to rearrange (renumber) objects.

9/17/04: Made Finishjoin detect if there is a large rotation between sections
and warn that a reference section entry will probably be needed.

9/17/04: Rewrote Imodtrans to do a general 3D transformation from a file, to
transform meshes correctly, to take the transformation arguments in any order
and repeated if desired, and to handle situations with flipped data, Z-scaled
data, and a different destination image file size.

9/16/04: Made Tiltalign try several metro factors when the search fails, made
it give an error when there is more than one point per view in a contour, and
had it not leave an empty fid.xyz file if it fails.

9/14/04: Made blendmont preserve pixel sizes.

9/10/04: IMOD_3-4-8
9/10/04: Fixed tif2mrc, mrc2tif problems on AMD64 (in 3.3).

9/10/04: Added a program, Sumdensity, for summing densities within contours.

9/9/04: Fixed problems with 3dmod writing tiff files on AMD64 (in 3.3).

9/9/04: Fixed a problem that led to combine.com not running.

9/9/04: IMOD_3-4-7
9/9/04: Made Newstack work properly with PIP input when a transform file has
only one line, which is needed for new startjoin command file.

9/2/04: IMOD_3-4-6
9/2/04: Message now sent from eTomo to make object type be scattered points
in matching models.

9/1/04: Fixed bug in determining if piece list file was entered to Blendmont,
only showed up on AMD64 (in 3.3).

8/30/04: Fixed eTomo's treatment of an empty *fid.xyz (in 3.3).

8/30/05: IMOD_3-4-5
8/30/04: Fixed eTomo bug in which making matching models with data binned by 2
would make further invocations of 3dmod load data binned by 2 (in 3.3).

8/30/04: The Zap window Info function now reports unbinned coordinates and a
correct newstack command when data are loaded binned.

8/30/04: eTomo now runs the combine operation using combine.com so that
processing will continue if you exit the program and log out.

8/28/04: Changed head and tail commands in all scripts to use -n before count.

8/28/04: Added command-line argument interface to Makejoincom; changed the
procedures so that scaling is computed in Makejoincom and done by Newstack in
startjoin.com (for samples) and in Finishjoin (for the joined volume); fixed
coordinate problems when rotating; made a new version of joining info file so
that it would work with scaling information and with spaces in the directory
names; changed Finishjoin to use this new version and do the scaling.

8/28/04: Converted Densmatch to PIP input and provided an option to compute
scaling without scaling file.

8/22/04: Added workaround to Windows problem reading internal strings that 
could be numbers or filenames.

8/12/04: Added an option -multadd to Newstack to scale by multiplying by a 
factor then adding a constant.

8/12/04: Added message to make slicer window report its angles, and made
slicer give a slice that is invariant to the relative binning in X/Y and Z.

8/11/04: Added error checking on image rotation and other fields of eTomo setup
page so copytomocoms will not hang when rotation is left blank (in 3.3).

8/4/04: IMOD_3-4-4
8/4/04: Fixed display bug in Midas on AMD64 (in 3.3).

8/3/04: IMOD_3-4-3  (same time as IMOD_3-3-5 released)
8/3/04: eTomo now makes a .rawtlt file from starting and increment tilt angles
when making a tomogram with fiducialless alignment.

8/2/04: Fixed problem with eTomo not swapping corresponding point lists when
matching A to B.

8/2/04: Made get_nxyz subroutine handle numeric filename properly.

8/2/04: Made Transferfid require that A and B prealigned stacks have the same
pixel size to protect against them having different binnings.

7/23/04: Added progress output to Rotatevol, Matchvol, and Warpvol.  
(Not in 3.3)

7/22/04: Fixed problem with contours no longer being considered coplanar after
adding a point.

7/22/04: Changed to better sed command for stripping Ctrl M in Cygwin; previous
way broke several things with the sed version in Redhat AWS for AMD64.

7/21/04: IMOD_3-4-2
7/21/04: Made makejoincom put out commands to make a stack with averages
of the top and bottom slices in each section.  Added new options to Xfalign to
break the alignment at given sections instead of just skipping sections, and
to work with averaged samples from serial tomograms and produce only one
transform per tomogram.  (Not in 3.3)

7/21/04: Added scripts Splittilt and Splitcombine for splitting up
backprojection and volcombine operations to run on multiple processors with
Processchunks.  (Not in 3.3)

7/20/04: More changes in eTomo process-killing, including using the right ps 
command to work on Mac, Windows, and Linux regardless of how eTomo is started.

7/16/04: Made Tiltalign put out pixel size in ...local.xf file and Tilt use
this pixel size to scale local alignment information, which is needed for
local alignments to work right with binning of aligned OR prealigned stacks.

7/16/04: Fixed a bug in Tilt in which an EXCLUDELIST line would turn on the
LOG processing with 0 base.

7/15/04: IMOD_3-4-1 (not tagged)
7/14/04: eTomo process killing improved to handle the multi-layered processes
in combining and fixed to work on Windows again.

7/13/04: Fixed an ancient bug in pixel view when a subset is loaded flipped.

7/13/04: Converted Combinefft to PIP input and added an option for reducing
amplitudes in the missing wedge regions to match the reduction in the combined
data region, and an option for more sophisticated weighting. (Not in 3.3)

7/12/04: Implemented a mode in Midas to make it easier to align chunks of 
sections (e.g., slices from serial tomograms) to each other.  Makejoincom
will output the appropriate command line for running Midas in this mode.
(Not in 3.3)

7/12/04: Fixed copytomocoms problem with starting and increment tilt angles.

7/11/04: Fixed failure to start new contour on a different section after
autocontouring.  Fixed problems with autocontouring not setting surface number
or contour time correctly and line tracker not setting contour time when
copying.  Made all situations that start a new contour when there is no
current contour use the last contour in the object if it is empty.

7/11/04: Made ghost mode use same line thickness as object lines and added
options for ghost contours to be lighter instead of darker colors, and for
ghosts to appear for all objects.

7/10/04: Fixed bug in autocontrasting subarea when zoomed image was panned 
enough for non-image to show in window on right or top.

7/9/04: Fixed bead fixer to run Tiltalign when current directory has spaces
in the path.

7/9/04: Fixed Finishjoin to not rely on /usr/tmp as temporary directory.

7/8/04: Added workaround to Cygwin tcsh 6.13 bug to transferfid, finishjoin,
matchrotpairs, and matchshifts.

7/8/04: Raw2mrc was not working in Windows, needed one more b3dFwrite.

7/7/04: eTomo no longer removes ...log~ or patch.out~ unless there is an 
existing ...log or patch.out that needs to be renamed to the ~ file.

7/7/04: Changed all exit(-1) to exit(3) because this was giving 0 exit status
in Cygwin and failing to stop command file processing.

7/7/04: Fixed a bug processing arguments in subm (submfg).

7/6/04: Enhanced output from self-install script and made it work from or in
directories with spaces in their path; switched from link to rename for OSX.

7/3/04: Fixed Tiltxcorr to keep tilt axis in global center of aligned images
rather than letting it start at center of zero-degree image and shift to the 
center of shifted images.  This should improve tomograms generated using only
the correlation alignment.

7/2/04: eTomo changes: Fixed patchcorr process monitor from locking old
patch.out in Windows. Moved basic 2D filtering to basic mode in tomogram
generation page.  Fixed two bugs in dealing with .xf files from old data sets.
Fixed problems with handling of tilt axis Z shift parameter with binned
prealigned stacks and issued appropriate directions when user switches the
binning of the prealigned stack after making a fiducial model.

6/28/04: IMOD_3-4-0 and branch to IMOD_3-3-0
6/28/04: Added nohup to submfg, vmstocsh output, and all scripts to keep
submitted jobs alive upon logout.

6/28/04: Added -n option to subm (submfg) to run jobs niced.

6/27/04: Added a script, Processchunks, to run jobs in parallel on multiple
processors or machines.

6/25/04: IMOD_3-2-21
6/25/04: Solvematch problems and other combine parameter synchronization 
problems solved in eTomo.

6/24/04: Rewrote bead fixer to store all residual data when reading the input
file, changed it to go from one local area to the next area without the user
pushing buttons, to go to the first residual in an area when next area is
pushed, to back up more predictably, and to allow all points seen when backing
up to be seen again when going forward.  Changed " hot key from Go to Next
Area to Back Up.

6/24/04: Added -c option to subm (submfg) to allow it to continue with
multiple command files after one fails; used this in chunksetup.

6/22/04: Fixed computation of output file mean density by Matchvol, Rotatevol,
and Warpvol.

6/22/04: Added ability for bead fixer and line tracker windows to save and
restore their positions, and for line tracker settings to be saved.

6/20/04: Fixed fatal problem in beadfixer from 6/11/04 change.

6/20/04: Fixed one-pixel shift in mirror image side of FFT produced by clip.

6/20/04: Setupcombine will reduce patch thickness to keep it within Z limits.

6/19/04: IMOD_3-2-20 (eTomo unstable, Setupcombine backed down to match 3.2.19)
6/19/04: Mtffilter can now filter a 3D FFT, allowing inverse filtering and 
general low-pass 3D filtering to be applied to tomograms.

6/18/04: Tutorial images updated

6/17/04: eTomo now accommodates the new solvematch.com, converts from old
version of the solvematch files, and presents a new option to do the initial
match with matching models only.

6/17/04: Made Tiltalign reset the Z-scale and rotation angles of the 3D 
fiducial model in case user rotated and stretched the actual fiducial model.

6/17/04: Added a script, Chunksetup, to create command files for processing
a large volume in chunks and reassembling the chunks.

6/17/04: Fixed Smoothsurf to work with models built on image files with pixel
sizes in the header, fixed a bug in the contour smoothing part, prevented it
from smoothing scattered point objects and non-planar open contours, 
converted to PIP input, provided default parameters, and revised man page to
make it easier to see how to affect smoothing by varying parameters.

6/16/04: Put some error checks into Corrsearch3d to protect against bad entries
and patch sizes too big for the limits to be analyzed.

6/15/04: Fixed problem with hot keys moving the current point beyond the range
of the data in a locked slicer window.

6/14/04: Added a -t option to subm (submfg) to get the time for each command.

6/14/04: Made tomopitch generate an error for contours with more than 2 points
when the model is from a whole tomogram.

6/14/04: Added option to Ccderaser to specify width of annulus so that only
one parameter needs to be changed when increasing maximum X-ray size.

6/14/04: Added options to vary image display thickness and transparency in
model view movie maker.  Also increased limit on number of image slices to 256.

6/14/04: Converted Tomopieces to PIP input and modified it to allow division
of volume in Y dimension; also changed Assemblevol so that it could handle
data from large numbers of files in X and Y.

6/11/04: Fixed bug in Imodjoin that made it crash on models that had not
been through 3dmod.

6/11/04: Made Refinematch exit with error if insufficient data are available.

6/11/04: Improved error messages from PIP to include the option when there is
a problem with the values entered for an option.

6/11/04: Added workaround to erroneous header entries produced by FEI
tomography software so that tilt angles can still be extracted properly.

6/11/04: Copytomocoms now looks at the min and max density of the raw image
file and if the max is negative and the min < -10000, it sets the offset for
taking logarithms in Tilt to 32768.

6/11/04: Made beadfixer read in whole log file at once and close file to 
avoid problems under Windows.

6/9/04: Changed Solvematch to work with the absolute fiducial coordinates now
being produced by Tiltalign; this plus associated changes in Tiltalign, 
Matchshifts, and Setupcombine eliminate the need for correlation or matching
models to be used with fiducial coordinates, and allow the initial match
operation to be done with a single command file, solvematch.com.

6/9/04: Moved the Z clipping planes in model view far out when the sliders 
are at 0 and 1000, to prevent clipping of highly zoomed models.

6/8/04: In the model view window of 3dmod, restored hardware stereo for SGIs
and set up the top/bottom stereo mode so that it would work with external 
devices that cause the monitor to do two overlapping scans of the top and
bottom of the display.

6/5/04: Added an option to raw2mrc to convert 32-bit integers to 16-bit
integers, fixed a problem with dm2mrc and added options to dm2mrc to control
the treatment of unsigned and 32-bit integer data, specifically so that
data can be put into a signed 16-bit format if it fits there.

6/4/04: IMOD_3-2-19
6/4/04: eTomo has a new processing pathway for building a tomogram from
the cross-correlation alignment, an interface for 2D filtering
(including inverse MTF filtering) of the aligned stack, and an option to
build a whole binned-down tomogram for positioning.

6/4/04: When align.com is run outside of eTomo, eTomo will now show the updated
log file.

6/4/04: Implemented ability to pass more than one action in a message to 3dmod.

6/4/04: Fixed 3dmod on SGI so line tracker did not crash it.  Also fixed a bug
that was crashing it on Fedora Core 1.

6/3/04: IMOD_3-2-18 (not tagged)
6/3/04: Fixed problem with imodsendevent putting spaces after filenames.
Improved problem with 3dmod crashing when it receives message to load seed 
model.

6/3/04: Made the Qt utility library be a DLL in Windows.

6/2/04: IMOD_3-2-17
6/2/04: eTomo changes include ability to build tomogram from cross-correlation
alignment, ability to use a whole tomogram for positioning, and 2D filtering
of aligned stack including inverse MTF filtering.

5/31/04: Changes to 3dmod: Added filename filters to 3dmod startup dialog.
Converted plugin loading to use Qt library class, which makes plugins work on
Windows.  Implemented functions for writing to standard error in 3dmod so that
it could flush output under Windows, needed to make rubberband report work.
Restored Run Tiltalign button to bead fixer.  Added a message to set the basic
properties of an object, so that tomopitch.mod can be switched to open 
contours.  Made Zap window start a new contour when the current time does not 
match the time of the existing contour, even for open contours, so that
regular 3-sample modeling can be done with open contours.

5/19/04: IMOD_3-2-16  (eTomo unstable)
5/19/04: Changed to new Qt calls on the Mac to get the 3dmod preferences file
back to being user-specific instead of global.

5/16/04: Made depth cueing of image display in model window work when there are
no model points.

5/16/04: IMOD_3-2-15  (eTomo unstable)
5/16/04: Computed factors correctly for displaying multiple slices in the
model view window, which improves the display.  Added ability to limit size of
image that is displayed; fixed problems with stereo display of images and
changed drawing order so images will work as well as possible with transparent
model objects; fixed problem with depth cueing an image display with no model.

5/11/04: IMOD_3-2-14  (eTomo unstable)
5/11/04: Fixed problem caused by removing the Run Tiltalign button.

5/7/04: IMOD_3-2-13  (eTomo unstable)
5/7/04: Fixed a problem with shifting Z introduced in Tiltalign on 5/4.

5/7/04: Fixed a bug from adding the rubberband toolbutton that made it crash 
on multiple files.  Removed Run Tiltalign button from bead fixer until eTomo
properly updates the parsing of the log file.

5/5/04: IMOD_3-2-12  (eTomo unstable)
5/4/05: Made Tiltalign put out 3D coordinates adjusted back to image
coordinates in the fid.xyz file and the .3dmod model.  This will allow
elimination of the matchshifts procedure and/or the use of matching models
with fiducials.

5/4/04: Added rubberband toolbutton to Zap window and a message by which
eTomo can get the coordinates of a rubberband.

5/3/04: Enhanced image display in model view window by adding ability to
display X and Y slices as well as Z slices, and ability to show multiple
slices with transparency to see a projection through them.  Also added the 
X, Y, and Z coordinates to the movie maker so that movies can be made of a
changing image display.

4/30/04: Added button to keep Bead Fixer window on top, and added ability to
run tiltalign from Bead Fixer window.

4/28/04: Model view window can now show the current contour as a thicker line,
and the current contour can be deleted with D from model view if it was picked
with the third mouse button.  Patch2imod sets the flag to highlight the current
contour, so patch vectors can now be edited conveniently from model view.

4/27/04: Made 3dmod not consider a model modified if view 1 is rotated.

4/27/04: Fixed one-pixel edge effect when undistorting with Newstack.

4/27/04: IMOD_3-2-11  (eTomo unstable)
4/27/04: Found that environment variables set in Cygwin startup scripts needed
double backslashes for Windows format pathnames.

4/25/04: Fixed setupcombine to work when there is no XAXISTILT entry in 
tilt[ab].com and assume 0 tilt.

4/24/04: Made distribution files be self-installing runnable scripts, with
installation to the default location and renaming of existing version (not
documented yet).

4/22/04: Made clip test for errors in MRC file I/O and exit properly; also
fixed problems with header of output file showing extra bytes if the input
file did.

4/21/04: Added bash startup routines for Mac and completed bash startup
routines for SGI.

4/19/04: Fixed some uninitialized variables in Mtk and Nda and some misprints
in Mtk that kept it from running under Windows.

4/19/04: Added newlines before ERROR: outputs from Fortran MRC file I/O
routines and made eTomo strip everything before ERROR: when reporting an error.

4/18/04: Modified imodsendevent to work with Qt versions 3.2 and above under
Linux.

4/10/04: IMOD_3-2-10  (eTomo unstable)
4/9/04: Incorporated changes for building under Amd64 into Linux build scripts.

4/3/04: IMOD_3-2-9 intended but never tagged (eTomo unstable)
4/3/04: Added ability to pack QT library into Linux distribution since message
passing to 3dmod won't work with Qt 3.2 or 3.3.

4/1/04: Fixed uninitialized variable in new version of Extracttilts that made
it fail on Windows, possibly on Mac.

3/31/04: Reduced the artifacts that Tilt produces when taking logs of numbers
that would be negative after adding the log offset.

3/30/04: Added Mtffilter to do filtering by the inverse of an MTF and/or 
general low-pass filtering to the package and made Copytomocoms generate
command files for running it between Newstack and Tilt.

3/30/04: Made initial size-setting of model view windows work the same as for
Zap window, so now it works in Windows.

3/25/04: Fixed problem causing crashes when opening 3dmod with no image,
possibly caused by reorganizations on 1/9/04.

3/22/04: IMOD_3-2-8
3/21/04: Added magnification gradient correction to Newstack and Xfmodel.
Added a program, Extractmagrad, to extract intensity information from the
image file header and compose the file of mag gradients needed by the other
programs.

3/21/04: Fixed button connections in color selector (broke 1/22/04).

3/17/04: Changed Extracttilts and associated routines to work with headers
containing intensity values.  Converted Extracttilts to PIP input and added
options to extract stage position, magnification, or intensity.

3/16/04: IMOD_3-2-7
3/15/04: Many eTomo changes including change to using command line input
to Copytomocoms, ability to specify a distortion field and apply it when
generating prealigned and aligned stack, an option for binning the prealigned
stack, entries for new options to Tiltxcorr for using subareas and doing 
cumulative correlations, a button for rerunning Beadtrack with the fiducial
model as a seed.  Also fixed problem with two matchorwarp command lines being
issued to matchorwarp.com when using a temporary directory.

3/12/04: Fixed problem in tumbler window with Z size changes coming from Y 
value instead.

3/12/04: Added options to Blendmont to set the size parameters for finding the
edge functions and made these parameters scale up for images above 1K.

3/9/04: Fixed problem in Zap window with a panned image not holding its
offset position when redisplayed at some zooms.

2/27/04: IMOD_3-2-6
2/27/04: Fixed problem in midas with transforms getting screwed up after 
moving the center point, created by changes on 12/17/03.

1/27/04: Made Midas redisplay properly when the box size changes.

1/26/04: Made distributions have only the startup files needed for the machine.

1/26/04: Converted Copytomocoms to accept command line argument input and
added option to insert distortion correction in newstack commands.

1/26/04: Converted Xftoxg to PIP input, retired Xf2xg, and fixed hybrid method
in Xftoxg which never worked for eliminating trends in rotation or
magnification.

1/26/04: Converted Xfproduct to PIP input and added option to scale
translations when there is mismatch in scale between images at the two stages.

1/22/04: Added button to image process window so that one could toggle between
original and processed image, and made intensity floating work with processing.

1/20/04: Stopped trying to free a static array when loading data.

1/19/04: IMOD_3-2-5
1/19/04: Added an option to Xfmodel to apply a single line of the transform
file to the whole model, made this behavior the default when there is just
one line of input, and fixed two problems with transforming and
back-transforming when using PIP input.

1/17/04: Made Mac version work for files > 2 Gb by using the file I/O routines
set up for solving the problem in Windows (the old way of doing it broke going
from 10.2 to 10.3).

1/5/04: Added option for linear interpolation to squeezevol and made it
adjust pixel size in the output file.

1/13/04: Added splitrgb and joinrgb options to Clip so that color files could
be disassembled into gray-scale components that can be operated on separately
and recombined.

1/13/04: Fixed problem with Xfmodel and Newstack deciding that they needed
to know binning when undistorting images.

1/13/04: Fixed problem with imodpsview when printing.

1/13/04: Changed default scaling in tilt.com from 1000 to 500 to avoid 
saturation in extreme cases.

1/13/04: Fixed problems with copytomocoms and setupcombine under csh on SGI.

1/9/04: IMOD_3-2-4
1/9/04: Added ability for 3dmod to bin images.  Made the cache fill completely
upon startup when the user does not limit the size with a -C entry.
Implemented flipping of cache data by using the existing data load if the data
are completely loaded.  Relieved restrictions on flipping data: RGB data from
an MRC file can be flipped, and any data can be flipped without reloading if it
is completely loaded into cache or otherwise, including data from TIFF files,
multiple single-image files, montaged data, and data with non-isotropic
binning.  Also fixed problems with image reload with complex data.

1/9/04: Simplified startup and image loading code in 3dmod, consolidated
mrc section loading routines into one routine, reorganized the multi-section 
byte-loading routines to reduce duplicate code, and rationalized the scaling
of complex data.  Made a test suite for 3dmod data loading.

1/6/04: Made raw2mrc and tif2mrc preserve an existing output file by making it
a backup file.

12/30/03: Fixed a problem with pixelview with multiple single-image files.

12/30/03: Sampling was broken with the new Newstack, so changed it to treat
center offsets the old way, after transformations, with a new option to apply
offsets before transformations.

12/30/03: IMOD_3-2-3
12/30/03: Made most libraries be DLLs under Windows.
 
12/30/03: Fixed problems with float crashing on a blank image, and with Subset
area being initialized on.

12/29/03: When 3dmod is started with multiple single-image files, it will now
display them as sections in Z instead of in time by default.

12/28/03: Taking a montage in the model view movie maker will now save a single
large image.

12/27/03: IMOD_3-2-2
12/27/03: Converted Xfmodel to PIP input and implemented ability to undistort
a model built on distorted images.

12/24/03: Converted subimage to PIP input and made it default to subtracting
all pairs of sections in two volumes.

12/24/03: Converted Newstack to PIP input and made it replicate the behavior
of the Newst script.  Added capabilities for binning and undistorting images, 
and retired Newst.

12/24/03: Implemented a better way to solve for 3D transformations when there
are insufficient data in one dimension, and used this for Solvematch's solution
when there are fiducials on only one surface, and for Refinematch and Findwarp
when there is only one layer of patches.

12/23/03: Changed Copytomocoms and eTomo to allow a dual axis data set to
be started with only the first axis present.

12/18/03: Implemented ability to movie in Slicer window, ability to take movie 
snapshots automatically just as with Zap window, and an option to start a movie
snapshot at the current position in Slicer or Zap windows.

12/18/03: Disabled autocontrast hot key for non-existent or RGB images, and 
fixed problem with float on first image of a zap movie snapshot.

12/17/03: Added global rotation mode to Midas so that tilt series images can
be rotated to make the tilt axis vertical.

12/12/03: Changed reducemont to preserve Z pixel size, added options to 
reduceby2 to preserve pixel size and to specify binning.

12/8/03: Fixed Fiberpitch to ignore pixel size from image file.

12/8/03: Fixed the sed command in sample.com to work under Mac OS 10.2 and
changed Tilt to accept blank lines, in case this fix makes some sed somewhere
generate a blank line.

12/5/03: IMOD_3-2-1
12/5/03: Eliminated dependence on test data in Junit tests of eTomo.

12/4/03: IMOD_3-2-0 and branch to IMOD_3-1-4
12/4/03: Fixed bug that crashed Midas when reverting to unit transform.

12/4/03: Fixed bug that was crashing Snap as Tif... from model view menu.

12/2/03: Added instructions for making samples with more slices to sample.com.

12/1/03: IMOD_3-1-3
12/1/03: Eliminate unneeded Qt DLL from Windows distribution, make newst have
Unix line endings.

12/1/03: IMOD_3-1-2
12/1/03: In eTomo, log files are now explicitly closed as soon as possible.
This is to address progress bars that do not initialize correctly.
Log file renaming now works correctly under Windows.

11/10/03 - 12/1/03: Various changes in eTomo:
The keyword AllSectionObjects has been fixed in the eTomo CCDEraser module, so
manual erasing will work again with objects specifying erasure on all sections.

Added validation on empty fields in Setup dialog.

BeadFixer will automatically open or raise when fixing fiducials.

Internal changes: Moved the functionality to view fiducials with 3dmodv to
ImodManager.  Moved the state information on ImodProcess out of ImodManager.
Generalized ImodManager interface.  Created automatic regression tests for
ImodManager.  Functionality to create 3dmods on demand added to ImodManager.

12/1/03: Fixed model view rotation so that it would change direction when a 
different direction key or button is pressed.

11/26/03: Fixed problem in Nda that showed up in Windows XP.

11/26/03: Switched to GnuWin32 build of Tiff library and to using DLLs for
this, which fixed a problem with 3dmod crashing when reading Tiff files put out
by Photoshop.

11/26/03: Fixed some problems with which Image menu entries were allowed to be
executed with raw (RGB) images loaded into 3dmod, and disabled unavailable
menu entries with raw or non-existent images.

11/20/03: Fixed bug that made line tracker not work or crash for non-square 
images.

11/20/03: Changed tiltxcorr to determine binning after adding the requested
padding, so that large padding can be used for large images.

11/17/03: Fixed the newst problem in a better way.  Fixed the sed commands
put out in sample.com by copytomocoms, which worked only on RedHat 9 and 
Cygwin, and changed vmstocsh to preserve continuation lines ending in \\.

11/14/03: Changed file reading, writing, and seeking routines to work for
files bigger than 2 GB on Windows.

11/13/03: Fixed a problem with newst that showed up for one user under Mac 
OS 10.3.

11/13/03: Modified tomopitch to take lines drawn on a whole tomogram,
fixed a problem with using separate model files, and fixed the way angles are 
computed so that large angles will be correct.

11/13/03: Made locked Slicer window respond to PageUp, PageDown, and arrow
keys by moving the current point inside the window without affecting the global
current point.

11/12/03: Made 3dmod remember size and position of model view window for
repeated opening of window in one session of 3dmod.

11/12/03: Added ability for 3dmodv to receive messages for raising itself and
quitting.

11/8/03: IMOD_3-1-1
11/8/03: Setup/makefile files needed to package build correctly

11/7/03: IMOD_3-1-0 released
11/7/03: Added Windows installation instructions, revised other documentation.
Made final highest-priority changes in eTomo before release.

11/5/03: Integrated Eileen O'Toole's tutorial for building tomograms with
eTomo.

11/4/03: IMOD_3-0-26
11/4/03: Changed eTomo so that it runs everything by an absolute path
determined from IMOD_DIR.  This should allow it to work under Windows without
having the IMOD bin added to the Windows path, and with eTomo started from a
shortcut.

11/3/03: Changed model view rotation so that models will rotate at a fixed
speed that is independent of the step size, although , and . hot keys change
both settings at once.  The default speed is 36 degrees per second.  Fixed
some problems with the "throwing" feature and added description of it in the
Help-Mouse entry.

11/1/03: Implemented new error processing in libraries, 3dmod, and Midas so
that these programs can prevent routines in the libraries from trying to write
to standard error (which crashes on Windows).  3dmod and Midas now print
nearly all errors to message windows instead of the terminal.

10/31/03: IMOD_3-0-25
10/31/03: Most new documentation added for etomo.

10/29/03: Added the A hot key to 3dmod to do autocontrast.

10/29/03: Modified Tiltxcorr to implement Christian Renken's method of
aligning to a reference image that is the average of aligned lower-tilt views.

10/29/03: Added a parameter to Ccderaser to limit the size of patches that
would be replaced if they exceed the difference criterion.

10/26/03: IMOD_3-0-24
10/26/03: Many changes for compiling under Windows with Intel compilers and
for building tomograms with programs not compiled under Cygwin.  The Fortran
graphics programs work; 3dmod can now read Tiff files and tof2mrc can 
use the Tiff library to read tiff files; the line tracker also works after 
being converted to an internal module that calls a standard library.

10/10/03: IMOD_3-0-23
10/10/03: Reorganized code for Rotatevol, Matchvol, and Warpvol to eliminate
duplicate code, converted them to PIP input, and added an option for linear
interpolation for each.  Modified scripts command files for combine operation
to use the new input method, and to use linear interpolation when making the
first matching volume.  Added an option for linear interpolation to 
Matchorwarp.

10/8/03: Modified PIP to read newly invented "autodoc" files to determine
program options and generate manual page sections.

10/6/03: IMOD_3-0-22
10/6/03: Fixed the default number of views value for transferfid; it was not
being initialized in etomo.

10/6/03: Reordered thread control to eliminate race condition that often 
prevented matchvol1 from running right after any preceeding com script.

10/2/03: IMOD_3-0-21
10/2/03: Modified Rotatevol, Matchvol, and Warpvol to work on volumes up to 
16K in any dimension; Rotatevol was failing for an output X/Y size of 4K by 4K.

10/1/03: Made imodinfo work properly for counting scattered points on subsets
of the volume.

10/1/03: Added message for opening bead fixer window.

10/1/03: Added ability to turn a plugin into an internal module that is added
to the Special menu, to provide Bead fixer on Windows.

9/29/03: Restructured some 3dmod include files to restore ability to build
plugins with minimal header files.

9/25/03: Made sure windows stayed on the screen when restoring Zap and Info
window positions.

9/25/03: Changed Midas to number sections from 1 instead of 0.

9/24/03: IMOD_3-0-20
9/24/03: Resolved problems with the Fortran graphics package so it works
on all systems, at least briefly.

9/24/03: Fixed some problems with event sending under Windows, added a
retry capability to make it work reliably on the Mac, and found that it
did not work with the multi-threaded Qt library on the SGI.

9/24/03: Used different window properties for saving and restoring window
positions, which fixed problems in Redhat 7.3 and Irix.  Made it not restore
Info window size since that is highly font-dependent.

9/23/03: Put Fortran graphics programs inside application directories on the
Mac, which made them work correctly, with the window raisable and resizable.

9/22/03: Removed a large unused common from smoothsurf, which was making it
fail under Cygwin.

9/19/03: Made sample.com files produce top.rec, etc, directly as the output
of Tilt to avoid replacing existing .rec files.

9/19/03: Made 3dmod require only a 15-bit RGB visual, not 16 bit.

9/18/03: IMOD_3-0-19
9/18/03: Added the ability to float (match contrast between sections) based
on a subarea, either the image displayed or the area inside of a rubberband
in the active Zap window.  Also added an autocontrast button to the Info
window with target contrasts settable from the options dialog.

9/17/03: Made the Zap window pan by one display pixel per pixel of mouse move
for zooms less than one.

9/16/03: Made 3dmod save and restore sizes and positions of the Zap and Info
windows, with different settings saved for different image sizes.  Zoom is
adjusted to fit the whole image to the window.  If there are no application
saved settings, the Zap window now opens up wit a size that fits a zoomed-down
image if appropriate.

9/15/03: Eliminated physical flipping of data in 3dmod to avoid very bad
performance when the image data gets into swap space.

9/15/03: Optimized image drawing for zooms equal to the inverse of an integer.

9/13/03: IMOD_3-0-18
9/12/03: Prevented buffer overruns in an array that holds the filename in
3dmod, fixed problems with model checksums that were leading to queries to
save an unchanged model, arranged the startup page in two columns, fixed a
problem with zooming up under Windows, and added a workaround to a display
problem with Qt 3.2.1 on the Mac.

9/11/03: IMOD_3-0-17  beta release with eTomo

9/9/03: IMOD_3-0-16
9/5/03: Added a program, Resamplemod, for rotating a microtubule model to be
perpendicular to the Z axis and creating points at each section or plane
along that axis.

9/4/03: Incorporated changes in Mtlengths to correct for oblique microtubules
in tilted sections and implemented PIP input.

8/29/03: Set up and documented installation procedures on the Mac.

8/29/03: Changed the Fortran graphics routines to run the graphics window in
a separate thread from the Fortran program.  This only works properly under
Linux, where the window refreshes itself when resized or exposed.  On the Mac,
the window can now be moved but not resized.

8/25/03: Added the -E option to Imodmesh to cap the ends of tubes.

8/13/03: IMOD_3-0-15
8/12/03: Made the Qt-based graphics routines used in Fortran programs work on
the Mac without hanging when the window opened.

8/12/03: Made it possible to start up Nda without a model file, just like Mtk.

8/9/03: IMOD_3-0-14
8/9/03: Changed Blendmont to take PIP input and modified command files and
Copytomocoms to use new form of input.

8/8/03: eTomo was incorporated into IMOD build structure.

8/8/03: Wrote man page for Mtk, changed program to make terminology
consistent, to fix problems with saving connector objects and moving items to
new objects, and to add ability to export a graph in a format easily readable
by other programs.  (Nda can also export graphs.)  Also provided some example
command files in the com directory.

8/8/03: Fixed problem of current point not being displayed when model is
turned off, caused by the ability to display the vector from bead fixer.

8/1/03: Made it possible to kill 3dmod during image flipping operation.

8/1/03: Standardized error exit in Xfproduct.

8/1/03: Implemented proper thickness padding in fast backprojection code of
Tilt, reduced Tilt's stack size so the increase is only 3-fold from previously,
and made memory usage and data loading dynamic so that it will not use more
than 80 MB of stack unless it needs to.

7/31/03: IMOD_3-0-13
7/31/03: Added ability to send messages to set movie mode and to load a model
without changing black/white levels.

7/31/03: Changed the call used to iconify dialog boxes along with the info
or model view window because the old way didn't work under RedHat 9 or on the 
SGI under Qt 3.1.

7/31/03: Fixed remaining problems created by new treatment of "views", and
improved handling of object views, so that object views are deleted along with
objects, they are properly extracted by imodextract, and they are dealt with
as well as possible in imodjoin.

7/29/03: Modified xfalign to test for MRC file rather than for text file, and
to run temporary script files with csh, to make it work on Windows.

7/16/03: Fixed problem with the 3D model of fiducials created by Tiltalign 
cause by the "view" changes of 6/26/03, and changed 3dmodv back to recomputing
scaling and center for the current view when first displaying a model.

7/11/03: Increased stack size in Tilt, discovered that fast backprojection
needed to be padded to a nice thickness, and implemented a temporary fix for
case of X-axis tilting.

7/10/03: Made newst able to take multiple input files and stack all sections
from all files into one output file.

6/29/03: IMOD_3-0-12
6/26/03: Made bead fixer able to display a vector at the current residual, and
added the ability to back up to the previous residual.

6/26/03: Made models always start with one "view" whose properties are
continuously saved as the user changes the display in the model view window.
Eliminated the "default view", which should make the use of views easier and
less confusing.

6/26/03: Improved the model checksum routine to detect more changes (including
view changes) in the model, thus providing better protection against losing
changes.

6/25/03: Implemented control of sphere quality in 3dmodv-Edit-Object window,
allowed independent quality for different objects, and made quality be saved
in model file.

6/20/02: Modified Tiltxcorr to use PIP input, but did not update man page yet.

6/20/03: Made shell scripts use a temporary directory defined in IMOD_TMPDIR,
then /usr/tmp, then /tmp if /usr/tmp does not exist.

6/19/03: Made Zap window start a new contour for closed contour objects
if user changes section while dragging with middle mouse button.  Also added
Edit-Object-Break by Z to fix all contours in an object.

6/16/03: Implemented new version of Ccderaser with automatic X-ray removal,
changed input to use PIP for new options.

6/4/03: IMOD_3-0-11
6/4/03: Provided an empty seed model for Copytomocoms to copy.

6/4/03: Made 3dmodv not overwrite files when making snapshots, just like the
image windows do.  Added message to go to model mode.

6/3/03: Made Header program report pixel size and tilt axis rotation angle
from first section's entries in the extended header of Agard/FEI style headers.

6/2/03: Added PIP package (for Parsing Input Parameters) to the libraries.

6/1/03: Changed output from f and F hot keys to use integer coordinates 
numbered from 1.

5/31/03: Fixed alignlog output for local alignments and added an output of
local area sizes and number of fiducials.

5/31/03: Fixed ambient slider in 3dmodv object edit window.

5/28/03: Added align*.log filter for beadfix plugin.

5/25/03: Added a red indicator of which mouse action has been activated to
Midas.

5/22/03: Moved creation of temporary directory for combining from combine.com
to individual command files to allow this to work with eTomo.

5/22/03: Added message to raise all 3dmod windows, made windows get raised
in order by type (image then dialog), and fixed problem with secondary Zap
windows not syncing to point position for an added point.

5/20/03: IMOD_3-0-10
5/20/03: Modified Vmstocsh and Submfg so that all command files will output
the process ID, so eTomo can kill operations properly.

5/20/03: Made Setupcombine and Copytomocoms able to accept corresponding
fiducial lists or exclude lists with spaces embedded in them, and remove the
spaces so that eTomo will parse them correctly.  Also modified the list-writing
subroutine to output lists without spaces.

5/18/03: Added startup dialog to allow all options to be set when 3dmod is
started with no arguments.  Added an icon for 3dmod.

5/12/03: IMOD_3-0-9
5/12/03: Changes to vmstocsh and setupcombine for running under Cygwin, and
other minor changes for Cygwin (like the name change)

5/9/03: IMOD_3-0-8 released
5/9/03: Added new introduction to 3dmod as a separate document, revised other
guides and man pages.

5/5/03: Prevented garbage at edges of image caused by Zap Window fix on 3/5/03.
Fixed problem with positioning slicer with left mouse button caused by
modeling enhancements on 3/11/03.  Fixed rounding problem that caused display
of Z=-1 on first section in Xyz window.

5/2/03: Stopped Zap window from drawing lines between non-contiguous points for
contours that pass out of a section and back into it.

IMOD_3-0-7
4/27/03: Renamed programs to 3dmod/3dmodv, modified man page and help text.

4/24/03: Added option to fill cache upon program startup, moved "light both
sides" in imodv object edit window from Fill Color panel to material panel
to make it clear it has nothing to do with fill color.

IMOD_3-0-6
4/18/03: Added a script to run command files, which can run several files in
sequence, report on successful completion or give an error report, and can
be run in the background with a simpler "subm" alias.

4/18/03: Speeded up slicer by computing range of pixels on each line where
image data exist and where limits need to be checked, so the penalty when 
making the window much bigger than the image is greatly reduced.

4/18/03: Allowed proper updates to appear in the info window from the cache
filler, and allowed user to quit program quickly when using image reload or
cache filling.

4/17/03: Fixed problem with new contours acquiring the current time when 
modeling multiple times.

IMOD_3-0-5
4/17/03: Various changes for Mac OS X.

IMOD_3-0-4
3/26/03: Implemented stored preferences in Imod for style, font, mouse and 
hot slider behavior, beeps, tooltips, contrast step size, window iconifying
behavior, model autosave control, and custom zooms.  Made all open windows
respond correctly to changes in font size.

3/25/03: Refined the logic for getting large amounts of image memory in Imod 
and improved error detection and reporting when there is insufficient memory to
flip stack.

3/21/03: Fixed reporting of bad displacement from Matchshifts, and standardized
error reporting from Matchorwarp and Trimvol.

IMOD_3-0-3
3/19/03: Changed the color selector window to use a GL widget to display the
current color since color selections in regular widgets are limited on the SGI.

3/18/03: Added buttons to keep Imod Info window on top, to raise all windows,
and to control whether changing the current object or contour will make the
image windows display the new current point or not.

3/13/03: Made Matchshifts produce match checking volumes adjacent to the ones
used to determine the 3D translations, stop with an error if the displacements
are too large, and leave the volumes for the user to inspect

3/13/03: Added linear interpolation option to newstack and newst.

3/12/03: Substituted new default object color scheme with 35 colors that
are chosen purely by object number.

3/12/03: Made all keypad hot keys work even when Num Lock is on.

3/12/03: Added Ctrl-R hotkey to raise all windows.

3/11/03: Prevented Zap, Slicer, and Xyz windows from adding or moving points
when the current contour time does not match the displayed image time.

3/11/03: Added current point and end point markers to the slicer window model
display, made the left mouse button attach to nearest model point in model
mode, and made the image lock work while adding or moving model points.

IMOD_3-0-2
3/6/03: Made the Z slider in the Zap window controllable with Ctrl key.

3/4/03: Fixed a bug that crashed Imod when displaying the last image in a file
zoomed down to 0.25.

3/4/03: Made imodv update imod image windows and the object edit window
upon changes in the view selection and other relevant object changes.

IMOD_3-0-1
3/3/03: In the Xyz window, added grab bars to the position sliders and color
coded the sliders and image boxes to make it clear which slider controls which
dimension.  Made all symbol points, 3-D spheres, and connecting lines display
in the XZ and YZ panels if they are visible on the slice being shown there.
Generally made most model display features similar to those in the Zap window.
To reduce confusion, made the projection of the current contour into the XZ
and YZ windows and the projection of a current open contour into the XY panel
a feature that can be turned on or off with P.

3/3/03: In the Zap window, made the rubber band work the way people expect, by
clicking an upper left corner and dragging to the lower right, and added
cursor changes when the rubber band is grabbed.  Added continuous mouse
tracking while the keypad Insert key is down, so this alternative to the
middle mouse button works without keyboard repeat being set and works better
than it did with key repeating alone.  Improved tracking of initial movements
with left mouse button.

3/3/03: Implemented dynamic sizes for current point and end point markers in
Xyz and Zap windows.

3/3/03: Made Slicer and Xyz windows display arrow cursor in movie mode and
modeling cursor in model mode, just like Zap window.

3/3/03: Added ability for Zap, Xyz, Slicer and Model View windows to display
spheres for all points that have defined sizes, not just for points in 
scattered contours.

3/3/03: Added hot keys for changing an angle by 15 degrees in Slicer.

3/3/03: Fixed slicer to display only data from the current time.

3/3/03: Added Ctrl-D hotkey to truncate a model contour at the current point.

2/27/03: Ported Imod and Midas to run under Windows, which involved various
changes in coding and filename handling, and set up a complete hybrid package,
with the command-line tools runnable under Cygwin.  Replaced Imodsendevent
with a Qt program to communicate using the system clipboard.

IMOD_3-0-0
2/10/03: Merged Qt branch.

2/6/03: Fixed a bug that crashed imodmesh if contours had negative Z values.

IMOD_2-7-11
2/6/03: Made tif2mrc exit with error when output file cannot be opened.

1/30/03: Fixed imodinfo so that when looking at subset surface areas with
either clipping planes or bounding coordinates, mesh triangles that are cut
by a boundary are divided between the two sides, so that all the area shows up
somewhere.

1/17/03: Fixed bug in model output section of tiltalign that crashed program
if there were many contours with 1 point.

12/23/02: Fixed exit status of patch2imod and various other utilities; also
made patch2imod set up the symbol properties of a residual model so the start
and end of each residual vector shows up as green and red crosses.

12/20/02: Added ability to get both a residual output file and a 3-D model
of fiducials from Tiltalign, and allowed the minimum size of patches for local
alignment to be specified by fractional overlaps; modified com files to use
these capabilities.

IMOD_2-7-10
12/10/02: Prevented Edit-image-flip during initial image load from crashing
Imod; also stopped a big memory leak upon closing zap windows.

12/10/02: Made newst able to combine transformation, rotation, and scaling.

BRANCHED IMOD_2-7-9-QT
IMOD_2-7-9
12/3/02: Fixed Transferfid to keep from getting no points in clipped out model
due to roundoff errors.  Also added full error trapping and reporting, and 
ability to transfer from B to A easily.

IMOD_2-7-8
12/3/02: Changes to prevent multiple file dialog boxes from appearing in
Imod with unpredictable results.

11/30/02: Made many changes to give clean compilation with g++ compiler.

11/29/02: Improved new visual selection logic in imodv so that it would
work again on an O2.

11/29/02: Fixed bug in Midas that made X/Y translations become incorrect when
passing through 0 shift.

IMOD_2-7-7
11/14/02: Made newst exit with an error status when newstack does.

11/13/02: Prevented right mouse button drag in zap window from modifying 
points in scattered point contours or from other sections.

=============================================================================
11/12/02: IMOD_2-7-6 released to replace 2.7.5
11/11/02: Fixed bug in Solvematch caused by the 10/2/02 changes in the 
routines shared with Refinematch and Findwarp.

11/5/02 IMOD_2-7-5 released
11/5/02: Revised and simplified installation guide.

IMOD_2-7-4
11/5/02: Changed Midas to choose a visual explicitly so it will work on
machines with only double-buffered visuals.

11/5/02: Standardized copyright notices with lab name as a variable.

11/5/02: Changed raw2mrc to use library routines to write header.

11/4/02: Modified setupcombine to work around a bug in tcsh 6.12 as distributed
in Redhat 8.0

10/23/02: Added ability to combine thin dual-axis reconstructions by computing
and using only one layer of patches.  Setupcombine will set up for one layer
of patches if the patch thickness is more than two-thirds of the available
range in Z for patches; Refinematch and Findwarp will constrain their solutions
appropriately.

10/22/02: Fixed a bug that was causing movies to freeze because of the
delay imposed after expose events.

10/15/02: Further additions to the event-receiving code and rearrangements
to make model I/O functions more easily accessible from the event processer.

IMOD_2-7-3
9/17/02: Added a signature code to the X events and made Imod ignore events
without the signature.

IMOD_2-7-2
9/13/02: Fixed the way Imod was storing scale in the model header when header
"grid" values are 1,1,1 instead of nx,ny,nz.  Beadtrack now works with this
pattern of header values.  Also fixed the way scale was being reported from
"clip info".

9/13/02: Added ability for imod to receive X events with commands, and added
a program, Imodsendevent, to send such events.

9/11/02: Made changes to zap window to minimize X hangups on the PC with
Nvidia Ti4600 cards when window is resize with R, especially when it is
movieing.  This includes a delay after expose events.

9/9/02: Eliminated strange include statements in Fortran programs that were
needed under VMS.

IMOD_2-7-1
9/5/02: Fixed some problems with combining: a bug in Corrsearch3d when the
rotation is close to 45 degrees, the need for an error exit from Findwarp
when there are too few patches; and Patchcrawl3d exiting with an error when
Corrsearch3d does so, so that combine.com processing stops.

9/5/02: Explicitly choose a visual for the cube in slicer to prevent GLw
crashes.

9/4/02: Fixed coordinate scaling and standardized error reporting in Xfmodel
so that Transferfid would work on files with pixel sizes.

9/3/02: Fixed bugs in storing fill color and the black and white levels for
viewing normal magnitudes in a mesh so they will work between machines of 
different endianness.  Made it backward compatible so that existing models
will still read correctly on machines of the same endianness.

9/3/02: Implemented new method for choosing visuals in imodv to avoid problems
on non-Nvidia systems.

=============================================================================
8/22/02: IMOD_2-7-0 Released
8/21/02: Fixed memory overrun problem in copy function of line tracker and
added a copy button.

IMOD_2-6-22
8/21/02: Updated tomography guide

8/21/02: In Squeezevol, suppressed the confusing output from Matchvol that
seemed to be asking for user input.

8/20/02: Fixed problem with Xfsimplex created on 8/18/02.

8/19/02: Added an option to Trimvol to flip Y and Z in output file.

IMOD_2-6-21
8/18/02: Implemented an include file for the commons in Blendmont and
Reducemont, placed large arrays in common to avoid stack limits, and
made changes so that shifts could be solved for with > 1000 pieces.

8/18/02: Changed Midas's montage fixing mode so that it would do a series
of local solutions for displacement errors when there are more than ~80
pieces.  This makes interactive use possible with > 1000 pieces.

8/18/02: Made ICLAVGSD a library function after finding 2 versions in 4
programs; changed Newstack, Alterheader, Xfsimplex, and Subimage to use it.

8/16/02: Made Alterheader able to set the RMS value in the new-style MRC
header.

IMOD_2-6-20
7/31/02: More modifications to Clip, Matchvol, Warpvol, Taperoutvol, and
Assemblevol to propagate a pixel size as well as all titles in the header
through the entire tomogram combining process.

7/31/02: Changed IMOD's image format to conform to MRC image2000 standard
by moving origin information, eliminating wavelength entries, and adding
'MAP', stamp, and rms entries.  Programs read old or new style headers, and
output new style headers, even when writing back into an existing file.

IMOD_2-6-19
7/28/02: Added 3 fractional zooms to Imod to keep step size to a factor of
1.4-1.6.

7/28/02: Made the I hotkey in the Zap window pop the Information Window to
the front as well as print image information and added a button to the toolbar
to do the same thing.

7/28/02: Modified Transferfid and Repackseed to use a fiducial coordinate
file from Tiltalign to get a better analysis of how points will correspond
between two data sets.  Added ability to use Midas within Transferfid to get
an initial rotational and translational alignment between the axes.

7/28/02: Made Beadtrack, Tiltalign, and Remapmodel scale model coordinates
properly to work with pixel sizes other than 1.0, and standardized their
error outputs.  Changed Tilt to propagate pixel size into a reconstruction.
Verified that all processing steps in generating a tomogram, transferring
fiducials, and combining two axes work with a non-unitary pixel size.

7/27/02: Modified Solvematch to be able to work with fiducial coordinate
files from which lines have been removed, and to refer to points from 
matching model files by negative numbers.

7/26/02: Added ability for Tilt to decide not to use fast backprojection based
on the width, thickness, and number of views in the reconstruction, with
different switch points for PC, SGI, and Sun.

IMOD_2-6-18
7/21/02: In Imod, increased section number output in Zap window to 4 columns
and made the filename outputs in windows show the number of image files
when multiple files are loaded.

7/21/02: Made Setupcombine set up default border sizes based on size of input
volume.  Increased default thickness of small 3-D volume used by Matchshifts
and made this thickness increase with input volume thickness.

7/21/02: Modified Matchshifts to reduce extraneous output and report on
its progress instead.  Added STATUS reports for each piece to volcombine.com.

7/20/02: Standardized error outputs for Tilt, Ccderaser, Tomopitch,
Solvematch, Refinematch, Findwarp, Corrsearch3d, and image reading routines.

7/20/02: Made imod start saving image file origin information in the model
file so that programs can convert model coordinates back to the index
coordinates in the full volume even if the model was loaded on a subset of the
image file.

7/20/02: Revised Solvematch, Refinematch, Findwarp, Tomopitch, and
Corrsearch3d to scale model coordinates properly, so they should work with
volumes that have pixel sizes other than 1.0.

7/20/02: Made Corrsearch3d rather than Patchcrawl3d determine which patches 
should be excluded because they are not from good areas of the second volume,
which should fix problems in combining tomograms with a rotation much
different from 90 degrees and with both a large shift between volumes and
large excluded areas.

7/20/02: Resurrected Solvematch's ability to work with matching model files
and added a capability to find a solution using just matching model files and
no fiducial coordinates.

7/20/02: Rearranged input to Findwarp so that it is easier to run it
automatically while excluding rows or columns of patches, and added arguments
to Matchorwarp to specify rows or columns to exclude and to run it in a trial
mode.  Exclusion of rows or columns can now be explored by running
matcorwarp.com, without running Findwarp interactively.

IMOD_2-6-17
7/7/02: Made Ccderaser use scale factors from the model file to get back to
index coordinates, so now one model file can be used with image files that
have different pixel spacings.  Also made all errors cause the program to exit
with error status, and upgraded the title entry.

7/7/02: Added a function to the model reading interface for Fortran to return
the scale factors used to get between model to index coordinates.  Modified
Clipmodel to use these factors, so it will now work with a model built on
an image file with a pixel spacing other than 1.0.

7/6/02: Fixed problem in nda caused by adding checks on array size.

7/1/02: Fixed bug in corrsearch3d (used by patchcrawl3d) that was giving 
slightly wrong patch displacements on the SGI and "nan" output on the PC.

IMOD_2-6-16
6/26/02: Added ability for C programs to write back to byte-swapped files also,
so now Mrctaper and Clip work overwriting or appending to byte-swapped files.

6/25/02: Fortran programs can now write back into byte-swapped files, except
for extended header data.  Ccderaser and Densmatch will now run on 
byte-swapped files.

6/25/02: Changed all STOP statements in Fortran image library to call exit
with an error status instead.

6/25/02: Fixed bug in Tomopitch and Findsection that gave the wrong vertical
shift with X-axis tilt correction.

IMOD_2-6-15
6/20/02: Fixed bug in imodfillin that gave points out of order at start of
contour.

6/19/02: Added an option to imodauto to enter thresholds as unscaled values.

IMOD_2-6-14
6/19/02: Changed tomogram combining so that it uses a master command file to
run a set of other command files that do specific steps.

6/18/02: Added an option to Imodauto to specify a color for the model object.

6/5/02: Made Nda work with scattered points, which can be in contours that
have many points per section.  Increased array size for boundary contours
and added check on overrunning these arrays.

5/22/02: Had Transferfid analyze and report the correspondence between points
in the two fiducial models, and eliminate empty contours from the new seed.

IMOD_2-6-13
5/20/02: Added -S option to Imod to start with slicer rather than Zap window.
To make this option more convenient, made slicer set current point to center
if it has been defined, and made it load the cache for the current point.

5/20/02: Changed Tomopitch so that it can analyze a single model file
containing contours at different time intervals, so that all samples can be
modeled in a single invocation of Imod.  To support this option, when multiple
image files are loaded, Imod will now set up new objects (or a new model) to
assign time indexes to contours by default.

5/20/02: Fixed Tiltxcorr and Xfsimplex to work with 4Kx4K images; in Xfsimplex
such large images must still be reduced by at least a factor of 2 internally.

5/20/02: Implemented Transferfid for making a seed model for the bead tracking
on a second axis from the fiducial model for the first axis.

5/20/02: Fixed 3-D model output in Tiltalign for points assigned to two
surfaces and made it work properly with points in multiple objects; also
defined objects as scattered points so the model is ready to view.

5/6/02: IMOD_2-6-12
5/6/02: Changed Tiltalign to work better with a subset of views; it puts out
a full set of transforms and tilt angles for downstream programs and refers
to all views by their view number in the file rather than in the particular
selected subset.  Added an entry for a list of views to exclude in
Copytomocoms and propagated this into track.com, align.com, and tilt.com.
Added an EXCLUDELIST option to Tilt to make it easier to use the same list
in both Tiltalign and Tilt.

5/6/02: Changed the surface analysis output in Tiltalign to make it more
understandable and more easily readable by programs; made Alignlog read the
old or new form correctly and fixed a problem with Alignlog's reading of the
log file name.

5/2/02: IMOD_2-6-11
5/2/02: Fixed bug in tiltxcorr in which images with negative tilt angles
had their shifts inappropriately destretched.

4/29/02: Made tiltxcorr bin images larger than 1024 pixels down to 1024 or
smaller.

4/29/02: Stopped xfalign (xfsimplex) from failing when images match perfectly.

4/19/02: IMOD_2-6-10
4/18/02: Made transfer of extra header swap bytes correctly for data
consisting of integers and reals.  Made newstack copy this kind of extra
header information properly on a per-section basis.

4/10/02: Fixed a bug in imodmesh in routine that scans for shortest legal 
connection between contours on same slice.

2/26/02: IMOD_2-6-9
2/26/02: Made the Fortran code that reads image files test for Boulder-style
extended header data versus data consisting of 4-byte integers and reals,
and swap byte appropriately.  Made extracttilts able to get tilt angles if
they are the first real numbers in an extended header.  Also improved the
protection against misinterpreting non-Boulder image files as montages.

2/26/02: The 1/25/02 change to xyzproj broke it for the SGI, so the array 
dimensions were reduced so that it can do either very large images or very 
many projections,

2/1/02: In Tilt, modified the writing in the PARALLEL mode to partially
demangle the file and prevent very slow reading under Linux.

1/28/02: IMOD_2-6-8
1/28/02: Fixed new bug in xyz drawing routine.

1/28/02: IMOD_2-6-7
1/27/02: Added ability to apply selection criteria to Genhstplt.

1/25/02: Increased allowed number of projections in xyzproj and added check on
number requested.

1/25/02: Made goodframe produce only even sizes.

1/25/02: Fixed two problems with movie controller: coming up with no image
sizes if it is opened before image is done loading; and the average rate
becoming wrong if movie is stopped with the mouse button.

1/24/02: Enhancements to XYZ window: Made it use the same image drawing code as
the Zap window so that it would not be slow with fractional zooms; added
ability to display in high-resolution mode and to take snapshots of the
window; added ability to pan the window with the mouse; made the model
display have fixed line widths and symbol sizes independent of zoom; made
attachment to the nearest model point work just like in the Zap window;
added ability to riffle through images by dragging the current point
indicators with the mouse.  Added a section documenting this window to the
imod man page.

1/23/02: Fixed imodextract's report of invalid object number.

1/15/02: Fixed a problem with midas in montage fixing mode that occurred
if there was only one section.

=============================================================================
1/13/02: IMOD_2-6-6 - released to provide Red Hat 7.1 distributed version that
later patches would be compatible with, and to provide Sun version that would
work with large files.

1/13/02: Made imodmesh work with inside-out annular-horseshoe transitions.

1/10/02: Added alignlog to makefile so it would be properly installed.

1/9/02: Fixed Tiltxcorr and Tilt to work with more than 360 tilt views.

1/8/02: IMOD_2-6-5
1/8/02: Changed prenewst.com to reset pixel sizes to 1 in the prealigned
stack, so that align.com would run correctly if pixel sizes are set in the
raw stack.

1/7/02: Fixed dimensioning error in Beadtrack that was erroneously producing
a diagnostic image file and could have produced other problems with very
large bead radius values.

1/6/02: Determined configuration parameters needed to make large files work on
the Sun.

1/4/02: IMOD_2-6-4
1/4/02: Discovered that invoking csh with the -ef flags in the subm alias
prevented problems with csh startup scripts that generate errors, so changed
the ...install files and documentation accordingly.

12/31/01: IMOD_2-6-3
12/31/01: Added dm2mrc for converting Digital Micrograph version 2.5 and 3 
images files.

12/28/01: Added option to newstack to disable scaling upon mode changes.

12/27/01: Fixed raw2mrc to do long integers, to do bytes correctly on PC, and
to swap floats and long integers correctly.

12/17/01: IMOD_2-6-2
12/13/01: Added hotkeys to the zap window for smoothing and advancing to the
next section when using autocontouring; removed the b hotkey from the xyz 
window.

12/13/01: Added ability to fill the cache to a selected degree and with
several possibilities for apportioning the filling among multiple image
files.  Also added an autofill option.  This can provide faster, more 
efficient loading of Y-Z flipped slices from large image files.  The window is
opened via Edit-Image-Cache Filler.

12/10/01: Added program imodfillin to interpolate contours on sections that
are missing them.

12/10/01: In libiimod.so, added a test that extra header information be
consistent with being produced by our programs before a file would be
recognized and treated as a montage; also excluded Deltavision files from
being montages.

12/4/01: IMOD_2-6-1
12/3/01: Restored capability of Fortran programs to read old Wimp binary
models even though the package is compiled to convert IEEE floats rather than
VMS floats, and made this work on both little and big endian machines.

11/30/01: Fixed bug in imodv when lighting both sides of an object with 
transparency.

================================================================

Version 2.6.0 was the first release after putting the source under CVS.  It
had mostly bug fixes and would have been labeled as a minor release if not
for the change in the numbering scheme.  The dates are 2001.

Jul. 26: Modified xftoxg and xf2xg to do hybrid of local and global alignments.

Jul. 27: Added echo2 (echo to standard error) to distribution.

Jul. 27: Modified xfalign to do initial cross-correlation before alignment
search; modified xfsimplex to take the initial transform; changed setupcoms and
setuplong to accommodate this and use echo2.

Jul. 27: removed diagnostic print statement from imodmesh.

Jul. 29: bashinstall was missing /bin in the path statement.

Jul. 30: Fixed bug in computation of plane information from point and normal
(libimod.so).

Jul. 30: Setupcombine reported size of large patches wrong in query.

Jul. 31: Fixed memory leak in clip stat.

Aug. 2: Discovered mrcv, tomrc, frommrc missing group/other execute permission
in Irix distribution

Aug. 3: In imodv, made the current object for object editing be initialized as
the current model object if possible; this fixed a problem with clipping planes
not being reported correctly and not being movable before the object edit
window was opened.

Aug. 4: In imodv, made changes to views be stored automatically before going
to a different view or saving the model, so that the last settings that were
seen for a view become the settings that are seen when coming back to the 
view.

Aug. 4: Added capability to imodinfo for applying object clipping planes when
calculating surface areas and volumes and getting information about scattered
points.  Inside contours are handled properly.  Added mesh surface area outputs
to the full object report, and eliminated erroneous clipped cylinder surface
area.

Aug. 10: In imod zap window, added double draw after resize on PC to workaround
bad display with GeForce3 card.

Aug. 11: Fixed the display of autocontour pixels in the zap window with
fractional zooms.

Aug. 11: Fixed bad problem with center of mass calculations that are reported
in imodinfo and used in imodmesh to place caps correctly.  This was broken by
the time-related changes on June 19.

Aug. 27: Found that compiling with -D_FILE_OFFSET_BITS=64 made Linux version
work with large files over NFS and on EXT2 file systems.

Aug. 28: Added numbers to the depth cue sliders in imod.

Aug. 28: Added an option to tif2mrc to turn a 24-bit color image into 8-bit
grayscale; made tif2mrc work correctly with multi-page tiff files in all 3
modes, 8 and 16-bit grayscale and 24-bit color.

Aug. 28: Added a function to libiimod.so so that midas could read RGB images
directly.

Aug. 29: Added ability to move center of rotation and stretch in midas, 
defined this as a position on the image rather than in the display, and made
all mouse actions occur relative to this position.

Sept. 6: Made background subtraction in tif2mrc work for 16-bit data.

Sept. 7: Added a guide to serial section alignment, with links to it from
the IMOD guide.

Sept. 10: Fixed bug writing models from Fortran programs.

Sept. 21: Made clip resize change image origin in correct direction.

Sept. 24: Changed setupcombine to delete ...mat~ by name, without a *, to 
work around big file globbing problem.

Sept. 24: Made .ecd file get backed up by "savework".

Sept. 24: Made imodjoin able to combine more than two models.

Sept. 25: Modified newstack to operate on very large images by reading and
writing in chunks.  Images bigger than 10K by 10K can be used if there is not a
large rotation; for rotations > 30 degrees, images can be up to 4K by 4K.

Sept. 26: Added -P option to imodmesh to make connections between contours
progressively farther apart in Z on multiple passes through the contours.

Sept. 26: Added a message to midas reminding user to build new edge functions 
when fixing montage overlaps.

Sept. 26: Fixed two memory-related bugs in clip 2d correlation.

Sept. 27: Increased maximum output line length for Blendmont to 30000 pixels.

Sept. 27: Fixed bugs in densmatch, filltomo and tilt for file size > 2
gigapixels; integer arithmetic cannot be used to get total number of pixels.

Oct. 24: In raw2mrc, added option to divide unsigned 16-bit values by 2 instead
of subtracting 32767.

Oct. 24: Make a new contour inherit the open-closed flag from the current
contour so that one does not have to push the button for each contour.

Nov. 6: Fixed a bug in matchvol and warpvol that would only show up if there
is substantial expansion in the transformation; changed rotatevol for 
consistency.

Nov. 6: Added output of min, max, mean and s.d. to subimage, and ability to
get no output file.

Nov. 8: Implemented a new way of imposing a tilt around the X axis in Tilt,
so that fast backprojection could be used.

Nov. 10: Changes from working with Intel compiler: change "call exit" to
"call exit(0)" in 44 Fortran programs; change name of /mod/ common to /wmpmod/;
eliminate features deleted in Fotran 95 (non-integer do loop in tiltalign.f,
pause in betacf.f and betai.f, Hollerith in cmplft.f, mdftkd.f, rsymft.f,
sdiad.f, and srfp.f).

Nov. 14: Fixed bug in solvematch from failure to declare a 3-item array.

Nov. 15: Fixed patch2imod, badly broken when patch files started being
generated by patchcrawl3d instead of patchcorr3d.

Nov. 15: In every script, added $IMOD_DIR/bin to the front of the path if
$IMOD_DIR was defined.  Modified vmstocsh to output the same command into the
csh script that it produces.

Nov. 15: Changed copytomocoms and setupcombine to detect when image files are
floating point and adjust tilt.com and combine.com accordingly.

Nov. 16: Updated the iclden subroutine in libim.so to get a more accurate mean
for large images by computing partial sums.

Nov. 16: Changed imod to detect VPRO grpahics on Octane2 and use rgb mode 
rather than pseudocolor.

Nov. 17: Added a shell script, alignlog, to extract useful parts of a
tiltalign log file.

Nov. 17: In imod, stop movie in X and Y when close XYZ window.

Nov. 18: Changed tif2mrc, mrc2tif, and the the tiff routines in libiimod.so so
that 1) the routines (and thus imod) can now read data from files organized in
tiles, compressed or not; 2) tif2mrc will now use the libiimod.so routines if
libtiff.so is installed on the system, so it can now convert files that are
compressed and/or organized in tiles.  3) tif2mrc can preserve information in
unsigned integer files by shifting the data or dividing it by two; 4) mrc2tif
sets a tag that a 16-bit file is signed; 5) imod reads 16-bit tiff data as
unsigned unless there is a tag that it is signed; 6) the tiff reading routines
work better with data from various sources by no longer assuming that there is
a tag for samples per pixel and not allowing incorrect strip counts to cause a
read past the end of an image.

Nov. 19: Added option to imodinfo to suppress listing of each contour.

Nov. 23: Switched slicer high-res mode to use faster method for zoom > 1.5
in which it forms an interpolated image at 1:1 zoom then zooms it up with cubic
interpolation, giving a smoother result (coded in 1999 but left unactivated).

Nov. 28: Fixed a bug in Tilt when fast backprojection padded to odd sizes.

Nov. 28: Made samplea.com produce topa.rec, mida.rec, bota.rec, and similarly
for sampleb.com.  Made align.com easier to use with added comments and use
of CAPITALS for common items to change.  Changed $! to # for comments in all
command files.


================================================================

Version 2.50 had a lot of changes in tomography processing and included
changes from building for the Sun.  The dates are 2001.

Feb. 25: In Irix 6.5 distribution, changed lib/libtiff.so to lib/nolibtiff.so
to prevent masking of system-installed libtiff for old 32-bit programs.

Feb. 25: Prevent graph window from opening if no image data.

Feb. 25: Fix bug in line tracker that crashed program when doing an undo after
a contour copy.

Feb. 26: Implemented ability to do tomogram combining in temp space, requiring
changes to matchvol, warpvol, and rotatevol, and various scripts in addition
to setupcombine.

Feb. 28: Implemented Taperoutvol and Assemblevol for extracting a padded volume
that is tapered on the outside, and for efficiently reassembling a volume
from pieces in X, Y and Z.  Changed Tomopieces and Setupcombine to divide 
volume in X and Z and use these new programs.

Mar. 1: Implemented ability to build tomograms in scratch space and have files
copied automatically to backed-up area.

Mar. 2: Increased file limit for MRC files to 20, made an imsubs include file
to make this easier and safer to do.

Mar. 4: Changed Makefiles to use $(FC) and $(CC) instead of cc and f77; 
changed "find" to $(FIND) in flib/subrs Makefiles.

Mar. 4: Got calc working correctly and compilable under g77.

Mar. 5: Speeded up XYZ window with cached data by eliminating calls to
ivwGetValue.

Mar. 7: Added ability to take automatic snapshots of a Zap window through one 
full cycle of a movie.

Mar. 8: Fixed matchvol, warpvol, and rotatevol so that their temporary 
filenames will be distinct even if the time subroutine fails to return a time.

Mar. 10: Eliminated Sun-specific geometry settings of dialog boxes.

Mar. 10: Fixed problems with imodv-edit-objects window that caused lower frame
area to shrink at the expense of the top line, and made it resize the whole
dialog box if necessary when switching frames, to fit the size of a given 
frame.

Mar. 12: Set up imod and midas to fork into the background on all platforms, 
and made imodv fork into background also.

Mar. 12: Changed logic for selecting a GL visual in imod so that it would first
try 12-bit pseudocolor, then 24-bit RGB, then 8-bit pseudocolor.  This makes
it come out with a good visual on the Sun by default, avoiding the 8-bit
pseudocolor which works poorly.

Mar. 12: Cleaned up the setup program and changed some variables used by a few
Makefiles, and added some explanations to the "default" section of setup.

Mar. 12: Consolidated all changes from the Sun port and released locally;
packed up the Sun binaries.

Mar. 13: Fixed bug in extracttilts that showed up with more than 1000 pieces.

Mar. 14: Fixed bug in blendmont when reading edge function files that need
swapping.

Mar. 14: Fixed bug in midas that changed contrast settings inappropriately
when going to overlay mode.

Mar. 14: Prevent F2, F3, F6, F7, and F8 from taking black/white sliders out
of bounds.

Mar. 16: Made fortran library routines read tilt angles correctly from the
header of byte-swapped files.  Rationalized the definitions of some of the
MRC header entries between the fortran and C code and made both sets of
routines swap the unused but defined header entries in the same way.  Found
that mrcx did not work on little-endian machines and fixed that.

Mar. 18: Built current source for Sun, released as 2.42.

Mar. 20: Implemented pre-stretching of input data in the Tilt program, which
provides an alternate solution to the problem of slow integer truncations on
the PC and speeds up the program 30-50% on SGI and PC.  Used linear 
interpolation with internal representation at twice the frequency of the input
data, after finding that this best approximates the results from the regular
method without unduly amplifying noise.  It falls back to the regular method
if there is insufficient array space for the stretched data.

Mar. 21: Fixed bugs in clip, midas, imodmop and imodcmopp that prevented them
from writing an output image file if the input file was byte-swapped.

Mar. 22: Changed if-test code in mtoverlap to workaround bug in g77 
optimization.

Mar. 22: After compiling with Portland compilers with warnings, changed a type
conversion in densmatch and fixed an actual bug in blendmont.

Mar. 23: Fixed memory leak and failure to initialize font on repeated files 
in the fortran postscript graphics interface.  Added ability to set new page
or not in mtoverlap, and fixed some problems with paging and drawing.

Mar. 23: Fixed problems in clip and mrcfiles.c with flipping data from swapped
files, and with flipping xz or xy in general.

Mar. 25: Fixed problem with putimod when it was used to write multiple
model files from Fortran.

Mar. 26: Adopted some changes from Lambert Zijp: fixed memory leak in
imodel_contour_overlap; fixed memory leak in imodel_point_delete in which it
failed to free arrays when the number of points dropped to zero; then had to
change imodel_contour_scan to not use this function to delete points; made
imodContourMoment use pre-existing scan contour or make one if needed; made
imodContourCenterOfMass create a scan contour before calling
imodContourMoment.

Mar. 28: Modifed tif2mrc to detect whether Tiff image is organized in tiles
and exit with an error message.

Mar. 29: Fixed computation of slice minimum when clip makes an FFT.

Mar. 29: Fixed bug that crashed imod when two kill events were issued to a
slowly displaying slicer window that needed to do a redraw first.

Mar. 29: Made it drop back to previous contour when deleting a contour or
moving a single contour to another object, but leave the current point
undefined so that it would not pop that contour into the display.  

Mar. 30: Replaced use of imodel_point_add with adding of points and allocation
in chunks in the scan conversion routine, another slight efficiency improvement
for imodmesh.

Mar. 31: Changed all uses of mrc_slice_getval and mrc_slice_putval to 
sliceGetVal and slicePutVal to avoid double function calls.

Apr. 6: Fixed setupcombine so that combine.com won't stop if someone purges
the mat~ file before the command file goes to delete it. 

Apr. 16: Added a frames per CPU second in imodv to the o hotkey output.

Apr. 19: Made the imod Edit-Image-Process functions take account of time
properly in multi-file displays.

May 3: Added a new program, Fiberpitch, to measure pitch angles relative to
an axis.

May 6: Added the Sandberg/Beylkin fast back projection algorithm to the Tilt
program.

May 8: Changed makejoincom and finishjoin to handle different file sizes
properly.

May 15: Fixed bug that crashed imodv when switching between models after
opening and closing the model edit window.

May 21: Made the frame rate output of imodv be based on real time rather than
CPU time, and added a frame rate output for image display to the movie 
controller window.

May 23: Wrote Mrctaper to taper the transitions between actual image and
filled-in background, such as occur in images that have been transformed by
Newstack or Blendmont.

May 25: Modified Blendmont and Midas to allow fixing of montage overlaps.
In blendmont, added options to save edge displacements to a file and to read
them from a file on a second run, and improved the finding of displacements by
adding a search for displacement that minimizes the SD of the difference,
after the initial cross-correlation.  In midas, added a whole new mode for
displaying displacements between montage pieces, with solutions for edge
displacement errors.

May 30: Fixed memory allocation bug in midas when saving transforms.

Jun. 8: Incorporated ability to solve for tilt around the X-axis into
Tiltalign, but had it run the old code when no tilt is being solved for,
for speed and consistency.  Got Tilt to use these tilts with the right sign,
but found that the resulting reconstruction had a poorer quality than when
the alignment solution used in-plane rotation instead.  Left Tiltalign so that
it does not ask for entries about X-axis tilting, so as not to make align.com
needlessly more complex; but the X-axis option can be available by changing a
single flag and recompiling.

Jun. 9: Solved memory allocation problems in Tiltalign and Beadtrack by 
coding some 2-D arrays as 1-D; set limits for number of fiducials and number of
tilts quite high with the assumption that only one of these would be very high
for a given data set.

Jun. 11: Made tiltalign keep track of and report imod object and contour
number, and modified beadfix to work with this information when present.

Jun. 11: Fixed bug in imodjoin when using -r flag to replace objects.

Jun. 11: Made new programs, patch2imod and imod2patch, for converting patch
displacements to and from a model file.  Modified findwarp so that it would
work with a patch file missing displacements at some positions.

Jun. 11: In Imod and Midas, found and implemented a workaround to an 
X/Motif bug that made radio buttons "stick" on the PC after being set from
within the code.

Jun. 11: Made smoothsurf work properly on a model built on a flipped stack.

Jun. 13: Added "subsetstart" and "fullimage" entries to Tilt so that it could
correctly compute a sample of a tomogram from a subset of an aligned stack
with and X-axis tilt or local alignments.  Changed Copytomocoms and sample.com
to feed the correct starting coordinates in when sampling.

Jun. 15: Added ability to specify IMOD_AUTOSAVE_DIR to do autosave onto a
local disk.

Jun. 16: Made Bead fixer plugin able to move a point by its residual and to 
undo the move, and keep track of points so that they can be examined only once.

Jun. 16: Provided finer control of ghost display mode by adding toggle
buttons for Up and Down in the Edit-Contour-Type window; fixed problem with
ghost display when Zap window is locked.

Jun. 17: Fixed some obvious problems with modeling time data, such as 
autocreation of new contours when section or time does not match, and control
of contour display for closed contours in the zap window.

Jun. 17: Made attach with mouse button in the Zap window be distance-invariant
with zoom, so that it would be easier to attach in zoomed-down images.

Jun. 20: Fixed remainder of problems with handling of time data.  Made imodmesh
mesh separate times separately by default, and set both the surface number
and the time in output meshes.  Modified model I/O so that mesh time and
surface number are stored together where time used to be.  Made imodv display
meshes by time and added ability to display current surface only for mesh
data just as it can be for contour data.

Jun. 21: Fixed bug in Taperoutvol (taperoutpad subroutine) when X or Y input
dimension is odd.  Made sure tapervoledge could handle odd input sizes too.

Jun. 22: Fixed bug in auto snapshot of zap window on PC with float on.

Jun. 23: In Solvematch, changed limit for adding new pairs of fiducials so that
it equalled the residual limit for stopping, since there were problems with
points being added that were not recognized as outliers.  Increased limit in
combine.com from 5 to 8 to compensate.  Tested on 12 data sets.

Jun. 23: Changed rotatevol, matchvol, and warpvol to strip directories off
of image file name before composing the temporary filenames.

Jun. 27: Made newstack really not float images when no floating is selected,
by truncating out-of-range pixels in a byte image that has been interpolated.

Jun. 27: Added an option to offset images in finishjoin.

Jun. 27: Made the default number of pixels for findcontrast to saturate be the
maximum of one per slice and one per million.

Jul. 16: Wrote programs to find displacements in 3D between patches of two 
volumes by iterative search instead of FFT-based cross-correlation
(Corrsearch3d and two shell scripts, Patchcrawl3d and Onepatchcorr).  This is
over 10 times faster than Patchcorr3d and allows larger patches to be used
routinely with little time penalty, thus giving more accurate fits.

Jul. 22: Fixed horrible bug when doing local fits in xftoxg, introduced with 
elimination of structures in IMOD 2.40.

Jul. 22: Added a shell script, Selfalign, to do refined alignment of a
microtubule model.


================================================================

Version 2.42 fixed a lot of problems that showed up after the Linux release,
and had enhancements in autocontouring. The dates are 2001.

Dec. 31: Made image drag with mouse in zap window work the way it used to: it
just slips for the 0.25 second, then follows the mouse from there, instead of
lurching to match the moves in the first 0.25 second.

Jan. 4: Implemented another hack on PC to draw images in chunks no bigger than
a fraction of the original size of a window, needed for ULTRA card only.

Jan. 12: Fixed problem in imodmesh when capping a contour for which moments
can't be computed.

Jan. 15: Fixed bug when drawing open triangles in plax on the PC.

Jan. 17: Upgraded imodauto: incorporated the non-recursive algorithms from
imod autocontouring; fixed problems with setting of low and high thresholds
and redefined the options for setting threshold; made sure it created areas
exclusively above the high threshold or below the low threshold; added option
for intensity scaling and made sure that intensities would match those in data
loaded into imod, with or without the -s option; made contours go to the edge
of the image area instead of 0.5 pixel in; added an option to eliminate
contours touching a selected number of edges; and revamped the man page to
explain what the program actually does.  Also modified imod to call the same
library routine for building the contour.

Jan. 18: Fixed some problems with imod2vrml, added capabilities to match
almost all of the display variation in imodv, and amplified the man page to
explain how to get desired results.

Jan. 19: Implemented ability to press keypad insert key instead of middle
mouse button for adding model points, either single points or continuous
tracing.

Jan. 20: Changed Nda to use double precision to avoid problems from
difference between internal representation of numbers in the FPU on the PC and
the nominally single-precision numbers.

Jan. 26: Implemented a new algorithm for converting a pixel area to a contour
in imodauto and imod autocontouring.  Added smooth, shrink, and expand to
imodauto.  Adjusted threshold tests so that in imod, the pixels that are black
are exactly the ones that are filled (the white already were correct), and 
made sure that imodauto interpreted thresholds exactly the same.

Jan. 27: In midas, fixed bug that computed translations incorrectly when 
reading transforms in from a file; fixed bug that crashed program when Save-As
was invoked after reading transforms from a file.

Jan. 30: Fixed new library routine for converting a region of pixels to
contours so that individualy included or excluded pixels will be handled
correctly in imod autocontouring.  Implemented an option of connecting pixels
that touch on their corners in imodauto and imod autocontouring, and added
options to imodauto to make it easier to find inside contours.

Jan. 31: Updated Makejoincom was not installed on SGI or in SGI distribution.

Feb. 1: In the line tracker, implemented proper handling of bytes based on
the Fortran "endian" include file, so that it would work on both PC and SGI.

Feb. 1: Fixed bug in imodv object edit window that crashed on PC when On's
are selected and the draw type is changed.

Feb. 1: Make F2 advance black and white when they are already equal.

Feb. 1: When adding or deleting pixels to autocontouring in the zap window,
made it call routines in auto with integer rather than floating coordinates,
made those routines test for points out of bounds, and made the pixels display
as yellow and ghost color in both index and RGB color mode.

Feb. 2: Modified Tapervoledge to allow single X/Y slices to be tapered on 
edges.

Feb. 2: Prevented contrast change from making the zap window pan to current 
model point with 24-bit visual (PC).

Feb. 5: In midas, fixed bug that failed to get a new array for image
when window became larger.

Feb. 5: Added option to alterheader to change header so that programs will no
longer access piece list data in extra header.

Feb. 5: Changed Caret-G to Ctrl-G in subm aliases in sgiinstall and pcinstall.

Feb. 7: Prevented multiple confirmation windows for saving model when quitting
imod, or for saving transforms when quitting midas.

Feb. 7: Made sure imodv object list window is updated when a different view is
selected, even if object edit window isn't open.

Feb. 10: Made montaging work for color image files, via piece list or image 
list file.

Feb. 10: Added command-line options to create a piece list internally in order
to display a set of images in montaged arrays.

Feb. 11: Fixed problems with the size of the cache when images are loaded
flipped; implemented ability to specify cache size as megabytes or sections;
centralized the code for setting cache size for all kinds of data so that all
routes to getting montaged images would work the same; made it preserve the
memory size of the cache when images are flipped.

Feb. 11: Set the scaling properly for reading complex float data into cache
situations, so that complex files can be cached, displayed with multiple files,
and displayed as a montage.  Only complex integer files cannot be used with
these features now.

Feb. 11: Added ability to save a tiff file of the contents of memory so that
a montaged set of model snapshots could be assembled easily into a single big
image.

Feb. 12: Fixed bugs when loading subsets of a complex float image in uncached
mode, and when loading subsets of a single image file of any type when cache
is turned on with -C.

Feb. 12: Made reducemont clear out extra header information in the output
file.

Feb. 12: Fixed problem with Edit-Object-Info when there are empty contours,
caused by comparisons with psize - 1 when psize is 0, because psize is an
unsigned int.  Scanned all C code for similar comparisons, fixed a few others.

Feb. 12: Put in better sequence of tests for legality of objects and contours
in contour break and join functions.

Feb. 12: Made object, contour, and point up and down arrows in info window
cycle around instead of stopping at the bottom and top.

Feb. 14: Fixed bug in the way that clip fft -2d replicates the right half of
FFT into the left half by mirror imaging.

Feb. 14: Fixed rounding error which made pixel view window show double display
of row 1 or column 1.

Feb. 15: Made -s option in imod work for loading complex data, both cached and
noncached cases.

Feb. 16: Upgraded mrcbyte and added it to distribution, since it is a good way
to convert complex data to bytes, and to replicate the two stages of scaling
that can be achieved in imod with the -s option and contrast sliders.

Feb. 16: Added copy to previous and next section to the Edit-Contour-Copy
capabilities, added some more checks on validity.


================================================================

Version 2.41 was the first release for Linux.  The dates are 2000.

Nov. 6: Fixed Midas Makefile sync failure and changed setup to eliminate rpath
- repacked source.  Also made a new pcinstall and added comment to install 
file.

Nov. 7: Fixed plax.c sync failure.  Rebuild our libraries, but since it still
works on SGI, don't need to change distribution.

Nov. 8: Got version of tilt with subroutines that could be doctored to keep
integer truncation from being such a poison step on the PC.

Nov. 9: Fixed all makefiles to use $(CP) and $(FIND) to insulate from aliases,
to handle non-buildable programs better, and to do the conditional make on
tilt.  Fixed details in top makefile and man directories so that make src
will make a fully competent distribution.

Nov. 10: Contour moving: finish job of preventing the replacement of a contour
by a single point from happening to scattered point contours.  Also, prevent
contours from being moved within an object, which was disastrous.

Nov. 10: Fixed scripts/Makefile so it would install makejoincom and
finishjoin.  These are not in the distribution.  Also retrieved a version
of makejoincom with fixes for files of unequal sizes and made it be the
current version.

Nov. 10: Midas built on Indy instead of Indigo crashed on Octane - this is
in distribution.

Nov 10: Made imodinfo able to analyze for inside contours and compute areas
and volumes in a specified subvolume.

Nov. 11: Fixed rounding of point sizes for on-section display of scattered
points in zap window.

Nov. 11: Use OpenGL display list to draw scattered points of default size in
model display - makes big difference on PC but not on SGI.

Nov. 11: Fixed the selection of alpha blending functions so that line
anti-aliasing works properly and transparency works better.  Discovered
that transparency works better with no back faces displayed unless there is
two-sided lighting, so enabled back-face culling.  Revised help menus to
describe this, and some lighting properties better.

Nov. 13: Fixed release copies in web site to incorporate all of the above.

Nov. 14: Fixed error in calculating surface area of a subvolume in imodinfo.
Made mtk, nda and sda compute a random seed on only the first invocation of
the randomizing subroutines, to avoid repeatedly getting the same seed on
fast-running tests.

Nov. 16: Imod: fixed problems with color map not being recomputed
after cleaning model and with bad attempts to free colors (for color
index display).  Fixed problem on PC with using contrast sliders when
float button is on.

Nov. 16: Fixed makefiles in imod and scripts directories to create local links
in the bin directory for imodv and bgimodv - the link for imodv in the
distribution must never have worked before.

Nov. 16: Made Makejoincom compute how the actual rotation angles change slice
numbers, instead of assuming typical rotations, so that it can extract the
right slices and figure out if a section is inverted.

Nov. 17: Made Mtk not move items outside of the bounding contours when
randomly shifting items.

Dec. 6: Made closing the model view window via the window manager go through
the same quit routine as the q key, so that all dialog windows get closed.

Dec. 6: Made ghost mode display contours from next section as well previous
one.

Dec. 9: Fixed problem with findwarp when boundary contours are used to define
usable patches; made it require that the data not be almost all in one row of
patches in any dimension before it would find a local solution.

Dec. 10: Made TIFF and RGB saving from image windows (zap, slicer, etc) work on
PC (i.e., for TrueColor displays).  Added ability to save TIFF snaphot of model
view window - so Ctrl-S saves as TIFF, movies or montages can be saved as RGB
or TIFF, and one can save either a TIFF or an RGB snapshot under a specified
file name.  Also added option to the File menu to set the file counter to
zero.

Dec. 10: Fixed tif2mrc so that, running on either the PC or the SGI, it
can correctly convert byte, integer, and RGB tiff files originating on either
kind of machine.  Also made mrc2tif work for byte, integer, and RGB files
originating from either machine.

Dec. 11: Made Blendmont work properly on the PC, by implementing an include
file to provide the system-dependent parameter needed for specifying the
record length in the edge function files.  Implemented byte swapping so that
Blendmont on the PC can use existing edge function files written on the SGI,
and vice versa.

Dec. 12: Fixed problem in Imodmesh that was making it create glitches on PC
when joining contours on the same section.  Made it have a default resolution
for point reduction of 0.25.

Dec. 12: Put in two hacks to keep contour-fill in model view from crashing the
program on the PC, when there are colinear points at start of contour and when
the contour crosses itself.

Dec. 13: Fixed Imod bug in which contrast-floating on a section with no image
crashed the SGI.

Dec. 15: Installed new midas, a successor to manali that adopts all the
important functionality of the old midas, has new features such as ability to
zoom down large images and ability to hold a limited number of images in a
cache, and has a new set of controls and menu entries.

Dec. 19: Premature sync to new version for 2.41.

Dec. 21: Made Addtostack set the header sample and cell sizes the same as
the image size because some people are using it to compose an image stack from
files converted from another format.

Dec. 21: Changed modeling cursor to include tails on ends to make it more
visible.

Dec. 21: Implemented rubber band feature in zap window for selecting a desired
area, ability to take snapshot of or get info about the rubber band area, and
ability to resize the zap window to either the full image size or the rubber
band area.

Dec. 22: Implemented ability to read TIFF files using system-supplied
library libtiff.so, including byte, 16-bit integer, or RGB files, with
intensity scaling and loading of subsets.  Images cannot be flipped.
Compressed files can be read depending on capabilities of the system library.

Dec. 22: Implemented ability to load and display color (RGB) files, either MRC
or TIFF (but not SGI .rgb files).  Added a new -G option so that RGB-mode MRC
files can be loaded in gray-scale as before if desired.

Dec. 24: Changed Imod code to eliminate all non-suppressed warnings when
compiling for debugging.

Dec. 24: Made intensity scaling use lookup tables for byte and integer loading
into Imod, which improves loading speed ~40%.  Had the lookup take care of 
byte swapping too, so that there is no penalty in loading a file that needs
byte swapping.

Dec. 25: Added option to run image movies in imod in one direction instead of
forward-and-back.

Dec. 25: Fixed some problems with the way clip was resetting the cell and
sample sizes after cutting out a subvolume.


================================================================

Version 2.40 includes changes required to get almost everything running on a
PC under Linux.  There are lot of changes here, and dates were recorded for 
only a few, so the dates have been omitted.  Changed are listed in three
groups, and in each group ** marks items of most interest to average users,
and * marks other items of likely interest.

CHANGES IN PROGRAMS OTHER THAN IMOD AND IMODMESH

** All C programs can now automatically swap bytes if necessary
when reading from image files.  Fortran programs already had this capability
when reading from VMS files, but have now been configured to swap IEEE
floating point numbers instead.  All image files are written in the native
format of the particular machine.  This means SGIs and PCs can be used
interchangeably to create and read from image files, transparently to the
user.

** Mtk: Implemented ability to measure distances of closest approach in 3-D
between any combination of spherical items, extended lines, and meshed
surfaces, compute approximate density curves as a function of distance, and
assess the statistical significance of such density curves.  (Man page not
updated yet).

* Install script: added entries for installing man pages, fixed the statement
for IMOD_PLUGIN_DIR to used setenv instead of set.

* Subm alias: fixed and enhanced the recommended alias for "subm" in 
the "Guide to Tomography".

* Implemented system-independent ability to access files bigger than 2.1 GB in
both the Fortran and the C code, which should work as long as the operating
system supports large files.

* Changed Edmont so that it will renumber output sections sequentially from
zero, change Z coordinates in the extended image header, and work
with montaged image files without separate piece list files.

* Clipmodel: made it work correctly with index coordinates from the last image
display, work properly with models built on flipped stacks, report the
length of cut edges, and treat open and closed contours and scattered points
separately in appropriate ways.

* Tilt: had it write the header periodically, so that one can use imod to
examine a tomogram while it is still being built.

* Changed Subimage so that it can put differences between lists of
sections into a single output stack.

Copytomocoms: Fixed bug that made it crash when setting up command files for
data from "film".

Combine.com: fixed entries for using matching model files for initial
registration. 

Made Tif2mrc set all the header sizes to the same values, which was needed to
keep beadtrack from failing.

Made Clip flip all of the header sizes when flipping an image stack.

Rewrote mrcx to translate back and forth between SGI and VMS, and between PC
and SGI, so that once programs are built to swap between SGI and PC, there is
still one program that can deal with VMS files.

Implemented a faster algorithm for testing when a point is inside a contour,
and modified the scan contour conversion function to avoid many function calls
and mallocs; neither improvement speeded up imodmesh much.

Reworked the code for byte-swapping when reading and writing model files to
avoid function calls on each item; although little-endian machines are still
second-class citizens in this regard, the speed differential is now less than
a factor of two rather than a factor of 12, and byte-swapping time is now
trivial from a user's perspective.

Many changes were required to the Fortran programs to eliminate VMS extensions
unsupported by the g77 compiler.  Principal ones were replacement of ENCODES
with internal write statements, elimination of the convenient use of
structures for linear transformations, parameter statements without
parentheses, elimination of "carriagecontrol", "readonly" and "shared"
attributes when opening files, removal of "$" from common names, and a
thorough conversion of "type" to "print".  Small libraries were added to
provide trigonometric functions using degrees, and to provide calls to the
C-standard random number generator.

Stopped clip stat from trying to rewrite header with new min/max/mean.


CHANGES IN IMODMESH

** Implemented ability to store high and low resolution meshes.

** Implemented ability to handle inside contours to any level
of nesting, and to make proper transitions from an annulus to a horseshoe
shape.  Added automatic multi-point capping for elongated contours, and the
ability to use a looped-back contour to form a more complex cap.
Distinguished between open contours in open objects and "horseshoe" contours
that are open contours in closed objects, so that outside surfaces would be
defined properly when meshing between open contours in a closed object; fixed
problems with meshing between open and closed contours.  Allowed multiple open
contours to be present on a given slice, and had it join the most closely
associated pairs of such contours instead of joining all open contours to each
other.  Added the ability to mesh open contours by surface number also.

* Implemented the percentage overlap option, and fixed a
bug that had eliminated ability to mesh at z intervals greater than 1.

* Made it able to evaluate the appropriateness of joining two
contours on the same section by making sure there was overlap in the joined
region with a contour on the adjacent section.  This removes the proximity
requirement for contours to be joined.  Made it find the closest approach
between two contours even if it is in the middle of a long line segment, which
can happen with point reduction.  Made it handle tubules emerging inside an
inside contour.  Improved the code for finding the transition from donut to
horseshoe.

Fixed bug that kept imodmesh -S from working (meshing by surface) if
any surface was empty.

Fixed bug in the handling of open contours in a closed object that
only showed up for contours going in a certain direction.  When an open
contour is joined to a closed one in the same section, made sure that the
joined contour inherited the openness and endpoints of the open contour, so
that it would mesh correctly.

Switched to using qsort and bsearch in imeshReMeshNormal.


CHANGES IN IMOD

** Implemented low resolution meshes that can be toggled to in imodv.

** Rationalized concepts for inside-out contours, two sided lighting,
open or horseshoe contours, and the contours needed for making complex caps.
Made the "Closed Options: IN - OUT" buttons read "Front Surface: Outside
-Inside", and made imodmesh reverse the direction of the skins when the
Inside option is selected.  Added two-sided lighting as an object display
option.  Added a menu entry Edit-Contour-Loopback to create a complex cap.
Changed help text appropriately, and explained the proper meaning of open
contours without referring to "horseshoes".

** Added size-dependent resolution for point display in imodv, limited
the sphere drawing quality to 4 levels, and added a low resolution mode as
well.

** Multiple image files: Added the ability to enter several image files on the
command line, which are then treated as images at separate "times", just as if
the files were listed in an image list file.

** Allowed files of different sizes to be displayed from an image list or
multiple entries on the command line.  The displayed size of the minimum of
the various sizes in each dimension.

** Loading of subsets of cached images: Fixed all of the problems involved in
loading subsets with the -x, -y, or -z flag, with all kinds of cached data,
namely montaged or piece-list data, regular files loaded with -C, and multiple
files entered on the command line or in an image list file.

** Flipping of images and models: Fixed problems with flipping on all kinds of
data, so that any kind of loaded data, including subsets, can be flipped on
startup with -Y or while the program is running.  If a model built on a
flipped image stack is loaded without an image, then saved, its flipped
character is now properly preserved.

** Added a montage maker to the model view movie maker, so that one can
automatically take snapshots of overlapping, zoomed up displays of the model.

* Made rgb's saved from Imodv have 4 digit numbering.

* Added ability to give a filename for an rgb snapshot from Imodv.

* Changed the Edit-Object-Color window so that Cancel will restore the color
that the object had before the window was invoked, and so that color is
changed and the model redisplayed when the user drops the slider if running
with an rgb visual.

* Made keyboard input go back to the Zap window after a new number is typed
into the section number or zoom text box.

* Made zoom 1.5 display with true interpolation if the high resolution button
is on.

* Made the filename be the default time label for an image entered in an image
list file; a TIME entry overrides that.

* Imodv: eliminated duplicate model display on startup, and triple model
display when going into stereo, although it still displays 2 or 3 times when
leaving stereo.  Also eliminated some duplicate model displays when the model
is moved or rotated with the mouse, and when a new model is read into imod.

* When a new model is read into imod while the imodv window is open, the new
model is now properly displayed instead of the old one, and disaster is
averted.

* Added Edit-Contour-Fix by Z to allow one to break a closed contour that had
accidentally been drawn on more than one section into one contour per section.

* Added Edit-Contour-Fill In.  For an open contour that moves in Z and doesn't
have points on every successive Z slice, the program will fill in the gaps in
Z by interpolation between existing points.

* Auto contouring: recoded the searches for pixels inside and outside the
flooded area to use a ring buffer instead of recursion, which was going too
deep for the PC and was very slow.  Added protections in case the image is
flipped when the auto window is auto.

* XYZ window: Rationalized the display of the current contour with that of
other contours.  Had it manage and use the "wild" flag correctly, and display
open or closed contours correctly if they were on more than one section.
Fixed an error in model positioning on the X/Z and Y/Z panels when zoomed up
or down.  Limited the size of the window to the size of the screen, and set it
up to find an initial fractional zoom that would make the window fit in the
display.

* Doubled the Z-extent of the clipping box in imodv; it is now 10 times the
lateral extent of the window.

* Implemented Edit-Model-Clean to delete all empty objects.

* Added option to preserve point sizes of points with the default size in a
scattered point object, when moving contours to another object.  

Fixed bug that kept the window for choosing a model from opening a second time
if it was closed with a cancel.

Fixed truncation bug in using the left mouse button to increment the
Z scale slider.

Fixed bug when reading piece coordinates from image header
(failure to allocate memory for coordinates).

Extirpated the horseshoe flag from icont.h and switched all references
from it to ICONT_OPEN, which was already defined to have the same value.

Time labels in zap window: had it make the toolbar long enough to fit the
longest label.

Made current directory changes work properly when using an image list file
that is not in the current directory.

Movieing in model display: Revamped movie logic to eliminate interlocked
time-outs and workprocs, and to use just a workproc after the movie starts.
This may prevent its occasionally falling into a CPU-intensive coma.

Added a "Save Model" button to the view editing window to make it clearer that
saving is needed to really store a view.

Fixed bug that kept the line tracker from working if it was opened while the
image was still loading.

Fixed bug in time output when model file is saved.

Fixed bug that crashed imodv if the command to open the object list window was
given twice.

Fixed bug in which the Edit-Contour-Move window had the wrong number of
objects when it first started.

Fixed bug in coding of menu acceleration keys.

Eliminated CTRL-S as a hot key for saving the model from imodv; this will 
eventually be used to make a tiff snapshot.

Found out how to constrain the geometry of the Imodv-Edit-Objects window so
that it reopens at the right size for all menu panels on the SGI, and doesn't
do weird expansion of the top-most panel on the PC.

Set the widget attachments in the slider window so that the sliders wouldn't
become half as small when the window was resized on the PC.

Tumbler window: implemented proper "traversal" so that keyboard input would
always work; fixed some problems with intensity scaling and made it update
when contrast sliders changed; tried to speed it up by eliminating function
calls to fetch pixel data; fixed problems caused by failure to initialize
angles.

Fixed problems with initial setting of some buttons in auto window and depth
cue window.

Slicer: to clear the lower-left part of the window when zoomed up at
low-resolution, switched from pixel draws, which crashed sometimes, to a box
clear.

Slicer: fixed display of the red slice in the graphic cube to work at all
zooms and for high as well as low quality.  

In Edit-Contour-Move, disabled the option to replace a contour with a single
point if the contour consists of scattered points.

Eliminated ghost display in the zap window for scattered points or for
contours that are not all in one Z-plane; made open contours show up as open.

Made sure that all dialog windows are closed properly when the model view
window is closed, so that they can be reopened again.

Made the object color be set in the info window when a new model is read in.

Major changes were required to get image display to work with TrueColor (rgb)
rather than PseudoColor (color index) visuals, since the PC did not support
Pseudocolor.  All image displays now handle both kinds of visuals.  The
contrast sliders are handled a little differently, so that the number will
be displayed as the slider is dragged, even though the image is not
redisplayed in rgb mode until the slider is dropped.  Modification were also
needed to prevent double image display with an rgb visual with the float
button turned on.



================================================================

Version 2.31 is a minor release, mostly with changes in programs other than
Imod:

SOLVEMATCH: Implemented ability for Solvematch to start with a small
subset of known correspondences and find the rest.

FENESTRA: Fixed problems with Fenestra so that it can handle openings
facing anywhere in the X/Y direction. 

TILT: Speeded up the Tilt program by eliminating boundary checks from
inner loops: it is about 2.7 times faster without X-axis tilting, 3
times faster with X-axis tilting, and 1.8 times faster with local
alignments.

INTERPOLATION: Speeded up the interpolation routine used by Newstack,
Tiltxcorr, and a few other programs by eliminating boundary checks
from the inner loop, and substituted cubic for quadratic interpolation
with no loss of speed.

JOINING TOMOGRAMS: Wrote shell scripts and guide for joining tomograms
from serial sections.

3-D DISTANCES: Generalized code in Mtk to analyze 3-D distances
between any combination of points, lines, and meshes (Man page not
updated yet).

Here are changes in Imod itself; dates are 2000.

Jan 31: fixed bug in edit-object-clean; needed to run loop backwards.

Feb 1: fixed bug in scan contour conversion that gave improper connections in
imodmesh.

Feb 2: fixed problem with high quality and regular mode not being distinguished
in double buffering with fractional zooms.

Feb 9: Made left mouse button clicks on Go To Surface slider skip across empty
surfaces just as the up and down arrows do.

Feb 9: Fixed problems with picking current point with the right mouse button
when displaying subsets (e.g. current surface) in imodv window.

Feb 10: Fixed problems with new version of scan contour conversion, handling
cases where the contour reduces to only two points or to a single horizontal
line.

Feb 29: Fixed bug that crashed imodmesh when connecting across skipped
sections.

Mar 2: Fixed bug that crashed imodjoin when no object list given for second
model.

Apr 20: Added time output to report in info window when a file is saved or
autosaved.

Apr 20: Fixed bug so that new Y and Z size would appear right away after
flipping an image.

Apr 21: Added menu entry to fix a closed contour that goes across sections by
mistake by breaking it into separate contours, each in one Z plane.  Changed
point adding with middle mouse button so that a new contour would be started
(with warning) even if existing contour has only a single point.

================================================================

Version 2.30 includes many changes in programs other than Imod:

IMODMESH: Fixed bugs with meshing of open contours as tubes.  Eliminated some
inefficiencies and recoded to alleviate quadratic increase in execution time
with increase in the number of contours, so it is now 20-30 times faster with
very large models (~10,000 contours/object).  Eliminated duplicate storage of
meshed model to save memory, but there is still a memory leak somewhere.

TILTALIGN and TILT: implemented local tilt alignment and ability to generate 
a reconstruction using these local alignments while correcting for a small tilt
around the X-axis.

MIDAS: this mixed Fortran/C program, ported from a Vax, is a predecessor to
manali that allows mouse control of shift, rotation, and stretching as well as
some other convenient features.  It is now included in the distribution, until
manali is modified to incorporate MIDAS's desirable features.

BLENDMONT: Revamped the code for blending information where 3 or 4 pieces
overlap so that there would be smooth transitions from these regions into the
regions covered by 2 pieces or 1 piece, especially with a sloppy montage.

TOMOGRAPHY: Included revised master command files and shell scripts for 
generating command files for a particular data set.  Improved procedures for
combining two tomograms obtained from tilting around two axes, including
automatic use of warping where necessary to obatin a good fit.  Made the
latter procedure easier for users to run without editing the command file.
Revised the tomography guide and made a new, up-to-date HTML version with links
to all man pages.

FORTRAN PROGRAMS: Updated all programs to allow model sizes of 5,000,000
points, image sizes of at least 2K x 2K, or larger in some cases, and filename
lengths of 80 characters, and to have "print" statements instead of
non-standard "type" statements.


Changes to Imod itself are listed next; dates are generally 1999, with most
undated entries made in December 1999.

Dec 28: fixed bug that made slicer crash when zooming down below 1.

Dec 28: fixed bugs in routines for reading Y planes from integer or float
files, so that cached data may be flipped.

Jan 18: Fixed bug in slicer multiple-slice display with zoomed-up high-quality
mode so that the correct number of slices would be summed.

Feb 15: Added ability to have a size value for each model point, which
controls the point display size for scattered points.  Added ability in
Contour Move window to convert the current contour into a single scattered
point of the equivalent area.

Feb 15: Made sure wild flag was set properly when reading in a model without 
an image.

Feb 16: Changed bead fixer plugin so that it could go to one series of
residuals after another in the log file from a local tilt alignment.

May 29: Changed high-res mode in the zap window so that when one pans with the
mouse, it drops into low-res mode while moving.

Aug 12: Made the Move buttons in IModv object edit window operate on all
models, not just current one.

Aug 12: Fixed bug so that zooming down from an entered, fractional zoom, goes
to next fixed zoom; and prevented negative zooms from being entered.

Changed high-res mode in slicer so that it only interpolates once per actual
pixel, forms a projection of multiple slices at these pixel positions, and
then uses cubic interpolation to make the display image.

As another speed trick, slicer was given its own routine for fetching data
from the cache, so it could look up all slices by Z value in advance of
getting each pixel.

Adjusted coordinates of a mesh when reading in a model on a subset of the
image, so that the mesh and contours would display at the same position.

Made sure the wild flag was properly maintained when breaking or joining
contours or deleting points.

Fixed problem of zap window not popping up without a mouse event after startup.

Fixed bugs in autocontouring (Next button not working right, Build without a
filled area hung program), and made it generate multiple contours if the
filled area is no longer connected after a shrink operation.  Also switched
to a point-reduction routine as is used in imodmesh (-R) and the line tracker.

Fixed problems with using slicer to view multiple flipped tomograms, and made
sure the cache was set to an appropriate size when flipping cached data.

Made it update the info window properly when doing auto-section advance after
adding a point.

Made Object Move and Contour Move be able to remember two different
target objects.

Revamped the handling of surfaces.  Instead of having a slider control surface
number of current contour, one changes surface number of an existing contour
only by moving it to a different surface in Contour Move.  Provided arrows
and hot keys for moving to the next or previous contour within a surface or
to the next or previous surface in an object, and a slider for going to a
selected surface.  The Contour Move window allows one to move contours to
either a different object or a different surface.  Added help text
to make it clear what happens to surface numbers when copying.
Added Edit Surface Move, Go To, and New menu entries.

Implemented an Object List window in Imodv, containing the name and number of
each object and a toggle button to turn it on or off.

Added a Subsets panel to the Imodv Edit Objects window to provide a way to
display just the current object, surface, or contour in the model view window.

Added numbers to the Near, Far, and Perspective sliders in the Imodv Edit
Controls window.

Fixed bug that crashed program when a piece list specified Z coordinates not
starting at zero.

Added ability to read piece coordinates directly from the image file header
for montaged data.

Made left mouse button click far from a model point in model mode update the
slicer window position.

Made hot keys to align a line between first and last points in contour to the
X, Y or Z axis in slicer.

Made it take current section as reference for floating when the float button
is clicked on.

Made Contour Join preserve all points in both contours if joining scattered
points.

Added Edit Object Clean to delete empty contours.

Added Edit Contour Invert to invert the direction of a contour.

Fixed rounding error that kept left mouse clicks from being able to increase
Near and Far sliders by one in Imodv Control window.


Version 2.20 includes the following changes (all 1998):

July 21: Imodv object edit: when turn on an object with its check box, it
becomes the current object for editing.

Aug 19: imod_cont_edit.c, made char array longer for the description of the 
selected point, stops program from crashing when start contour join.

Aug 19: For contour joining, made sure the current point and contour after the
operation was the first point after the join.  For open contours, made it join
things sensibly when set 1 is the start of a contour and set 2 is the end of
another contour, instead of wiping out all but 2 points.

Aug 19: Fixed bugs in auto-section advance and setting of the wild flag (which
keeps track of whether a contour is in one Z plane) when points are being
inserted before the current point.

Aug 21: Fixed bug in initialization of wild flag - it had to be scanned for
after flipping model, and regardless of whether model is read in initially or
via the menus.

Aug 28: Fixed bug that caused crash when doing Edit-Object-Move.  Label data
or lack thereof was not being copied correctly, when contours were moved.  Also
fixed bug if try to move contours to the same object that they are in.

Sept. 17: Joining contours: eliminated error message when contours not in same
object, added error message if a set point is past end of contour.

Oct. 24: Added Window and image size and coordinate output to Zap hot keys.

Oct. 26: Truncated filenames in Imod info window to keep it from getting huge.

Oct. 26: Added sorting points by Z value and clarified menu and help with
regard to the original "sorting by distance".

Oct. 27: Set model checksum before image load, so that if the user quits
during image load, it no longer asks whether to save the model.

Oct. 28: Added a kludgey system call to find out how many imods are
running on the machine and pick the colormap based on that.  Also increased
spacing between colormaps from 300 to 330, to allow up to 74 objects without
interference between colormaps.

Oct. 28: Added a Stop button to the imodv movie maker.

Oct. 31: Added the movie controller window to adjust limits to display during
a movie, and to control the frame rate.  Made the rate change in geometric
steps and modified the time-out code so that the rate would be independent
of display time (until display time becomes the limiting factor).

Nov. 1: Fixed problems related to the Model Edit window and the display of
multiple models.  Rearranged the sequence of calls for setting up model
transformations and screen properties, so that multiple models could be
displayed properly in mono and stereo and manipulated together or
independently.  Fixed code related to editing models and objects in tandem
in Edit Objects and Edit Controls menus.

Nov. 2: Fixed depth cueing by shifting the model back in Z before projection
and implementing sliders for start and end distances.

Nov. 3: Fixed model rotation so that all rotations of the model or of the
object clipping plane will be with respect to the viewer's coordinate system
rather than the model axes.  Mouse movement will always cause a rotation
about an axis perpendicular to the direction of movement.

Nov. 3: Clipping plane adjustment is now much easier.  Also made clipping
plane come out in the middle of the object the first time it is turned on.

Nov. 4: Deleted unused and obsolete functions or code options related to
model display, including code that used the GL matrix operations to
compute transformations (the WORLD_ON flag options).

Nov. 4: Added Full 360 X and Y buttons to the imodv movie maker, to give
true rotation about those axes.

Nov. 4: Made , and . control rotation increment (and speed) in imodv.

Nov. 4: Added bell when there is an error saving a file.

Nov. 4: Eliminated resyncing (panning) display to current model point in the
zap window when changing section.  Also changed arrow keys in model mode so
that they pan image instead of moving "current mouse point", and made an
exemption to resyncing for this too.  Also prevented resyncing when turning on
model mode.

Nov. 5: Fixed code that referenced model coordinates to the coordinate
system of each image file, so that models will display correctly when a subset
of the image file is loaded, or when the image scale or origins are changed.
This works on flipped and unflipped image volumes.  Implemented a new bit in
the flag that is saved with the model, which indicates that tilt angles were
stored with the model.  Thus a model will display correctly on a subset volume
that has been extracted and rotated with ROTATEVOL.

Nov. 5: Fixed bug that kept time labels from displaying in Zap toolbar.

Nov. 11: Fixed bugs in image processing window so that Apply always works on
the original image and the original image is changed only if Save button is
pushed; added a More button to apply an operation to the current, already
processed image.

Nov. 11: Changed help dialog windows to be top level shells instead of
dialog shells so they wouldn't be parked if the IMOD infor window is parked.

Nov. 11: Fixed F9 and F10 to switch between colormaps, fixed initialization
of additional ramps, and made F10 cycle through the 4 maps instead of just
selecting a second one.

Nov. 13: Implemented a contrast "float" feature which adjusts the sliders
according to the mean and standard deviations of each image to maintain
constant brightness and contrast through the stack, just as if the images
had been floated to mean in newstack.

Nov. 13: Fixed bug, to allow XYZ input specification in image list file.

Nov. 13: Allowed a new model to be opened under a file name given on command
line when the file is not found.

Nov. 14: Had the imodv movie maker resolve the change in rotation into a
rotation around a single axis and rotate by regular increments around that
axis; made zoom change by a factor instead of an increment; added a reverse and
a "long way around" check box; made dialog box smaller.

Nov. 18: In imodv, had it set the menu lighting flag based on the value of the
lighting flag in the initial model view.

Nov. 19: Made Zap window set up cursor correctly if it is opened in model mode.

Nov. 19: In the movie routine, had it flush and process events after each
display, so that the movie will not be unstoppable when loading cache.

Nov. 20: Fixed transparency - seems to work on all SGIs.  Fixed code for
assessing whether there are alpha planes.

Nov. 21: Got the "throwing" feature working: when the model is movie-rotating,
moving the mouse while holding down the second button will start it rotating
in the given direction when the button is released, with a speed proportional
to the distance moved.

Nov. 26: Fixed bug in saving and restoring clip planes in stored views.  Also
made sure that a shifted but unrotated clip plane that is turned off will be 
saved in model file.

Dec. 1: Kept slicer from crashing program if started up while movieing, and
improved the fix for keeping the XYZ window from crashing it also.

Dec. 1: Discovered hot keys for changing depth of model or image display in
slicer, made them update the text displays of these values, and documented
them in the help display.

Dec. 5: Got slicer to pass keyboard input to the window after using sliders or
other controls; programmed numeric keypad keys to change the last adjusted
angle by 0.1 or 0.5 degrees or set it to zero.

Dec. 7: Made slicer use the same zoom steps as the zap window, including
zooming down below 1.

Dec. 10: Fixed bug in image scaling when non-byte images are read in with
an image list file; made intensity floating and image scaling/reloading
work properly with multiple times.

Dec. 10: Made Graphing along a contour keep track of distance properly, and
work properly in 3-D.  Restored G to open Graph window.

Dec. 10: Miscellaneous fixes while updating man page and help screens:
eliminated R to reload since it no longer worked; added i in Zap window to
toggle modeling direction; made sure info window is updated when switching
to an empty object with o or p.

Dec. 11: In slicer, inverted the sign of angles, and allowed Y and Z angles to
go from -180 to +180 degrees, so that all possible orientations of the volume
can be achieved.  Added hot keys to rotate so that the current and previous
model point are oriented along the X, Y, or Z axis.

Dec. 13: Made changes to ensure accurate modeling in the slicer.
Reworked coordinate calculations in slicer so that the low resolution
image will display as close as possible to the high quality image and so that
positions picked by the mouse will be converted accurately to image volume
coordinates.  Made it use fractional Z values for the center of the display
when inserting or moving a point in model mode, so that one can model within
a slice without the slice changing progressively due to truncation of Z
values.  Made image and model display work accurately with Z-Scaling both
before and after slice rotation.  Expanded help display.

Dec. 14: Cleaned up code in slicer; eliminated single-slice display and made
multi-slice routine work properly for single-slice case.

Dec. 14: Made middle mouse drag add points to contour properly, regardless
of insertion direction or whether at the end of the contour.

Dec. 16: Set color ramp and sliders correctly when reading in a model through
the menus.

Dec. 17: Made left mouse click work properly for sliders in contour move and
depth cueing operations.

Dec. 19: Made images with piece list Z values not starting at Z display
from the lowest to the highest Z value instead of from absolute 0 Z.  Had it
subtract the minimum X, Y and Z coordinates in the pieces from the model
offsets so that models would display correctly when moved from one stack to
another as long as piece coordinates correspond between the two.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Version 2.10 is the first version that David Mastronarde released.  It includes
the following changes:

Saving RGBs: fixed bug in which it was saving the back buffer instead of the
front.  On Octane, it would always return an image whose X size was a multiple
of four, so as a the workaround to this system bug, the X dimension is rounded
down to a multiple of 4.

Model display in imod, using right mouse button to pick a new current point:
Fixed bug that caused crashes.  Made buffer much bigger to handle models with
more points.  Had it pick the front-most point within the box around the
cursor.

File names on windows: add a line in the Info window to hold the image file
and model file names, so that info windows from multiple imods could be
distinguished.  Made sure names were maintained properly as different model
files were read; added model file names to various imodv windows as well.

Help windows: made the code properly count lines of help text as they will
be displayed with 80-column lines and word wrap - so now windows are opened to
the right size to see all of the text.

Added numbers to the sliders in the imod Edit Object Color window, and to
various frames in the Imodv Edit Object window, i.e. Line Color, Fill Color, 
Mesh View, and Material.

Imodv Edit controls: zoom down arrow was zooming it down 10-fold; fixed this. 

Fixed the bug that kept the proper colors from being displayed in the
colorpanel in the Imodv Edit Object window, and made this panel change
dynamically as sliders were moved.

Put in workaround to system bug that made the upper frame of the Imodv Edit
Object window expand in height whenever the object # changed between 1 and 2
digits.

Fixed bug in Edit Image Reload function, reorganized window and rewrote help
text to make it clearer, had it calculate scaling limits that would preserve
current contrast with sliders moved to 32 and 223, added featured to
recalculate these settings based on a new current contrast.  So, the window
can be used to easily back off on contrast for an image that comes in with too
much contrast.

File saving: made it rename an existing file as backup if one does a SAVE AS
with an existing file name (previously it would just blow away the earlier
file.)  Added a temporary "double-backup" system in case of errors in the
saving operation, so that an existing file and its backup would be retained.
Made it clean up autosave files scrupulously when the model file name is
changed.

Expanded help text for new features and fixed a few mispellings - a chunk of
work could be done on this overall.

Stereo on Octane: fixed bug that was introduced by making it return from
stereo to full screen size.  Rationalized code so that it set fallback
resources, set up default resources, read resources from the system
properly, and used the proper variables to enter and leave stereo.
Made sure this worked on all machines in both imod and imodv.  Still needs
major cleanup.

Made stereo window move to top of screen if it was going to go off the bottom,
made it shrink in width if >1280, and move to left if it was going to go off
left side.  Had stereo image appear at same effective zoom as mono window
(needs more work - some models now zoom down by 2).
Changed default stereo angle to 5 degrees from 3, appropriate for viewing from
70 cm away.

View selection in the Move frame of Imodv Edit Objects: added 6 buttons and
organized in columns so that one can move through a series of views with
rotation about a single axis.

Color selection for objects past 12: fixed bug that was cycling only through
red and giving the same green and blue each time.

Fixed bug in false color map at index 64.

June 23: In dia_sgicolor.c, used a flag to keep track of color allocation,
rather than the pixel value, because the latter came through as zero for a
black background when running imodv and setting background color.

June 23: In imod_menu.c, fix bug in Edit Object Move to actually move all
contours.

June 23: Fixed scattered point display in zap window; size is now properly
based on size of the circle for a sphere cut by the given plane.

June 23: Made all calls to mrc_read_byte save the header before and restore
after.  This was required for pixelview to read ints and floats correctly, and
for pixelview, graph, and who knows what else to read data from file correctly
when a subset of the image file was loaded in.  This will probably break
something else.

June 23: Fixed bug to make current point marker come out in the middle of the
pixel.

June 24: mrcfiles.c: add extra header size regardless of file creator flag.
Now imod can read all MRC files with extra headers.

June 24: Implemented direct report and control of model view scaling with an
edit field in the control window.  Also fixed the problems of rescaling when
going into and out of stereo.

June 24: Made the mousemode flag in xzap be a member of the zap structure
so that the mouse changes in all zap windows when going to model mode.

June 25: Fully implemented the ICONT_WILD flag so that each contour in the
model is scanned when a file is read in, and the flag is set for contours that
don't stay in a z-plane.  Then, the flag is set when a point is added or
modified that does not match the z-plane of the first point.  Now closed
contours that cross sections display correctly, and open contours that do
not cross sections can be skipped over rapidly as well.

June 25: Fixed bug in automatic starting of new closed contour and prevented
starting a new one if there is only a single point - but gave a warning in
this case.

June 25: Implemented a "smart" centering in the zap window: recentering occurs
only if the point is within 10% or 50 pixels of the edge of the window.  Added
control button to zap toolbar to switch between this and full centering, and
reduced the lock button to simple lock-unlock function.

June 25: Implemented auto section advance that goes in the direction of the
last two model points, or doesn't advance if the points were on the same
section.

June 25: eliminated confusing display of current point off-section when it is
the only point in an open contour.

June 25: Fixed reading of piece lists so that the number of items in the list
can be less than the number of sections in the file.  Eliminated both X and Y
offsets from piece list coordinates because they were not being dealt with at
all, and made sure that positive or negative offsets in Z were properly dealt
with.

June 25: Changed the computation of model checksum so that small changes would
not be lost.

June 25: Fixed bug on reading in a new model into imod when there is no image
being displayed ; had to have it skip transforming the model.

June 25: Had it compute a model checksum when initially reading an image file
descriptor, so it wouldn't ask whether to save the model after no modeling.

June 26: Substituted a false color table with a slightly broader range of
colors and better contrast resolution over the whole range.

June 26-27: Added ability to save object characteristics as part of saved
views in Imodv; the information is also saved in the model file with backward
compatibility, so no new model version is needed.  Revamped the logic of the
Edit Views window so that there is an "Original Default View" and not an empty
"View 1"; made the title of the selected view display properly in the edit
field and made sure that a view could be selected with either "Goto View" or
double clicking on the title.  Rewrote the help text.

June 27: Rationalized model scaling so that it would come out the same for
each of the various paths through which a model can be displayed.

June 29: Fixed a bug that caused lighting to be turned off the first time one
switched off double-buffering.  Could not find out why there was an extra
expose event and extra redisplay when switching buffering.

June 29: Added checkboxes for all model objects (up to 48) in the Imodv Edit
Objects Window, to make it easy to turn selected objects on and off.

June 29: Made it so this if one switches display type from contour to mesh, and
display style is line, it will switch automatically to fill; and similarly
fill will go to line when going from mesh to contour.

June 30: Fixed another bug in the selection of new colors for objects beyond
12, and set it up so that the new colors would be based on a fixed cycle of
values rather than on previous object.

June 30: Made Save Model and Save As in Imodv save the previous version as
backup instead of blowing it away.  This is not as elaborate as the backup
features in the imod main modeler, but it's a lot better than no backup.

July 1: Eliminated a few items from the Zap keyboard input list, augmented
the zap help window with complete toolbar and special hot key listings,
revised main hot key and menu help windows, moved Process from
Image to Edit Image menu, and moved Pixel View from Edit Image to Image menu.
Updated the imodv help windows also.


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Version 2.02 is the last version that Jim Kremer produced.

Version 2.00
	- Fix bug that caused 2d Cross-correlation on non-square images
	  to report bad peak values.
	- Added ability for imodmesh to skin a range of z values.


Version 2.00b7 March 11, 1997
	- Fixed some bugs with 8-bit displays.
	- Added rgb type to the raw2mrc program.
	- Fixed major bug in imodmesh that caused bad skins to be made unless
	  the -T option was given.
	- Fixed hardware stereo-rendering on SGI's for imodv.
	- Fixed bug that broke model view when imod was started with no image.
	- Added model mesh functions to the imod software developement kit.

Version 2.00b6 Jan 23, 1997
	- Fixed display of sections with negative Z values.
	- Centered 3D spheres properly in zap window.
	- Slicer window now updates colormap properly.
	- Moved lighting and depth cue in imodv from object edit to
	  the View menu in order to make the effects global.
	- Fixed single buffer, near, far and perspective controls in imodv.
	- Made imodv views dialog usable.
	- Made fixes for building on DEC alpha.
	- Fixed core dump on clip functions brighten, contrast, edge,
	  resize shadow and average.

Version 2.00b5 Sep 19, 1996
	- Fixes to imodv: cindex mode, movie, background, stereo.
	- Several fixes to the manali program.

Version 2.00b4 Sep 6, 1996
	- Added picking of contours in model view window.
	- Added plugin module support.

Version 2.00b3 Aug 23, 1996
	- Several fixes for machines with 8-bit graphics.
	- Fixed contour copy and join bugs.

Version 2.00b2 Aug 9, 1996
	- Several Bug fixes.
	- Multiple zap windows can now be opened.
	- Rendering at 1.5x magnification optimization.

Version 2.00b1 Jul 19 1996

	- Enhanced zap window tool bar.
	- Fixed OpenGL network display bug.
	- Fixed window resize bug that cropped up on some systems.
	- All programs now use shared libraries.
	- Added Hardware support for StereoGraphics eyewear for SGI's.
	  imodv can now render models using hardware stereo.
	- Updated manual pages.

	Some new experimental features are added:
	- Added image cache; Imod can now display large serial section
	  data sets, limited by drive space, not memory.  
	- Added image piece lists for serial sections.  Now imod can
	  load montaged data sets, and skip missing sections of data.
	  Added image time lists for viewing time series 3-D data sets.	
	- Limited support for 4D data sets. Data sets that contain	
	  time data as well as x, y and z.

Version 1.21a (For Irix 5.3 Only) Feb 1996 :
	- imod does all rendering in OpenGL. imodv and imod are now the
	  same program.
	- Fixed bug in imodv that slowed rendering down.
	- Added more contour info to imodinfo.

Version 1.21 Jan 1996 :
	- imod no longer leaves #autosave# files around when not needed.
	- It is now possible to exit imod while loading files.
	- Fixed startup option bugs for imod. The -s (scale)
	  option didn't work on byte type data, and the -x & -y options
	  sometimes didn't work on short or float image data.
	- Added toolbar to Zap window in imod.  Toolbar contains new fuctions,
	  HQ graphics, Insert, Lock and Help.
	- The Z down button in imod's Information window used to move the
	  X coordinate instead of the Z coordinate. :(
	- Tomographic images can now be flipped inside of imod.
	- Improved save image performace in xmrcv.
	- Fixed bugs in the contour break and sort functions in imod.
	- New program, imod2rib, creates a Pixar RIB format model file
	  from an IMOD model file.
	- Bug fixes for imodv: Fixed scaling problem for unfilled scatterd
	  contours.  Filled contours shaped like an (8) can be drawn. Added
	  clipping planes for objects.
	- Fixed snapshot bug in imod for all image windows.

Version 1.20 Oct 1995 :
	- First release for Solaris and VMS.
	- All image windows in imod were enhanced.
	- Imodv rewritten in OpenGL/X11/Motif.
	- Fixed units reported in imodinfo.

Version 1.11 04-26-95 : 
	- Improved Skin rendering and added snapshot to imodv.
	- Fixed major bugs in imodmop and imodcmopp.
	- New program, imodmesh, added to skin contour data.

Version 1.1  03-27-95 : General bug fixes, enhanced slicer window.

Version 1.0  10-06-94 : Initial release.



Thanks to the following for reporting and/or fixing bugs.

Chris Pudney
Hossein Tahani
John Harwell

