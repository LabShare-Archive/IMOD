<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>Isosurface View</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 2.0  (Unix)">
	<META NAME="CREATED" CONTENT="20080425;13470700">
	<META NAME="CHANGEDBY" CONTENT="Xiong Quanren">
	<META NAME="CHANGED" CONTENT="20080425;15212900">
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<H3>Isosurface View Dialog</H3>
<P>
This dialog allows you to display isosurfaces of the input volume
or a subvolume of it.  An isosurface is a surface generated at places where
the intensity values cross a threshold value set by the user.
The subvolume is specified by a bounding box whose position and size
are set by sliders.  Isosurfaces are displayed when this dialog is
opened but will be removed when you close the dialog. 
<P>
The isosurface mesh and the bounding box are store in two "extra objects".
Their display properties can be edited in the Model View Object Edit dialog.
The extra objects that can be edited are listed after the last regular object
in the model; just use the slider or spin box there to get to them.
<P>
If you click on a position in the isosurface with the right mouse button,
that position becomes the current point within 3dmod, thus allowing
you to find corresponding features in the image data.
<P>
The computations will be done with multiple threads running in parallel if the
system has multiple processors.  Doing
so incurs some extra overhead and the computation time also does not reduce
proportional to the number of processors used and may even increase with more
than 4 threads on an 8-core system.  Thus, the maximum number of threads used
is 4, regardless of how many processors are available.  Up to 4, the number of
threads is set by the apparent number of processors on the system, or by
the value of the environment variable IMOD_PROCESSORS if it is set.
If your machine has hyperthreading enabled, the program will probably run
better if you avoid using hyperthreads by setting
IMOD_PROCESSORS to the actual number of cores on the system.
You can experiment with your system
by setting IMOD_PROCESSORS to various values and starting 3dmod with the
-DU option in order to see some time outputs.  Display a large portion of a
volume so that processing takes hundreds of milliseconds.
<P>
The isosurface display is based on contouring and surface smoothing
modules from Chimera, developed at the Resource for Biocomputing,
Visualization, and Informatics at UCSF.
<P>
The controls in
this window are as follows:
</P>
<P>
<B>View isosurfaces</B> selects whether the isosurfaces will be
computed and displayed.
<P>
<B>View user model</B> selects whether the regular model is displayed
as well.
<P>
<B>View bounding box</B> selects whether a bounding box around the
data will be displayed.  When it is being displayed, it will also show
up in the Zap window regardless of what section is being displayed.
<P>
<B>Keep box centered</B> controls whether the dialog will center the
subvolume being rendered in the model view window whenever its size or
position changes.  The subvolume is also centered when this box is turned
on, so you can use it to center the volume even if you do not want to
leave it on.
<P>
<B>Binning</B> selects the amount of binning of the data in 3D; e.g., with a
binning of 2, each voxel used for computing the isosurface will be the average
of 8 adjacent voxels.  Binning will both increase the speed of the display and
smooth the surface considerably.
<P>
<B>Smoothing</B> selects the number of iterations of a smoothing
routine that moves each vertex of the isosurface toward the average of
neighboring vertices.  Some of the change in appearance when you turn
on smoothing may reflect a change in the way the normals to the
surface are computed.  These normals control how light reflects from
the surface.  With no smoothing, they are computed from the image data
by the Chimera code, but with smoothing, they are recomputed from the triangles
in the usual way for IMOD meshes.  Note that another way to get a
smoother display is to restart 3dmod with the image loaded binned.
<P>
<B>Delete small pieces</B> can be turned on to eliminate small
pieces not connected to the rest of the surface.  The threshold size for
eliminating pieces can be adjusted with the <B>Min size</B> spin box, which
sets the minimum number of triangles required in order to retain a piece.
There is significant computation involved in identifying the small pieces, so
you may need to turn this option off while adjusting other features, then turn
it back on.
<P>
Below these controls is the <B>histogram</B> of voxel values inside the
bounding box.  The histogram is based on the byte values stored in
program memory, not the values in the image file.
<P>
<B>Threshold</B> sets the constant intensity
value at which the isosurfaces will be rendered.</P>
<P>
<B>Link to global X, Y, Z</B> controls whether the coordinates selected in the
sliders below will be linked to the current point coordinate in 3dmod image
display windows.  If it is on, then changing these sliders will change the
current point in 3dmod and affect other displays; also, any change in current
point within 3dmod will change the center position of the bounding box.  If it
is off, then the coordinates selected here become independent of the current
point.  Turning the option off allows you to right-click on the isosurface
without having the isosurface display move to a new position.
<P>
The <B>X</B>, <B>Y</B>, and <B>Z</B> sliders will track the
current point coordinate in 3dmod image display windows and can be
used to adjust the center position of the bounding box.  The bounding
box will center on the coordinate unless that would result in the box
size being smaller than the slider value. 
</P>
<P>
The <B>X size</B>, <B>Y size</B>, and <B>Z size</B> sliders can be
used to set the X, Y, and Z size of the bounding box.  The maximum
values of these sliders are set so as to prevent you from trying to
render too large a total volume, which is especially time-consuming when
the threshold is near the middle of the intensity distribution.
</P>
<P>
The <B>Use Rubber Band</B> button can be used to set the size and
center of the bounding box in X and Y from the position of the rubber band in
the top Zap window.  The size will be limited to the maximum size
allowed for this display but the center position will be the same as that of
the rubber band.
<P>
<B>Save</B> is used to create two new objects containing copies of the
isosurfaces and the bounding box.  Until you do this, these items are
kept in "extra objects" that are not saved with the model.  This button is the
only way to save the isosurfaces in a model file and reload them.
When the bounding box is saved, it will stop being displayed on all
sections in the Zap window.  After you save the objects, the model
view window will show both the isosurfaces in the extra object and the
saved objects, unless you turn one or the other off.
<P><A HREF="index.html">Help Index</A></P>
</BODY>
</HTML>
