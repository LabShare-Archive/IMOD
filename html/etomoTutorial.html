<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">&#10;<html xmlns:o="urn:schemas-microsoft-com:office:office"&#10; xmlns:w="urn:schemas-microsoft-com:office:word"&#10; xmlns="http://www.w3.org/TR/REC-html40">&#10;<head>&#10;  <meta name="Title" content="ETomo Tutorial">&#10;  <meta name="Keywords" content="">&#10;  <meta http-equiv="Content-Type" content="text/html; charset=macintosh">&#10;  <meta name="ProgId" content="Word.Document">&#10;  <meta name="Generator" content="Microsoft Word 9">&#10;  <meta name="Originator" content="Microsoft Word 9">&#10;  <link rel="File-List" href="filelist">&#10;  <title>ETomo Tutorial</title>&#10;<!--[if gte mso 9]><xml>&#10; <o:DocumentProperties>&#10;  <o:Author>HVEM Lab</o:Author>&#10;  <o:Template>Normal</o:Template>&#10;  <o:LastAuthor>HVEM Lab</o:LastAuthor>&#10;  <o:Revision>2</o:Revision>&#10;  <o:LastPrinted>2003-04-16T19:00:00Z</o:LastPrinted>&#10;  <o:Created>2003-04-28T18:29:00Z</o:Created>&#10;  <o:LastSaved>2003-04-28T18:29:00Z</o:LastSaved>&#10;  <o:Pages>3</o:Pages>&#10;  <o:Words>3497</o:Words>&#10;  <o:Characters>19938</o:Characters>&#10;  <o:Company>University of Colorado</o:Company>&#10;  <o:Lines>166</o:Lines>&#10;  <o:Paragraphs>39</o:Paragraphs>&#10;  <o:CharactersWithSpaces>24485</o:CharactersWithSpaces>&#10;  <o:Version>9.3220</o:Version>&#10; </o:DocumentProperties>&#10;</xml><![endif]--><!--[if gte mso 9]><xml>&#10; <w:WordDocument>&#10;  <w:Zoom>150</w:Zoom>&#10;  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>&#10;  <w:DisplayVerticalDrawingGridEvery>0</w:DisplayVerticalDrawingGridEvery>&#10;  <w:UseMarginsForDrawingGridOrigin/>&#10;  <w:Compatibility>&#10;   <w:SpaceForUL/>&#10;   <w:BalanceSingleByteDoubleByteWidth/>&#10;   <w:DoNotLeaveBackslashAlone/>&#10;   <w:ULTrailSpace/>&#10;   <w:DoNotExpandShiftReturn/>&#10;   <w:AdjustLineHeightInTable/>&#10;  </w:Compatibility>&#10; </w:WordDocument>&#10;</xml><![endif]-->&#10;  <style>&#10;<!--&#10; /* Font Definitions */&#10;@font-face&#10;&#9;{font-family:"Times New Roman";&#10;&#9;panose-1:0 2 2 6 3 5 4 5 2 3;&#10;&#9;mso-font-charset:0;&#10;&#9;mso-generic-font-family:auto;&#10;&#9;mso-font-pitch:variable;&#10;&#9;mso-font-signature:50331648 0 0 0 1 0;}&#10;@font-face&#10;&#9;{font-family:Charcoal;&#10;&#9;panose-1:0 0 0 0 0 0 0 0 0 0;&#10;&#9;mso-font-charset:0;&#10;&#9;mso-generic-font-family:auto;&#10;&#9;mso-font-pitch:variable;&#10;&#9;mso-font-signature:50331648 0 0 0 1 0;}&#10; /* Style Definitions */&#10;p.MsoNormal, li.MsoNormal, div.MsoNormal&#10;&#9;{mso-style-parent:"";&#10;&#9;margin:0in;&#10;&#9;margin-bottom:.0001pt;&#10;&#9;mso-pagination:widow-orphan;&#10;&#9;font-size:12.0pt;&#10;&#9;font-family:Times;}&#10;h1&#10;&#9;{mso-style-next:Normal;&#10;&#9;margin:0in;&#10;&#9;margin-bottom:.0001pt;&#10;&#9;mso-pagination:widow-orphan;&#10;&#9;page-break-after:avoid;&#10;&#9;mso-outline-level:1;&#10;&#9;font-size:12.0pt;&#10;&#9;font-family:Times;&#10;&#9;mso-font-kerning:0pt;}&#10;h2&#10;&#9;{mso-style-next:Normal;&#10;&#9;margin:0in;&#10;&#9;margin-bottom:.0001pt;&#10;&#9;mso-pagination:widow-orphan;&#10;&#9;page-break-after:avoid;&#10;&#9;mso-outline-level:2;&#10;&#9;font-size:14.0pt;&#10;&#9;font-family:Times;}&#10;p.MsoBodyText, li.MsoBodyText, div.MsoBodyText&#10;&#9;{margin:0in;&#10;&#9;margin-bottom:.0001pt;&#10;&#9;mso-pagination:widow-orphan;&#10;&#9;font-size:12.0pt;&#10;&#9;font-family:Times;&#10;&#9;color:black;}&#10;p.MsoPlainText, li.MsoPlainText, div.MsoPlainText&#10;&#9;{margin:0in;&#10;&#9;margin-bottom:.0001pt;&#10;&#9;mso-pagination:widow-orphan;&#10;&#9;font-size:12.0pt;&#10;&#9;font-family:Courier;}&#10;@page Section1&#10;&#9;{size:8.5in 11.0in;&#10;&#9;margin:1.0in .75in 1.0in .75in;&#10;&#9;mso-header-margin:.5in;&#10;&#9;mso-footer-margin:.5in;&#10;&#9;mso-paper-source:0;}&#10;div.Section1&#10;&#9;{page:Section1;}&#10; /* List Definitions */&#10;@list l0&#10;&#9;{mso-list-id:1328754150;&#10;&#9;mso-list-type:hybrid;&#10;&#9;mso-list-template-ids:-1058926870 -130242826 1639433 1770505 984073 1639433 1770505 984073 1639433 1770505;}&#10;@list l0:level1&#10;&#9;{mso-level-start-at:2;&#10;&#9;mso-level-number-format:roman-upper;&#10;&#9;mso-level-tab-stop:.75in;&#10;&#9;mso-level-number-position:left;&#10;&#9;margin-left:.75in;&#10;&#9;text-indent:-.5in;}&#10;@list l1&#10;&#9;{mso-list-id:2105878558;&#10;&#9;mso-list-type:hybrid;&#10;&#9;mso-list-template-ids:355089164 1073481306 1639433 1770505 984073 1639433 1770505 984073 1639433 1770505;}&#10;@list l1:level1&#10;&#9;{mso-level-start-at:2;&#10;&#9;mso-level-number-format:roman-upper;&#10;&#9;mso-level-tab-stop:.75in;&#10;&#9;mso-level-number-position:left;&#10;&#9;margin-left:.75in;&#10;&#9;text-indent:-.5in;}&#10;ol&#10;&#9;{margin-bottom:0in;}&#10;ul&#10;&#9;{margin-bottom:0in;}&#10;-->&#10;  </style>&#10;</head>&#10;<body style="" bgcolor="white" lang="EN-US">&#10;<h2 align="center">ETomo Tutorial for IMOD Version 3.5.2<br>&#10;</h2>&#10;<h3 align="center">Eileen O'Toole</h3>&#10;<h3 align="center">Boulder Laboratory for 3-D Electron Microscopy of&#10;Cells</h3>&#10;<hr>&#10;<div class="Section1">&#10;<p class="MsoNormal"><span style="font-size: 14pt;"><b>I.<span style="">&nbsp;</span>Initial&#10;set up and viewing the raw tilt series:<o:p></o:p></b></span></p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p><br>&#10;This tutorial contains a small, dual-axis sample data set and a&#10;step-by-step guide to eTomo. The tutorial is not meant to be a&#10;replacement for the Tomography Guide. Please refer to the more&#10;comprehensive <a href="tomoguide.html">Tomography Guide</a> for&#10;additional detail about each step. The sample data set was chosen&#10;because you should get through the entire process with no problems! The&#10;Tomography Guide is a good reference for trouble shooting and learning&#10;more about the many programs that are used for computing dual-axis&#10;tomograms. &nbsp; <br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal">To get started, <a&#10; href="http://bio3d.colorado.edu/imod/files/tutorialData.tar.gz">download</a>&#10;the sample data set from our web site. &nbsp;Unpack the data by typing:</p>&#10;<p class="MsoNormal"><br>&#10;&nbsp; &nbsp; &nbsp; &nbsp; <code>tar -xzf tutorialData.tar.gz<br>&#10;</code></p>&#10;<p class="MsoNormal"><br>&#10;<code></code></p>&#10;<p class="MsoNormal">or, on an SGI, you will probably need two steps:</p>&#10;<p class="MsoNormal"><br>&#10;&nbsp; &nbsp; &nbsp; &nbsp; <code>gunzip tutorialData.tar.gz</code></p>&#10;<p class="MsoNormal"><code>&nbsp; &nbsp;tar -xf tutorialData.tar<br>&#10;</code><br>&#10;This will create a directory, <code>tutorialData</code>, containing&#10;the two raw stacks needed to start the tutorial, named BBa.st and&#10;BBb.st, respectively. &nbsp;There is also a subdirectory, <code>finalFiles</code>,&#10;containing all of the small working files left after completing the&#10;data set, as well a copy of the final reconstruction.&nbsp; <br>&#10;<br>&#10;The file names reflect a convention that you will have to follow with&#10;your own data sets: the raw stacks have the extension .st and dual axis&#10;stacks have a common name then end in a.st and b.st.<br>&#10;</p>&#10;<br>&#10;<p class="MsoNormal">It is useful to look at the raw tilt series files&#10;in order to make decisions about preprocessing steps or to see if there&#10;are any particular views <span style="color: black;">that have poor&#10;image quality, and that you want to exclude from </span>the<span&#10; style="color: black;"> alignment and reconstruction.</span>&nbsp;</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal">To determine if you have views that have poor&#10;image quality (poor focus, etc.), read in the raw stack(s) by typing:</p>&#10;<p class="MsoNormal"></p>&#10;<h1><br>&#10;</h1>&#10;<h1 style="font-weight: normal;"><code>&nbsp; &nbsp;3dmod BBa.st</code></h1>&#10;<h2><span style="font-size: 12pt; font-weight: normal;">&nbsp;<o:p></o:p></span></h2>&#10;<p class="MsoNormal">Movie through the raw tilt series images by&#10;clicking the middle mouse button. Notice how the images jump around&#10;slightly. Make note of any particular views that you want to exclude&#10;from the alignment and reconstruction. In this sample data set, there&#10;are no images that need to be excluded. <br>&#10;<br>&#10;</p>&#10;<p class="MsoNormal">If images were collected on the microscope using a&#10;CCD camera, random x-rays hitting the CCD camera during collection of&#10;dark reference or individual images can cause extreme high or low pixel&#10;values in your data file. As a result, these extreme values ruin the&#10;contrast and can cause artifacts in the reconstruction. The example in&#10;this tutorial does not have extreme pixel values. However, a quick way&#10;to determine if your file does have extreme pixel values is to look at&#10;the Minimum and Maximum Density values in image header of the raw&#10;stack. To do this type: </p>&#10;<p class="MsoNormal"></p>&#10;<h1><br>&#10;</h1>&#10;<h1 style="font-weight: normal;"><code>&nbsp; &nbsp;header BBa.st</code></h1>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<p class="MsoNormal">If the minimum density value is a negative number&#10;or 0, then you probably have an extreme black pixel in your data set,&#10;caused by an x-ray event during collection of the dark reference. If&#10;you&#10;have a high maximum density, then you have an extreme white pixel in&#10;your data set. If an extreme value is lurking somewhere in the data&#10;set and a preprocessing step is needed to remove them, please refer to&#10;the <a href="tomoguide.html#PRE-PROCESSING">Pre-Processing: Removing&#10;X-Rays</a> section of the Tomography Guide. </p>&#10;<p class="MsoNormal"><o:p></o:p></p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal" style="font-weight: bold;"><font size="+1">II.<span&#10; style="">&nbsp; eTomo Setup</span></font></p>&#10;<br>&#10;To start eTomo, type:<br>&#10;<b><br>&#10;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; </b><code>etomo</code><br>&#10;<br>&#10;<p class="MsoNormal"><span style="color: black;"></span><o:p></o:p></p>&#10;<p class="MsoNormal"></p>&#10;<div style="text-align: center;"><img src="etomoImages/setupwindow1.png"&#10; title="" alt="">&nbsp; <br>&#10;</div>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal">When eTomo is first started, a<b> Setup panel</b>&#10;will come up (shown above). At this point you can either set up&#10;processing of a new data set or open an existing data set under the <b>File</b>&#10;menu.&nbsp;<br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;To start working on a new data set, the following fields must be filled&#10;out. The <b>Dataset Name</b> is the name of the file containing the&#10;raw, tilt series (or the root name if a dual axis data set was&#10;collected). &nbsp;You can enter the <b>Dataset Name</b> by clicking&#10;on the yellow file selection associated with the <b>Dataset Name</b>&#10;field, or type in the directory path and file name directly in the&#10;field. The <b>Backup Directory </b>is an optional field to save small&#10;working files every time you run a procedure. This field can be left&#10;empty if you don't wish to use a backup directory. <br>&#10;</p>&#10;<p class="MsoNormal"><o:p></o:p></p>&#10;<p class="MsoNormal"><o:p></o:p></p>&#10;<p class="MsoNormal"><br>&#10;Select whether the data set is <b>Single Axis</b> or <b>Dual Axis.</b>&nbsp;&#10;The <b>Frame Type</b> should be <span style="font-weight: bold;">Single&#10;frame</span>.&nbsp; The <span style="font-weight: bold;">Montage</span>&#10;option is available for processing montaged tilt&#10;series. <br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;The next fields specify Pixel size (nm), the size of gold fiducials&#10;(nm) and Image rotation (degrees). <b>&nbsp;&nbsp;&nbsp; Pixel size </b>(in&#10;nm) is dependent on the microscope, camera, and magnification. The<b>&#10;Image rotation</b> (tilt axis angle from vertical, in degrees)&#10;will&#10;also vary based on the microscope and magnification. Pressing the <b>Scan&#10;Header button </b>will retrieve the<b> Pixel size</b> and<b> Image&#10;rotation </b>values if these are specified in the<b> </b>MRC file&#10;header. For this tutorial example,&nbsp; press Scan Header to define&#10;the&#10;pixel size for this data set (2.02) and Image rotation (-12.5). You&#10;must&#10;specify the size of the gold <b>Fiducial marker diameter</b> (10 nm). </p>&#10;<p class="MsoNormal"><br>&#10;If the Parallel Processing checkbox is enabled, uncheck it.&nbsp;&#10;Parallel processing, which is not covered in this tutorial, allows some&#10;processes to be distributed across multiple computers.&nbsp; Leave the <span&#10; style="font-weight: bold;">Image distortion field file</span>&#10;entry blank.&nbsp; This feature can be used to correct for nonlinear&#10;image distortions if they have been measured and characterized, which&#10;is particularly useful with data from an energy filter.<br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal">Specify the source of the tilt angles for either&#10;one or both axes, as appropriate. In this example, tilt angles are&#10;stored in the extended header and so the default "<span&#10; style="font-weight: bold;">Extract tilt angles from data</span>"&#10;should be used. You can also optionally specify individual projections&#10;to exclude from processing steps. &nbsp;The syntax for this exclude&#10;list&#10;is a comma separated list of ranges (i.e. 1,4-5,60-70).&nbsp; Notice&#10;that there is a also a button in this section to open the raw data file&#10;for viewing in 3dmod.<br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<div align="center"><img src="etomoImages/setupwindow2.png" title=""&#10; alt="">&nbsp; <br>&#10;</div>&#10;<p class="MsoNormal"><br>&#10;Details specific for the tutorial sample data set are shown above. For&#10;this sample data set, the <span style="font-weight: bold;">Dataset name</span>&#10;is BBa.st,&nbsp; it is a dual axis set. The pixel size is 2.02 nm, the&#10;fiducial diameter is 10 nm and the image rotation is -12.5 degrees.&#10;Tilt angles for this data set are stored and extracted from the data&#10;file.&nbsp;<span style=""> </span><br>&#10;</p>&#10;<p class="MsoNormal"><span style="font-size: 14pt;"><b> <o:p></o:p></b></span></p>&#10;<p class="MsoNormal"><br>&#10;Press the <span style="font-weight: bold;">Create Com Scripts</span>&#10;button to move on to generating the tomograms. <br>&#10;<span style="font-size: 14pt;"><b><br>&#10;III. eTomo Main Window</b></span></p>&#10;<p class="MsoNormal">The Main Window consists of several areas: on the&#10;left is a column of buttons (Process Control Buttons) that allow you to&#10;select a particular stage of tomogram computation to work on. On the&#10;top is a Process Monitor that informs you of the status of the&#10;current process or the last process completed.<br>&#10;<br>&#10;</p>&#10;<div align="center"><img src="etomoImages/mainwindow.png" title=""&#10; alt="">&nbsp; <br>&#10;</div>&#10;<p class="MsoNormal"></p>&#10;<p class="MsoNormal"><br clear="all">&#10;<br>&#10;The Process Control Buttons are arranged in the suggested order of&#10;processing from top to bottom. &nbsp;The buttons are color coded to&#10;signify the stage of the process, where red indicates that the&#10;process has not been started, magenta indicates that the process is&#10;currently in progress, and green indicates that the process has been&#10;completed. When one of the buttons is selected, the right side of the&#10;window will fill in with information and fields associated with a&#10;specific process. &nbsp;These forms are referred to as Process Panels.&#10;&nbsp;They allow you to modify the necessary parameters and execute&#10;specific programs required by that processing step. &nbsp;The&#10;parameters&#10;and buttons on each Process Panel are typically laid out from top to&#10;bottom in the order they should be executed, much like a flow chart.&#10;&nbsp;When you execute a process (by pressing a button on one of the&#10;Process Panels) the Process Monitor will indicate what the process is&#10;doing and when it is complete. <br>&#10;</p>&#10;<p class="MsoNormal"><span style="font-size: 14pt;"><b><br>&#10;IV. Pre-Processing</b></span></p>&#10;<p class="MsoNormal"><br>&#10;If images were collected on the microscope using a CCD&#10;camera, random x-rays hitting the CCD camera during collection of&#10;images&#10;or even in the initial dark reference can cause extreme high or low&#10;pixel values in your data file. As a result, these extreme values ruin&#10;the contrast and can cause artifacts in the reconstruction. <o:p></o:p>&#10;&nbsp;The data set in this tutorial does not require a pre-processing&#10;step.&nbsp; Refer to the <a href="tomoguide.html">Tomography Guide</a>&#10;for details on this step.<br>&#10;<span style="font-size: 14pt;"><b><br>&#10;V. Coarse alignment.<o:p></o:p></b></span></p>&#10;<p class="MsoNormal"> Press the <span style="font-weight: bold;">Coarse&#10;Alignment </span>&nbsp;Process&#10;Control Button on <span style="font-weight: bold;">Axis A</span> to&#10;proceed with &nbsp;creating a coarse-aligned stack.</p>&#10;<p class="MsoNormal"><o:p></o:p></p>&#10;<h1 align="center"> </h1>&#10;<h1 align="center">&nbsp; <br>&#10;</h1>&#10;<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&#10;<div style="text-align: center;"><img src="etomoImages/coarseA1.png"&#10; title="" alt=""><br>&#10;<br>&#10;</div>&#10;<h1 align="center">&nbsp; <br>&#10;</h1>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<div style="text-align: center;"><img src="etomoImages/coarseA2.png"&#10; title="" alt="">&nbsp;&nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <img&#10; src="etomoImages/coarseA3.png" title="" alt=""><br>&#10;</div>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal"> Pressing the <b>Calculate Cross-Correlation</b>&#10;button runs the program, Tiltxcorr. The program uses cross-correlation&#10;to find an initial translational alignment between successive&#10;images of a tilt series (i.e. just shifts in x and y). The output&#10;file, BBa.prexf, contains a list of transforms (or recommended shifts)&#10;that will be applied to the image data in the next step.<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;Pressing the <b>Generate Coarse Aligned Stack </b>button will run 2&#10;programs.<span style=""> &nbsp;</span> Xftoxg takes the transforms&#10;created by Tiltxcorr to obtain a single consistent, or ‘global’ set of&#10;alignments. These new transforms are then applied to the image data&#10;using the program Newstack. The output file created is&#10;BBa.preali. One can view the prealigned stack by pressing the <b>View&#10;Aligned Stack in 3dmod </b>button. Large image shifts can be edited&#10;manually using the the interactive program, Midas. This is not an issue&#10;with this data set; see the <a&#10; href="tomoguide.html/#COARSE%20ALIGNMENT">COARSE&#10;ALIGNMENT</a> section of the Tomography Guide for details. The <span&#10; style="font-weight: bold;">Tilt axis rotation</span> entry is used if&#10;Midas is run, because Midas will rotate images so that the tilt axis is&#10;vertical.&nbsp; The <span style="font-weight: bold;">Fiducialless&#10;alignment</span> check box can be selected for making a tomogram&#10;without a fiducial alignment; see <a&#10; href="tomoguide.html#Fiducialless%20Quick">Making a Quick Tomogram&#10;with Correlation Alignment</a> in the Tomography Guide for&#10;details.&nbsp; Once you are&#10;satisfied with the prealigned stack, press the <b>Done</b> button to&#10;proceed to the next step.</p>&#10;<p class="MsoNormal"><o:p></o:p></p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<p class="MsoNormal"><span style="font-size: 14pt;"><b>&nbsp;<o:p></o:p></b></span></p>&#10;<p class="MsoNormal"><span style="font-size: 14pt;"><b>VI. Creating a&#10;fiducial model based on the position of gold particles.<o:p></o:p></b></span></p>&#10;<h1>&nbsp;<o:p></o:p></h1>&#10;<h1 align="center"><img src="etomoImages/fiducialA1.png" title="" alt="">&nbsp;&#10;<br>&#10;</h1>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<p class="MsoNormal"><b>&nbsp;Press the </b><b>'Seed Fiducial Model'&#10;button. </b><br>&#10;<br>&#10;</p>&#10;<p class="MsoNormal">This will open BBa.preali in 3dmod and create an&#10;empty model file named BBa.seed.&nbsp;</p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<p class="MsoNormal">Go to section 31 by pressing the Insert key on&#10;your keyboard (this will go directly to the middle section, which is&#10;often the 0° tilt).</p>&#10;<p class="MsoNormal"></p>&#10;<p class="MsoNormal" align="center">&nbsp; <br>&#10;</p>&#10;<div align="center"><img src="etomoImages/seedmodel1.jpg" title=""&#10; alt=""><br>&#10;</div>&#10;<p class="MsoNormal"></p>&#10;<div align="center">&nbsp;&nbsp; &nbsp; <br>&#10;</div>&#10;<p class="MsoNormal"><o:p></o:p></p>&#10;<p class="MsoNormal">In the Zap (image) window, place a model point in&#10;the center of 20-40<span style="">&nbsp; </span>gold particles by&#10;centering the cursor in the middle of the gold particle and pressing&#10;the middle mouse button. With each new gold bead selected, hit the&#10;‘n’ key on the keyboard. This creates a new contour for each new gold&#10;bead. It’s useful to adjust the contrast of the image and to increase&#10;the magnification of the image using the ‘+’ key to make sure the model&#10;point is positioned in the center of the gold bead. In my example&#10;(BBa.seed) I selected 24 gold particles; the model contains 1 object,&#10;24 contours, with each contour having 1 point.<span style="">&nbsp;</span>Save&#10;this ‘seed’ model by going to File -&gt; Save model, or by hitting&#10;the hot key 's'. The model is referred to as a ‘seed’ because it&#10;contains model points on only one section. The next step uses this&#10;model&#10;as a seed from which a complete fiducial model is built. </p>&#10;<p class="MsoNormal" align="center">&nbsp;<br>&#10;</p>&#10;<p class="MsoNormal"><b>Press the 'Track Fiducial Seed Model' process&#10;button.</b><br>&#10;<br>&#10;<b></b></p>&#10;<p class="MsoNormal" align="center">&nbsp;<img&#10; src="etomoImages/fiducialA2.png" title="" alt=""> <o:p></o:p></p>&#10;<p class="MsoNormal">This will run the Beadtrack program to find the&#10;gold on all other sections. The output file created by tracka.com is&#10;BBa.fid, which is the completed fiducial model. This computer-generated&#10;model is not perfect, and so the next procedure involves an iterative&#10;process to edit this fiducial model.</p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<h1>&nbsp;Press the 'Fix Fiducial Model' process&#10;button.</h1>&#10;<p class="MsoNormal" align="center"><img&#10; src="etomoImages/fiducialA3.png" title="" alt="">&nbsp; <o:p></o:p></p>&#10;<p class="MsoNormal"><br>&#10;This procedure will open the prealigned stack (BBa.preali) and the&#10;fiducial model file (BBa.fid) in 3dmod. </p>&#10;<p class="MsoNormal"><br>&#10;<br>&#10;<b></b></p>&#10;<div align="center"><img src="etomoImages/3dmodmain.png" title="" alt="">&#10;&nbsp;&nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; <img src="etomoImages/beadfixer.png"&#10; title="" alt="">&nbsp; <br>&#10;</div>&#10;<p class="MsoNormal"><br>&#10;A dialog box called Bead Fixer will come up. Bead Fixer facilitates&#10;editing the fiducial&#10;model.</p>&#10;<p class="MsoNormal"><br>&#10;Hit<b> ‘Go to Next Gap’</b> by clicking on the button using the left&#10;mouse button, or by using the spacebar as a hot key.&nbsp; This will&#10;attach to a point (highlighted with a yellow circle) that has a missing&#10;model point on an adjacent section. Use the Page Up or Page Down key to&#10;find the section with the missing point and use the middle mouse button&#10;to add the point in the center of the gold particle. It is useful to&#10;increase the magnification of the image with the ‘+’ key and adjust the&#10;contrast on the sections, especially at high tilt. Repeat <b>‘Go&#10;to&nbsp; Next Gap’</b> until the message, ‘<span&#10; style="font-weight: bold;">no more gaps are found</span>’ comes up in&#10;the main 3dmod window. Save the model file,&nbsp; and hit the <span&#10; style="font-weight: bold;">Done</span> button to advance to the fine&#10;alignment step.</p>&#10;<h1><span style="font-weight: normal;">&nbsp;<o:p></o:p></span></h1>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<h1><span style="font-size: 14pt;">VII.<span style="">&nbsp; </span>Alignment&#10;of serial tilts<o:p></o:p></span></h1>&#10;<h1> <b><o:p></o:p></b></h1>&#10;<h1><br>&#10;</h1>&#10;<p class="MsoNormal" align="left">The <b>Fine Alignment</b> panel is&#10;organized with a set of three tabs to solve for various alignment&#10;parameters. A general alignment is first done by pressing the <b>Compute&#10;alignment</b> button at the bottom of the<b> Fine Alignment</b> box. <br>&#10;<br>&#10;</p>&#10;<div align="center"><img src="etomoImages/finealignment1.png" title=""&#10; alt="">&nbsp; <br>&#10;</div>&#10;<p class="MsoNormal"><br>&#10;This command file runs the program, Tiltalign, to solve for the&#10;displacements, rotations, tilts and magnification differences in the&#10;tilted views. The program uses the position of the gold particles in&#10;the fiducial model and a variable metric minimization approach to find&#10;the best fit. It creates a log file that gives a synopsis of what was&#10;done. To access this log file,&nbsp; right click the mouse cursor over&#10;the window region associated with the process. This will open a menu&#10;that is split into three sections: the first section will allow you to&#10;open the log files associated with the current process, the second&#10;section will allow you to open up the man pages associated with the&#10;current processes, and the final menu section opens the general help&#10;guides. &nbsp;Select "Align axis:a log file" to open the log file.&nbsp;<b>&#10;<o:p></o:p></b>This&#10;will open a tabbed file that contains the complete log and short&#10;sections from this log file. <br>&#10;The <span style="font-weight: bold;">Errors</span> tab contains a mean&#10;residual error and standard deviation and the ratio of measured values&#10;to total unknowns. <br>&#10;In my example, the first <span style="font-weight: bold;">Compute&#10;Alignment</span> run gave a Residual error mean of 0.351<br>&#10;<br>&#10;</p>&#10;<p class="MsoNormal" style="text-align: center;"><img&#10; src="etomoImages/alignlogerrors.png" title="" alt=""><br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal">The goal of the fine alignment step is to reduce&#10;the Residual error mean to 0.2- 0.5. <br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;The Tiltalign program also creates two model files that provide useful&#10;information about the fiducial model.<span style="">&nbsp; </span>The&#10;first (BBa.3dmod) displays a <span style="color: black;">3-D model of&#10;the fiducials<o:p></o:p> based on their solved positions. </span>Fiducials&#10;that are present on the two surfaces are assigned 2 different colors;&#10;pink spheres on one side and green spheres on the other. Examine this&#10;model by hitting the <b>View 3D Model</b> button on the bottom of the <b>Fine&#10;Alignment</b> box:</p>&#10;<p class="MsoNormal"><b>&nbsp;<o:p></o:p></b></p>&#10;<h1><br>&#10;</h1>&#10;<p class="MsoNormal" align="center">&nbsp;<img&#10; src="etomoImages/3Dmodel1.png" title="" alt=""><img&#10; src="etomoImages/3Dmodel2.png" title="" alt="">&nbsp;<span style=""> </span><o:p></o:p></p>&#10;<p class="MsoNormal"><br>&#10;You should see a nice distribution of pink and green spheres across the&#10;field of view. Rotate the model to view edge-on by holding down the&#10;number 8 key on the keypad. You will see the separation of the two&#10;surfaces with this view. Avoid using models that have a cluster of&#10;fiducials in any one particular region because this will skew the&#10;alignment. Close the 3dmodv window. <br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;The second model Tiltalign produces is a residual vector model.&#10;&nbsp;Press the '<b>View Residual Vectors</b>' button at the bottom of&#10;the <b>Fine Alignment</b> box. This will open the prealigned stack in&#10;3dmod and display the residual vector model on each section. </p>&#10;<h1><b><br>&#10;</b></h1>&#10;<h1></h1>&#10;<p class="MsoNormal" align="center"><b> <o:p></o:p></b></p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal" align="center"><img&#10; src="etomoImages/residualvector.jpg" title="" alt="">&nbsp; <br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;The model will show the current model point as a red X, and the&#10;position of the residual as a green X. This residual displacement is&#10;expanded by a factor of 10 in order to distinguish it from the actual&#10;model point, because displacements are often very small (<u>&lt;</u> 2&#10;pixels). In large (&gt;2k x 2k) images the residual model will often&#10;show large displacements in one area but not in other areas. In these&#10;cases, the residual model helps to make decisions if local alignments&#10;are needed. In this example, local alignments are not needed. It is&#10;common to have larger residuals at the higher extreme tilts. Leave&#10;3dmod open for the next several steps and press the <span&#10; style="font-weight: bold;">'View/Edit Fiducial Model'</span> button to&#10;reload the fiducial model for editing.</p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<p class="MsoNormal"><span style="font-weight: bold;">The following&#10;iterative steps involve fixing fiducial points with large residuals.</span>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal">Select ‘Open Tiltalign Log File’ in the Bead Fixer&#10;dialog&#10;box. Select the aligna.log file.<br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;<br>&#10;</p>&#10;<p class="MsoNormal" align="center"><img&#10; src="etomoImages/beadfixer2.png" alt="" style="">&nbsp;&nbsp;&#10;&nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;<img&#10; src="etomoImages/beadfixer3.png" title="" alt=""> &nbsp;<o:p></o:p></p>&#10;<p class="MsoNormal"><br>&#10;Click<span style="">&nbsp; </span>‘<b>Go to Next Big Residual</b>’ in&#10;the <b>Bead Fixer</b> dialog box.</p>&#10;<p class="MsoNormal">The model point that had the big residual will&#10;have a red arrow pointing in the direction of the recommended move.&#10;You’ll probably be able to see that the model point is not centered&#10;properly on the gold. &nbsp;<span style="">&nbsp; </span>If you&#10;click ‘<b>Move Point by Residual</b>’ in the<b> Bead Fixer</b> dialog&#10;box,&#10;it will move the model point by the recommended amount. This works&#10;most of the time, but if the recommendation looks wrong, you can move&#10;it&#10;by hand by centering the cursor over the middle of the gold bead and&#10;then clicking the right mouse button.<br>&#10;<br>&#10;</p>&#10;<p class="MsoNormal" style="text-align: center;"><img&#10; src="etomoImages/beadfixer4.png" title="" alt="">&nbsp;&nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp; <img src="etomoImages/beadfixer5.png" title=""&#10; alt=""><br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;<span style=""></span></p>&#10;<p class="MsoNormal">Repeat selecting ‘<b>Go to Next Big Residual</b>’&#10;and ‘<b>Move Point by Residual</b>’ until no residuals are found. The&#10;hot key <b>' </b>will cycle to the next residual and the hot key<b> ;</b>&#10;will move point by residual. Save the model file and leave the file&#10;open. <br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;Access the aligna.log file and go to the Surface Angles tab.<br>&#10;<br>&#10;</p>&#10;<div style="text-align: center;"><img&#10; src="etomoImages/alignlogsurface.png" title="" alt=""><br>&#10;</div>&#10;<p class="MsoNormal"></p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal">Note the Total tilt angle change at the bottom (in&#10;my example,&#10;this value was -0.29). Put this value in the <span&#10; style="font-weight: bold;">Fine Alignment Volume Position Parameters</span>&#10;box under <span style="font-weight: bold;">Total tilt angle offset</span>.&#10;Press the&nbsp; Compute Alignment button again, then select ‘Reread log&#10;file’ in the Bead Fixer dialog window. Proceed in fixing model points&#10;with large residuals. Save the model.&nbsp; <br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal"> If your data set has gold on both surfaces, you&#10;can solve for distortion. Press the '<span style="font-weight: bold;">Global&#10;Variables</span>' tab in the <span style="font-weight: bold;">Fine&#10;Alignment</span> box:&nbsp;</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal" align="center"><img&#10; src="etomoImages/finealignAglobal.png" title="" alt="">&nbsp; <br>&#10;</p>&#10;<p class="MsoNormal"><o:p></o:p></p>&#10;<p class="MsoNormal"><br>&#10;<span style=""></span></p>&#10;<p class="MsoNormal"><span style="">Select the </span><span style=""> '<span&#10; style="font-weight: bold;">Full solution</span>' &nbsp;</span><span&#10; style="">option&#10;in the <span style="font-weight: bold;">Distortion Solution Type</span>&#10;area at the bottom of the panel. This will activate solving for two&#10;types of distortion: X-axis stretch and Skew. Keep the default group&#10;size and hit the '<span style="font-weight: bold;">Compute Alignment</span>'&#10;button to run the alignment.<br>&#10;</span><b><o:p></o:p></b></p>&#10;<p class="MsoNormal"><br>&#10;Return to the 3dmod windows and select <span style="font-weight: bold;">Reread&#10;Log File</span> in the&#10;Bead Fixer dialog window. Repeat fixing the new residuals that&#10;Tiltalign&#10;came up with after solving for distortion. This time press the <span&#10; style="font-weight: bold;">Save &amp; Run Tiltalign</span> button in&#10;the Bead Fixer window to save the model and compute the&#10;alignment.&nbsp; You can use this button to avoid having to go back to&#10;eTomo, as long as you haven't changed any parameters in eTomo. After a&#10;few runs of running the alignment and&#10;checking model points in 3dmod, the final mean residual should come&#10;down to 0.2-0.4.&nbsp;&nbsp; In my example, the final Residual error&#10;mean was 0.308.</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<div style="text-align: center;"><img src="etomoImages/finalAerror.png"&#10; title="" alt=""><br>&#10;</div>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<h2>VIII.<span style="">&nbsp; </span>Sampling the data set to create&#10;3 small reconstructions</h2>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<p class="MsoBodyText">The goal of the next step is to shift and rotate&#10;your reconstruction so that it is as flat as possible and will fit into&#10;the smallest volume. This is done by sampling three regions of the&#10;tomogram, ones computed from near the top, middle, and bottom of the&#10;tilt images. (When these samples are not adequate, you can do this&#10;instead with a whole, binned down tomogram; see <a&#10; href="tomoguide.html/#Whole%20Tomogram%20Positioning">Positioning with&#10;a Whole Tomogram</a> in the Tomography Guide for details.)&nbsp; There&#10;are two rotations which can be adjusted: the&#10;rotation about the tilt axis, to make the section level when viewed in&#10;the X-Z plane; and a rotation about the X axis, to make the section&#10;come out at the same Z height throughout the length of the tomogram.<br>&#10;</p>&#10;<p class="MsoBodyText"><br>&#10;Increase the Sample tomogram thickness to 200.&nbsp; This will create a&#10;reconstruction that is much thicker than the original section.</p>&#10;<p class="MsoNormal"><b>&nbsp;<o:p></o:p></b><br>&#10;<span style="font-weight: bold;"> Press Create Sample Tomograms</span></p>&#10;<div align="center"><img src="etomoImages/TomopositionA2.png" title=""&#10; alt="">&nbsp; <br>&#10;<br>&#10;</div>&#10;<p class="MsoNormal">This command file first extracts and aligns a&#10;60 pixel sliver from the top, middle, and bottom of the image stack.&#10;The&#10;program then uses these samples to create 10 slices of the&#10;reconstruction from the top, middle, and bottom of the aligned stack.&#10;These output files are named topa.rec, mida.rec, bota.rec.</p>&#10;<h1 style="">&nbsp;<o:p></o:p></h1>&#10;<h1 style="">Press Create Boundary Models<br>&#10;</h1>&#10;<p class="MsoNormal">&#10;This step involves creating a model to&#10;define the top, middle, and bottom surfaces of each&#10;reconstruction.&nbsp; When the '<span style="font-weight: bold;">Create&#10;Boundary Models</span>' button is pressed, 3dmod will read in all three&#10;reconstructions at once, with the topa.rec displayed first and viewed&#10;edge on. 3dmod will also start with an empty model, named&#10;tomopitcha.mod.<br>&#10;<br>&#10;</p>&#10;<div align="center"><img src="etomoImages/TomopositionA4.png" title=""&#10; alt="">&nbsp; <br>&#10;</div>&#10;<p class="MsoNormal"><br>&#10;The top bar of the Zap window has a feature ‘4<sup>th</sup> D’ and a&#10;backward and forward arrow. If you click the forward arrow, you can&#10;cycle through to the mida.rec and bota.rec reconstructions,&#10;respectively. Start with the topa.rec. Use the contrast sliders to&#10;adjust contrast.&nbsp; Notice the material in the center of the volume&#10;with a mottled appearance. This is the part of the reconstruction with&#10;biological material.&nbsp; Using the middle mouse button, place one&#10;model point at the left side of the top surface that defines the region&#10;containing the biological material, and a second model point at the&#10;right side of the top surface. A line will connect the two points. Hit&#10;‘n’ for a new contour and model the bottom surface of the section with&#10;2 points on the left and right sides, respectively. Toggle to the&#10;mid.rec and bot.rec file by hitting the arrow button to the right of ‘4<sup>th</sup>&#10;D’ at the top of the zap window. Repeat modeling the top and bottom&#10;surfaces of the other two reconstructions, hitting ‘n’ for a new&#10;contour for each surface. The final model should have 1 object and 6&#10;contours, and each contour should have 2 model points.&nbsp; Save this&#10;model file.</p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<h1>&nbsp;Press 'Compute Z Shift and Pitch Angles' </h1>&#10;<h1 align="center"><span style="font-weight: normal;"> <o:p></o:p></span></h1>&#10;<p><span style="font-weight: normal;">Based on these model contours,&#10;tomopitch determines parameters to make the reconstruction as flat as&#10;possible and to fit in the smallest volume as possible. This command&#10;file creates an output file ‘tomopitcha.log’. &nbsp;This log&#10;&nbsp;file will automatically open &nbsp;after the program is finished.&#10;<o:p></o:p></span></p>&#10;<p class="MsoNormal" align="center">&nbsp;<img&#10; src="etomoImages/TomopositionA5.png" title="" alt=""> <o:p></o:p></p>&#10;<h2>IX. The final runs to create the full-size tomogram</h2>&#10;<p class="MsoNormal"><span style="font-size: 14pt;"><b>&nbsp;<o:p></o:p></b></span><br>&#10;&nbsp;An example of the tomopitcha.log from my example is shown&#10;below: <br>&#10;<br>&#10;</p>&#10;<h1><o:p></o:p></h1>&#10;<h1 align="center"><img src="etomoImages/TomopositionA6.png" title=""&#10; alt="">&nbsp; <br>&#10;</h1>&#10;<h1><br>&#10;</h1>&#10;<p class="MsoNormal">The bottom of the log file contains information&#10;calculated from all three positions. Enter the offsets to the fields&#10;directly below the <span style="font-weight: bold;">Compute Z Shift&#10;and Pitch Angles </span>button. In my example, the "add -0.2 to total&#10;angle offset" in the log file (above) gives the information for the <span&#10; style="font-weight: bold;">Total angle offset</span> field in eTomo&#10;(below). This value must be added to any existing value in this field&#10;(my example, -0.29 - 0.2 = -0.49). The "x-tilted lines imply added Z&#10;shift of 14.7" in the tomopitcha.log file (above) gives information for&#10;the <span style="font-weight: bold;">Total Z shift</span> in the eTomo&#10;field (below). After adding these values, hit the <span&#10; style="font-weight: bold;">Create Final Alignment</span> button.&#10;&nbsp;&#10;After the final alignment transforms are created, press the <span&#10; style="font-weight: bold;">Done</span> button to advance to the next&#10;step.<br>&#10;<br>&#10;</p>&#10;<h1 align="center"><img src="etomoImages/TomopositionA7.png" title=""&#10; alt="">&nbsp; <br>&#10;</h1>&#10;<h1><br>&#10;</h1>&#10;<h1><br>&#10;</h1>&#10;<h1><font size="+1"></font></h1>&#10;<h1></h1>&#10;<p class="MsoNormal"> <o:p></o:p></p>&#10;<h1><span style="font-weight: normal;"><o:p></o:p></span></h1>&#10;<p class="MsoNormal"><o:p></o:p></p>&#10;<h1><br>&#10;</h1>&#10;<h1>Press 'Create Full Aligned Stack'</h1>&#10;<p class="MsoNormal"><b></b>This&#10;command will apply the alignment transforms to the full-sized image for&#10;the final, aligned stack. The output file is named BBa.ali <br>&#10;</p>&#10;<h1>&nbsp;<o:p></o:p></h1>&#10;<h1><o:p></o:p></h1>&#10;<h1></h1>&#10;<div align="center"><img src="etomoImages/TomogenA1.png" title="" alt="">&nbsp;&#10;<br>&#10;</div>&#10;<h1><span style="font-weight: normal;"></span></h1>&#10;<h1><br>&#10;<span style="font-weight: normal;"></span></h1>&#10;<p><span style="font-weight: normal;">The full aligned stack may be&#10;viewed by pressing <span style="font-weight: bold;">View Full Aligned&#10;Stack</span>, although this is not necessary.&nbsp; There is an&#10;optional step for filtering the aligned stack, which is also not needed&#10;here.&nbsp; The default filtering parameters in the <span&#10; style="font-weight: bold;">Tilt Parameters</span> section are&#10;appropriate for many cases, but can be changed, or the aligned stack&#10;can be filtered, to reduce noise in the reconstruction (see the <a&#10; href="tomoguide.html/#TOMOGRAM%20GENERATION">TOMOGRAM GENERATION</a>&#10;section of the Tomography Guide for details).&nbsp; <br>&#10;</span></p>&#10;<p><span style="font-weight: normal;">Refer back to the&#10;tomopitcha.log file (see above). Edit</span> <span&#10; style="font-weight: normal;">the fields for <span&#10; style="font-weight: bold;">Tomogram thickness in Z</span> and <span&#10; style="font-weight: bold;">X axis tilt</span>. In my example, the&#10;tomopitcha.log file contained a recommended X-axis tilt of 2.29 and&#10;the thickness is 74. I generally make the thickness ~20 pixels greater&#10;than the tomopitch result (i.e. 95).</span></p>&#10;<br>&#10;<br>&#10;<h1 style="text-align: center;"><span style="font-weight: normal;"><img&#10; src="etomoImages/TomogenA2.png" title="" alt="">&nbsp;<o:p></o:p></span></h1>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<h1>Press 'Generate Tomogram'</h1>&#10;<p class="MsoNormal">When the tomogram is computed,&nbsp; examine it by&#10;pressing <span style="font-weight: bold;">View Tomogram in 3dmod</span>.&#10;You may also choose to <span style="font-weight: bold;">Delete Aligned&#10;Image Stacks</span> at this point to save space.<br>&#10;Movie through the reconstruction by hitting the middle mouse button to&#10;step through serial, tomographic slices from the top surface of the&#10;tomogram to the bottom surface.&nbsp;&nbsp; Press the <span&#10; style="font-weight: bold;">Done</span> button to exit this panel.<br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<h2>IX. On to the second axis (Axis B)<br>&#10;</h2>&#10;<span style="font-family: times;"><br>&#10;</span>&#10;<div style="text-align: center;"><span style="font-family: times;"></span><img&#10; alt="" src="etomoImages/axisButtonsA1.png"&#10; style="width: 474px; height: 96px;"><br>&#10;<span style="font-family: times;"></span></div>&#10;<span style="font-family: times;"></span>&#10;<h1><o:p></o:p></h1>&#10;<p class="MsoNormal"><b> </b></p>&#10;<p class="MsoNormal"><br>&#10;To see <span style="font-weight: bold;">Axis B</span>, press the <span&#10; style="font-weight: bold;">Axis B</span> button at the top of the&#10;eTomo window<span style="font-weight: bold;"></span>.&nbsp; This will&#10;bring up another set of process buttons which can be used to perform&#10;the operations for aligning the <b>Axis B</b> tilt series&#10;and&#10;calculating the tomogram.&nbsp; To prevent confusion, <span&#10; style="font-weight: bold;">Axis A</span> has a blue background and <span&#10; style="font-weight: bold;">Axis B</span> has a green background.<br>&#10;<br>&#10;</p>&#10;<p class="MsoNormal">Again, the Pre-processing step is not&#10;required&#10;for this sample data set. Go to the <b>Coarse Alignment</b> steps, as&#10;described above for Axis A. <o:p></o:p></p>&#10;<h1 align="center"><br>&#10;</h1>&#10;<p class="MsoNormal"><b> <o:p></o:p></b></p>&#10;<p class="MsoNormal"><b><o:p></o:p></b></p>&#10;<p class="MsoNormal" style="text-align: center;"><img&#10; src="etomoImages/coarseB1.png" title="" alt="">&nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp; &nbsp;<img src="etomoImages/coarseB2.png" title=""&#10; alt=""> &nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp; <br>&#10;</p>&#10;<p class="MsoNormal" align="center"><b> <o:p></o:p></b></p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;<br>&#10;After the coarse-aligned stack has been&#10;generated, press <span style="font-weight: bold;">Done</span> to&#10;advance&#10;to the next step. <br>&#10;</p>&#10;<p class="MsoNormal"><span style="font-weight: normal;">&#10;In order to combine both tilt axes <span style="color: black;">at&#10;least some (8-10) of the beads that you track must be the same in the&#10;two series. </span>To accomplish this, use the program Transferfid.</span></p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<h1>&nbsp;Press 'Transfer Fiducials From Other Axis'</h1>&#10;<div align="center"><span style="color: black;"><img&#10; src="etomoImages/transferfid.png" title="" alt="">&nbsp; </span><br>&#10;<span style="color: black;"></span></div>&#10;<p class="MsoNormal"><span style="color: black;">&nbsp;Pressing the <span&#10; style="font-weight: bold;">Transfer Fiducials From Other Axis</span>&#10;button will run the shell script, Transferfid, that creates a&nbsp;&#10;seed model for the second axis based on the fiducial model from the&#10;first axis.<span style="">&nbsp; </span>The program will search for&#10;the pair of views in the two series that correspond the best, then&#10;transfer the fiducials from the first series to make the seed model for&#10;the second series. At the end, the program indicates how corresponding&#10;fiducials should be specified when setting up to combine the tomograms&#10;and this information is stored in the transferfid.log file. The log&#10;file from my example is:&nbsp;<br>&#10;</span></p>&#10;<div align="center"><span style="color: black;"><img&#10; src="etomoImages/transferfid1.png" title="" alt="">&nbsp; </span><br>&#10;<span style="color: black;"></span></div>&#10;<h1>&nbsp;<o:p></o:p></h1>&#10;<h1><br>&#10;</h1>&#10;<p><span style="font-weight: normal;">The &nbsp;transferfid log file&#10;will list the fiducial correspondence between the first and second&#10;axes.&#10;In this example, all 24 fiducials correspond:</span></p>&#10;<h1><span style="font-weight: normal;"><o:p></o:p></span></h1>&#10;<p class="MsoNormal"></p>&#10;<p><code style="font-weight: normal;">&nbsp;&nbsp; &nbsp; Points in A:&#10;1-24</code><code><b> </b><span style="font-weight: normal;"><br>&#10;&nbsp;&nbsp;&nbsp;&nbsp; Points&#10;in B: 1-24</span></code><br>&#10;</p>&#10;<p><span style="font-weight: normal;">The output file of transferfid&#10;is the seed model for the second axis. In this example, the model is&#10;named BBb.seed. Proceed to <span style="font-weight: bold;">Track&#10;Fiducial Seed Model</span> in the Axis B window. <br>&#10;</span></p>&#10;<div align="center"><br>&#10;<img src="etomoImages/trackB.png" title="" alt="">&nbsp; <br>&#10;</div>&#10;<br>&#10;<p><span style="font-weight: normal;">This will automatically track&#10;the fiducials for the ‘B’ set. Fix the gaps in the BBb.fid file by&#10;pressing the <b>Fix Fiducial Model Using Bead Fixer</b> as outlined&#10;above for the A axis. When all gaps are found,&nbsp; press <b>&nbsp;Done</b>&#10;to proceed to the<b> Fine Alignment</b> and <b>Tomogram</b>&#10;calculation&#10;steps.</span></p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<p class="MsoNormal">You will now proceed with the same steps following&#10;the same procedure as outlined above for the Axis A set. Briefly:</p>&#10;<h1>&nbsp;<o:p></o:p></h1>&#10;<h1>&nbsp;Press 'Compute Alignment' for General and Global variable&#10;tabs in the Fine Alignment box.</h1>&#10;<p class="MsoNormal">At this point, you will start&nbsp; the iterative&#10;alignment procedure as you did for the ‘A’ set by&nbsp; editing model&#10;points with large residuals, saving the model, and computing the&#10;alignment.<span style=""> When the alignment is complete, press <span&#10; style="font-weight: bold;">Done</span> and proceed with the tomogram&#10;generation steps. </span></p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<h1>Proceed with 'Tomogram Positioning' as outlined above for the A&#10;Axis.&nbsp;</h1>&#10;<h1><b>Proceed with 'Tomogram Generation' steps as&#10;outlined above for the A Axis.</b></h1>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<h1></h1>&#10;<p class="MsoNormal"><b><o:p></o:p></b></p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<h2><big><font size="+1"><big>XI. Combining the two axes</big></font></big></h2>&#10;<div style="text-align: center;"><img alt=""&#10; src="etomoImages/axisButtonsB1.png" style="width: 464px; height: 96px;"><br>&#10;</div>&#10;<br>&#10;<p>Go back to <span style="font-weight: bold;">Axis A</span> by&#10;pressing the <span style="font-weight: bold;">Axis A</span> button.<br>&#10;To combine the two tomograms press the <span style="font-weight: bold;">Tomogram&#10;Combination</span> process button.<br>&#10;</p>&#10;<br>&#10;<h1 align="center">&nbsp;<img src="etomoImages/combine.png" title=""&#10; alt=""> <o:p></o:p></h1>&#10;<h1>Tomogram Combination Panel</h1>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<p class="MsoNormal"><o:p></o:p></p>&#10;<p class="MsoNormal">The <span style="font-weight: bold;">Tomogram&#10;Combination Panel</span> is organized with 3 tabs: <span&#10; style="font-weight: bold;">Setup</span>, <span&#10; style="font-weight: bold;">Initial Match</span>, and <span&#10; style="font-weight: bold;">Final Match</span>. <br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;The <span style="font-weight: bold;">Setup</span> window is where&#10;information is given about the particular data set. The first section&#10;describes the <span style="font-weight: bold;">Tomogram Matching&#10;Relationship</span>. It is most common to match the B tomogram to A.<br>&#10;</p>&#10;<p class="MsoNormal"><br>&#10;The<span style="font-weight: bold;"> Initial Volume Alignment Method</span>&#10;field asks for information on the fiducial marker distribution. In this&#10;example, fiducials are on both sides. The corresponding fiducial list&#10;in A and B is from the transferfid.log file. In this example, all&#10;fiducials (1-24) correspond.&nbsp;</p>&#10;<p class="MsoNormal"><br>&#10;</p>&#10;<p class="MsoNormal">The next section contains information for <span&#10; style="font-weight: bold;">Patch Parameters for Refining the Alignment</span>&#10;using local 3D cross-correlations. Selecting <span&#10; style="font-weight: bold;">Medium</span>&#10;patches works well for most data sets.&nbsp;When specifying the limits&#10;of the volume from which the patches will be extracted, it is important&#10;to look at the tomogram being matched to. Using the entire Z axis range&#10;will almost never work, and even for the X and Y axes it may not be&#10;good&#10;to use the defaults.&nbsp; To find the limits, press the <span&#10; style="font-weight: bold;">3dmod Volume A</span> button at the bottom&#10;of the panel. &nbsp;This will open BBa.rec in 3dmod. Step through the&#10;images and decide what range of the X axis, Y axis and Z axis contains&#10;useful information for matching up the volumes. In this example,&#10;defaults were kept for the X and Y axis, but the Z axis (in the&#10;flipped tomogram) was set to select slices that contained biological&#10;material (within the section range 23-68). </p>&#10;<p class="MsoNormal" align="center">&nbsp; <o:p></o:p></p>&#10;<p class="MsoNormal">Sometimes, this will not eliminate “extraneous”&#10;material to allow the two axes to combine. In that case, you have to&#10;make a patch region model. To make a patch region model, check the&#10;box "Use patch region model file" and press the <span&#10; style="font-weight: bold;">Create/Edit Patch Region Model</span>&#10;button to open up the axis that is being matched to. In model mode,&#10;trace closed contours around the areas that contain biological&#10;material. Do this every 10 slices or so in the tomogram. Save the&#10;model, which is named patch_region.mod. Creating the patch region model&#10;is particularly useful when reconstructing data sets that have large&#10;amounts of resin or open areas in the images.&nbsp; &nbsp;This example&#10;data set does not need a patch region model.&nbsp;</p>&#10;<p class="MsoNormal">&nbsp;<br>&#10;When the parameters for the <span style="font-weight: bold;">Setup&#10;panel</span> have been entered, press <span style="font-weight: bold;">Create&#10;Combine Scripts</span> to create a series of command files that&#10;will run various programs in the combine procedure.&nbsp; Etomo will&#10;pop up a warning message, "WARNING: Only one layer of patches will be&#10;computed in Z".&nbsp; This is not a problem for this dataset.&nbsp;&#10;Press <span style="font-weight: bold;">OK</span> to remove the&#10;message.&nbsp; Press <span style="font-weight: bold;">Start Combine</span>&#10;to begin the process&#10;of dual-axis tomogram combination.&nbsp; eTomo will automatically&#10;advance &nbsp;to the <span style="font-weight: bold;">Initial Match </span>and&#10;finally the <span style="font-weight: bold;">Final Match</span> tabs&#10;as&#10;various programs are being run. &nbsp;<br>&#10;<o:p></o:p></p>&#10;<p class="MsoNormal"><br>&#10;After tomogram combination is complete, press <span&#10; style="font-weight: bold;">Open Combined Volume</span> to view the&#10;final tomogram. Press <span style="font-weight: bold;">Done</span> to&#10;advance to the final steps.<br>&#10;</p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;<h1><font size="+1">XII. &nbsp;Post-Processing</font></h1>&#10;<br>&#10;Post-processing&#10;involves a volume trimming and byte scaling step, followed by deletion&#10;of intermediate files.&nbsp; There is also an option to create a&#10;squeezed&#10;down volume,&nbsp; which is useful when working with very large data&#10;sets,&#10;particularly when reconstructing serial sections.&nbsp;&nbsp;&#10;<h1 style="text-align: center;"><img src="etomoImages/trim.png" title=""&#10; alt=""></h1>&#10;<br>&#10;The final reconstruction of the two axes&#10;combined&#10;into one will always be called sum.rec. Open the sum.rec reconstruction&#10;by pressing <b>3dmod Full Volume</b>. <span style="color: black;">Step&#10;through the reconstruction and determine the &nbsp;X,Y and Z ranges&#10;for the final volume. A convenient way to set the X and Y range is to&#10;turn on the rubberband with the dashed rectangle in the toolbar of the&#10;Zap window, press the left mouse button over the upper left corner of&#10;the desired area, and drag the mouse to the lower right corner. When&#10;you press <span style="font-weight: bold;">Get XY Volume Range from&#10;3dmod,</span> eTomo will retrieve the X and Y values of the rubberband&#10;from 3dmod. In this example, the default ranges for X and Y&#10;are used. The Z axis (in the flipped tomogram) range has been set from&#10;a Z min of 20 to a Z max of 68 to exclude non-cellular material.&#10;Finally a scaling range is set to find the range of slices that exclude&#10;the gold beads. In this example, the scaling is section based and has a&#10;range between slices 34 and 64. &nbsp;Press the <b>Trim Volume</b>&#10;button&#10;to run Trimvol. Trimvol is a single tool for trimming a volume and&#10;converting it to bytes. Finally, view the final, trimmed volume&#10;(named BB.rec) by pressing <b>3dmod Trimmed Volume</b>.&nbsp; Press <span&#10; style="font-weight: bold;">Done </span>to proceed to file cleanup. </span>&#10;<h1><br>&#10;</h1>&#10;<h1><small>XIII. Clean-up of intermediate files</small></h1>&#10;<p class="MsoNormal"><o:p></o:p></p>&#10;<p class="MsoNormal" align="center"> &nbsp;<o:p></o:p></p>&#10;<p class="MsoNormal">&nbsp;<o:p></o:p></p>&#10;</div>&#10;<div style="text-align: center;"><img src="etomoImages/delete.png"&#10; title="" alt=""><br>&#10;</div>&#10;<br>&#10;Cleaning up of your files is very important! The tomogram generation&#10;process creates many large, intermediate files. The <span&#10; style="font-weight: bold;">Intermediate file cleanup</span> box lists&#10;what we consider intermediate, nonessential files that can be&#10;deleted. Once you are satisfied that the final tomogram is truly final,&#10;you can select by highlighting the intermediate files and hitting the <span&#10; style="font-weight: bold;">Delete Selected</span> button. <br>&#10;<br>&#10;The final, dual-axis tomogram is named BB.rec and can be viewed outside&#10;of eTomo using the command, 3dmod BB.rec. Refer to the <a&#10; href="3dmodguide.html">3dmod Users Guide</a> for information about&#10;modeling the many cellular features in the tomogram.<br>&#10;<br>&#10;</body>&#10;</html>&#10;