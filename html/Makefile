#
# Makefile for html directory: Needs to be run after make in manpages and flib/man
# Updates library help, builds Qt compressed help and copies it to install dir

# Old command installs all files with extensions; add other files and directories to
# the NOEXT list - this may be used to build separate HTML packags
#
# $Id$
#
include ../configure

NOEXT = 3dmodimages etomoImages 3dmodHelp libhelp joinImages ctfHelp midasHelp plughelp

install : cleanjunk
	cd libdoc ; $(MAKE)
	./makeqhp
	qcollectiongenerator IMOD.qhcp
	chmod a+rx IMOD.qch IMOD.qhc
	if [ `pwd` != $(INSTDIR)/html ] ; then cp -f IMOD.qhc IMOD.qch $(INSTDIR)/html ; fi
#	if [ `pwd` != $(INSTDIR)/html ] ; then $(CP) -r *.[^q]* $(NOEXT) $(INSTDIR)/html ; fi

cleanjunk : 
	$(FIND) . -type f -name "*~"    -exec rm "{}" \;
	$(FIND) . -type f -name "#*#"   -exec rm "{}" \;
	$(FIND) . -type f -name "IMOD.qhp"   -exec rm "{}" \;

clean : cleanjunk
	$(FIND) plughelp -type f -name "*"   -exec rm "{}" \;
	$(FIND) libhelp -type f -name "*"   -exec rm "{}" \;
	$(FIND) man -type f -name "*"   -exec rm "{}" \;

