<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>3dmod Introduction</title>
</head>
<body>
<h2 align="center">Introduction to 3dmod, Version 3.3.4<br>
</h2>
<h3 align="center">Boulder Laboratory for 3-D Electron Microscopy of
Cells</h3>
<hr>
<h3>Table of Contents</h3>
<ul>
  <br>
  <a href="#Model Organization">Model Organization</a> <br>
  <a href="#Starting 3dmod"> Starting 3dmod</a> <br>
  <a href="#Information Window">The Information Window</a> <br>
  <a href="#Zap Window">The Zap Window</a> <br>
  <a href="#Object Edit">The Object Edit Dialog</a> <br>
  <a href="#Modeling in Zap">Modeling in the Zap Window</a> <br>
  <a href="#Zap Toolbar">The Zap Toolbar</a> <br>
  <a href="#Common Hot Keys">Most Frequently Used Hot Keys</a> <br>
  <a href="#XYZ Window">The XYZ Window</a> <br>
  <a href="#Slicer Window">The Slicer Window</a> <br>
  <a href="#Setting Z-scale">Setting Z-scale and Pixel Size</a> <br>
  <a href="#Viewing Model">Viewing the Model in 3D</a> <br>
  <a href="#Skinning Model">Putting a skin on model data</a> <br>
  <a href="#Advanced Topics">Advanced topics</a>
</ul>
<hr>
<a name="Model Organization"> <dd>
  <h3>Model Organization</h3>
It is helpful to understand the model data structure before trying
to create a model. A model is basically a collection of points that
refer to or mark
interesting locations in an image.
These points are stored in groups that are called contours. In the
simplest case, a contour is a closed boundary around a region in an
image. However, you should think of a contour more generally as a set
of associated points, which may or may not be connected by lines.
You will typically want to keep track of more than one type
of feature in an image. This is facilitated by allowing contours to be
grouped together into separate objects. Each object can be given its
own
name and all contours in the object share common attributes such as
color and line thickness. This table shows how
objects, contours, and points are organized in a hierarchy in the
model.
  <p></p>
  <center>
  <table border="2">
    <caption><b> Model Layout </b></caption> <tbody>
      <tr>
        <td colspan="3" td="" align="left"> <b>Model header:</b><br>
includes pixel size, Z-scale, and information relating model to image
coordinates. </td>
      </tr>
      <tr>
        <td valign="top">
        <table border="1">
          <tbody>
            <tr>
              <th>Object 1 </th>
            </tr>
            <tr>
              <td>Name = blobs<br>
Color = green<br>
Type = scattered points. </td>
            </tr>
            <tr>
              <td>Contour 1<br>
Point 1<br>
Point 2 </td>
            </tr>
            <tr>
              <td>Contour 2<br>
Point 1<br>
Point 2<br>
Point 3 </td>
            </tr>
            <tr>
              <td>Contour 3<br>
Point 1<br>
Point 2 </td>
            </tr>
          </tbody>
        </table>
        </td>
        <td valign="top">
        <table border="1">
          <tbody>
            <tr>
              <th>Object 2 </th>
            </tr>
            <tr>
              <td>Name = round thing.<br>
Color = red<br>
Type = closed. </td>
            </tr>
            <tr>
              <td>Contour 1<br>
Point 1<br>
Point 2<br>
Point 3<br>
Point 4<br>
Point 5<br>
Point 6 </td>
            </tr>
          </tbody>
        </table>
        </td>
        <td valign="top">
        <table border="1">
          <tbody>
            <tr>
              <th>Object 3 </th>
            </tr>
            <tr>
              <td>Name = stick<br>
Color = white<br>
Type = open. </td>
            </tr>
            <tr>
              <td>Contour 1<br>
Point 1<br>
Point 2<br>
Point 3<br>
Point 4<br>
Point 5 </td>
            </tr>
            <tr>
              <td>Contour 2<br>
Point 1<br>
Point 2<br>
Point 3<br>
Point 4 </td>
            </tr>
          </tbody>
        </table>
        </td>
      </tr>
    </tbody>
  </table>
  </center>
  <p> </p>
</dd>
</a><a name="Starting 3dmod"> <dd>
  <h3>Starting 3dmod</h3>
</dd>
</a>
<p>To create a model for a MRC image file called <code>example.mrc</code>
run the following 3dmod command.
This command will cause a new model to be created, ready to edit.
<br>
<code>3dmod example.mrc</code>
</p>
<p>If a model has already been saved but needs further editing run the
command
<br>
<code>3dmod example.mrc example.mod</code>
</p>
<p>When this command is run a window similar to the one below will open
up.
A secondary window containing the image of the image file and model
file is opened after the data has been loaded.
</p>
<p><a name="Information Window">
<h3>The Information Window</h3>
</a> </p>
<center> <img src="3dmodimages/infowin.png"
 alt="3dmod Information Window"> </center>
The 3dmod Information Window above is the main control window of the
program. It contains menus for performing file operations, selecting
model editing functions, and
opening various kinds of image windows.
It displays information about the
model and the current image point. There are also some controls that
govern the overall behavior of the program, and a status pane where
messages
are printed. Let us consider it from the top down.
<p>The title bar of the Info Window shows the name of the image file
and
also contains controls for minimizing the window or closing it, which
is a quick way to exit the program.
Below the menu line are some buttons that control window behavior, with
the name of the current model file shown on the right. The peg
button allows you to keep the Info Window on top of windows from all
other programs. The raise button (two up arrows) will bring all of
the windows of the current 3dmod above windows from other programs.
The "Show point" button will be explained in a moment.
</p>
<p>Below these buttons are a set of controls called spin boxes, which
are
now used extensively in 3dmod. A spin box shows a current value of some
parameter, and lets you change that parameter either by increasing or
decreasing it with the up and down arrow buttons, or by typing in a
new value. The three spin boxes on the left
show the current model object, contour and point, as well as the color
of
the current object.
The model being edited above has 4 objects; the 4th object
is currently selected. The 4th object has 11 contours and
the 5th contour is currently selected. This contour has 20 points and
the 10th point
is the current point. </p>
<p>Generally, when you change object, contour, or
point with one of these spin boxes, the program will show the new
current point in the image windows and change the section being
displayed if necessary. Sometimes you will not want this to happen,
such as when you want to switch between objects without having the
displayed section change. In that case, just turn off the "Show
point" checkbox.
</p>
<p>The three spin boxes on the right are the image position controls.
They show that the image dimensions are 572 by 378 and that
there are 78 sections. The current image point is at the location
(237,259) with the origin at the lower left corner of the image. The
current section is number 16. If you change the Z value, a different
section will be shown in image windows. You can change X and Y values
to move the current image point. The current image point is not the
same as the current model point. It is marked by a cross when the
program is not in model mode, and it determines what coordinates are
displayed in some of the image windows.
</p>
<p>At the bottom of the Info Window are the Black and White sliders,
which you
can use to adjust the contrast and
brightness of the displayed image. Pixel values between the selected
black and
white levels (147 and 234) are stretched out to occupy the full dynamic
range
of the
display. Moving the sliders toward each other will increase contrast,
while moving one or both to the left will increase brightness. </p>
<p> These
sliders have features common to nearly all of the slider controls in
3dmod. Clicking to one side of the handle with the left mouse button
will change the value by one. Clicking with the middle mouse button
will jump the slider to the position of the mouse pointer. Dragging
the handle by clicking and holding the left mouse button will cause
the image contrast to be
continuously updated until you release the button. In other words,
these sliders are continuously active, or "hot". Sometimes the program
will not perform well when a slider is continuously active, such as
with very large images or models. You can keep a slider from being
hot by holding down the C<!>trl key (Apple key on the Macintosh). When
you do this, the numeric value will be continuously displayed but the
image will not be updated until you release the slider.
</p>
<p>Below the sliders are several controls related to setting the
contrast.
</p>
<ul>
  <li> When the "Float" box is checked,
the program will adjust the black and white sliders automatically when
you change from one section to another in an attempt to maintain a
constant contrast and brightness between the images. </li>
  <li> The "Auto" button is for setting contrast automatically; when
you
press it the program will adjust the black and white sliders so that
the
displayed image has a defined mean and standard deviation. The settings
for the target mean and standard deviation can be changed in the
3dmod Preferences dialog box, available from the Edit-Options menu
entry.
For example, you could increase the target mean to make images
brighter,
or reduce the standard deviation to make images have less contrast. </li>
  <li> When the "Subarea" box is checked, both the "Float" operation
when
going between sections and the "Auto" contrast-setting operation
will be performed using only the image area displayed in the Zap
window. </li>
</ul>
<p>
The "Movie" and "Model" radio buttons allow a user to select one
of the two modes. When "Movie" is selected, pressing the middle or
right
mouse button will
cause the image
to movie back and forth. When "Model" is selected, the three different
mouse
buttons will edit the model, as described below.
</p>
<p>The bottom panel of the Info Window contains
additional information and status messages. You can expand the window
vertically to see more of the information at once.
</p>
<p><a name="Zap Window">
<h3>The Zap Window</h3>
</a>
<table border="0" align="center">
  <tbody>
    <tr>
      <td valign="top" align="center"><img
 src="3dmodimages/zapsec12.jpg" alt="Zap Window section 12"> <br>
      </td>
      <td valign="top" align="center"><img
 src="3dmodimages/zapsec16.jpg" alt="Zap Window section 16"> <br>
      </td>
    </tr>
  </tbody>
</table>
The main image display and model editing window within 3dmod
is the "Zap" window. The window name is an acronym for
"Zoom and Pan".
The zoom can be adjusted by clicking with the left mouse button on the
arrows at the
left side of the toolbar.
Alternatively, one can zoom up and down with the "=" and "-" hot keys,
respectively.
To pan the image when it is larger than the window, press and hold the
left
mouse
button in the image area of the window and
drag the image.
</p>
<p>This display of two nearby slices from a tomogram (sections 12 and
16) illustrates the three kinds of model objects: closed
contours, open contours, and scattered points.
</p>
<ul>
  <li>Closed contours are
used to draw closed boundaries around features in one image plane.
The light blue lines following the membrane around a vesicle are an
example of closed contours. As the
two different slices show, a separate contour is drawn in each section
where the feature appears. You can draw as many separate contours as
necessary to enclose the feature belonging to an object on one section.
After you have drawn
the model, you run a separate program, <a href="man/imodmesh.html">imodmesh</a>,
to connect the contours across the sections and create a surface that
can be viewed. Closed contours without point symbols are the default
when a
new object is created. The contour in section 16 does have some
circles drawn on it because it is the current contour. The first and
last points
of the current contour are highlighted with green and red circles,
while the current point has a yellow circle drawn on it. </li>
  <li>Open contours are used when the end of a contour should not be
connected
back to the starting point. There are two cases where this is
useful. If only part of an extended feature in present in the images,
you would draw an open contour in each section along the boundary of
the object. The yellow lines in the images are open contours showing
the
border of the darkly stained chromosome.
The other main use is to model trajectories in
3D, between sections. In the example images, open contours are used to
model microtubules through space, and the points are marked by green
circles.
Open contours are also used to track gold
fiducial particles through a tilt series. </li>
  <li>Scattered points are used when you do not want connecting lines
between
the successive
points of a contour. Such points are usually displayed as a sphere in a
3D view of the model, or as a circle in cross-sections such as in the
Zap window.
In the example, a small round vesicle has been modeled simply by
placing a
single scattered point on it on section 12 (magenta circle).
Depending
on the sphere radius selected, a scattered point will typically show up
on several sections,
with the circle becoming smaller away from the central section where
the point was placed (the circle is smaller on section 16). A
cross is drawn
inside the circle on the
central section to show that the point was deposited on that section;
if this does not make it clear enough you can also
make a separate symbol be displayed only on the central section. </li>
</ul>
<p>
<a name="Object Edit">
<h4>The Object Edit Dialog</h4>
</a>The type of contours in an object, and the symbols displayed at
individual points, can be selected with the Object Edit dialog box.
Here are two examples.
<table border="0" align="center">
  <tbody>
    <tr>
      <td valign="top" align="center"><img src="3dmodimages/ioeopen.png"
 alt="Object Edit window for open contours"> <br>
      </td>
      <td valign="top" align="center"><img
 src="3dmodimages/ioescatter.png"
 alt="Object Edit window for scattered points"> <br>
      </td>
    </tr>
  </tbody>
</table>
On the left
is a box for the open contour object that is used to track microtubules
between sections. A circle is selected for the symbol display, and
the symbol size has been set to 7, so that it will be easy to see the
symbol when there is only one point on a particular section. On the
right is a box for the scattered point object used to model small
vesicles;
here no symbol is
selected but the sphere radius for points has been set to 14.
</p>
<p><a name="Modeling in Zap">
<h4>Modeling in the Zap Window</h4>
</a>Model points are added or changed using a 3-button mouse with the
program in Model mode.
The table below gives an overview of the mouse controls in Movie and
Model mode.
<table border="2">
  <caption><b> Mouse Controls </b></caption> <tbody>
    <tr>
      <th> Mouse Button </th>
      <th colspan="3"> Movie Mode </th>
      <th colspan="3"> Model Mode </th>
    </tr>
    <tr>
      <td>Left </td>
      <td align="left" colspan="3"> Select position or drag mouse to
pan image.</td>
      <td align="left" colspan="3"> Attach to nearby model point or
drag mouse to pan image.</td>
    </tr>
    <tr>
      <td> Middle </td>
      <td align="left" colspan="3">Movie image forward, or stop movie.</td>
      <td align="left" colspan="3">Add new model point
or drag mouse to add several points. </td>
    </tr>
    <tr>
      <td> Right </td>
      <td align="left" colspan="3"> Movie image backward, or stop movie.</td>
      <td align="left" colspan="3"> Modify the current model point or
drag mouse to modify several points.</td>
    </tr>
  </tbody>
</table>
See the
<a href="man/3dmod.html">3dmod</a> manual page section on mouse
controls for more details. </p>
<p>When you first start a new model or a new object in a model, your
first model point will be added to an empty contour. There are two
basic ways to add model points to a contour. You can click
the middle mouse button to add each individual point after moving to a
desired position. The other way is to hold
down the middle button while dragging the pointer over a desired
path, which will add closely spaced points along the path. </p>
<p>Once you have finished a contour and want to start another one, you
need to create a new contour. This can be done with the menu entry
Edit-Contour-New, but is much more conveniently done by pressing "n",
which is one of many hot keys available to assist modeling. If you
are modeling with closed contours, a new contour is created
automatically when you switch to a new section and press the middle
mouse button.
</p>
<p>As you model, the last point added is left as the current model
point. You can change the current model point by clicking with the
left mouse button near a point in any contour that is present on the
section. This is one way to change the contour or object being
modeled.
If you click with the left button at a position that is far
from any model points, the current point and contour become
undefined. If you then add a model point, it will be placed in a new
contour, so this is yet another way to begin a new contour.
</p>
<p>The right mouse button is used to modify existing points by either
moving or deleting them. Use this button alone to move one or more
points; hold down the Ctrl key to delete points under the cursor while
clicking or holding down the right button.
</p>
<p><a name="Zap Toolbar">
<h4>The Zap Toolbar</h4>
</a></p>
<center> <img src="3dmodimages/zaptoolbar.png" alt="Zap window toolbar">
</center>
<p>The toolbar for the Zap window has a number of useful controls.
</p>
<ul>
  <li>In addition to the arrows for changing zoom to fixed zoom values,
there is a text box which both displays the current zoom value and
allows you
to enter any arbitrary zoom.
(Fractional zooms may be slower on some machines.) </li>
  <li>The Checkerboard button will toggle between fast drawing and
slower, high-resolution drawing with pixel smoothing when the zoom is
greater than 1. </li>
  <li>The Lock button is used to keep the image from centering on the
current
point and to allow different Zap windows to display different
sections.
When the lock is closed, the image will not move when the current model
point changes, but it can be moved with the mouse or the PageUp and
PageDown
keys. When the lock is open, the image may automatically pan to the
current
point, depending on the setting of the Centering button. This panning
does
not happen when the current point is selected or added by a mouse
button. </li>
  <li>The Centering button toggles between two centering modes. In one
mode,
the image will be centered on the current point only if it falls near
the
edge of the window, that is, outside of a central box. (Thus, the icon
shows
one box inside another.) In the other mode, the
image will be recentered on the current point each time you change the
current point. (The icon shows a point inside the outer box.) </li>
  <li>The Insert, or Modeling Direction, button toggles between
inserting points before and inserting points after the current model
point.
This is useful when modeling a feature that passes between sections,
in case you need to add points to the start of a contour.</li>
  <li>The Rubberband button toggles the rubberband on and off.&nbsp;
The rubberband can be used for getting coordinates, resizing, and
setting contrast in selected areas.&nbsp; The rubberband is initially
positioned by pressing the left mouse button at the upper left corner
of the desired area and dragging to the lower right, and then can be
repositioned and resized with left and middle mouse buttons.<br>
  </li>
  <li>The Z slider allows you to riffle through the sections and select
a particular one. The text box shows the value of the current section
being viewed in the Zap window and allows you to go to a particular
section
by entering a number. </li>
  <li>The I button brings the Info Window to the top and prints
information there about the image and window size. </li>
  <li>Finally, there is a Help button to open a window with help for
all
features of the Zap window. Almost all image windows and dialog boxes
have a Help button to provide window-specific information. </li>
</ul>
<p>
<a name="Common Hot Keys"><dd>
  <h3>Most Frequently Used Hot Keys</h3>
</dd>
</a></p>
<p>3dmod has many hot keys, which are listed both in the man page for <a
 href="man/3dmod.html">3dmod</a> and in a help window that can be
accessed from the Help-Hot Keys menu entry. These hot keys will work
from all of the 3dmod image display windows, and even from the Info
Window or other dialog boxes. There are also hot keys active only in
particular windows, which are described in the help for those windows.
The most commonly used hot keys
are listed here:
</p>
<pre>PageUp     Show the next section (increase Z)<br>PageDown   Show the previous section (decrease Z)<br>Home       Show the last section<br>End        Show the first section<br>Delete     Delete current model point<br>-          Zoom down<br>=          Zoom up<br>s          Save the model<br>n          Start a new contour<br>Ctrl-S     Snapshot an image window to a Tiff file<br>t          Toggle model drawing off or on<br>,          Slow down movie or model rotation<br>.          Speed up movie or model rotation<br></pre>
<p>
<a name="XYZ Window"> <dd>
  <h3>The XYZ Window</h3>
</dd>
</a></p>
<center> <img src="3dmodimages/xyzwin.jpg" alt="XYZ Window"> </center>
<p>The XYZ Window shows not just the XY plane but also the two
orthogonal
planes, YZ and XZ. It allows you to movie through the volume in any
of these planes independently, and also displays the intersection of
the model with each of the three planes. In the example, the XY plane
is in the lower left, the XZ plane is above it, and the YZ plane is to
the right.
The current image point governs which planes are
displayed; its position is marked by a small yellow cross in each
image panel. You can see the large modeled vesicle in the XZ (top)
plane, and
an oblique slice through the microtubule marked by the small yellow
cross in the YZ (right) plane.
</p>
<p>The colored marker lines in the margins of the images also
indicate the current point coordinates. They contain small handles
that can be grabbed with the mouse to riffle through the images in one
plane. The color of the marker line matches the color of the border
around the image
that is controlled by it; for example, the red line controls the plane
selected in the upper panel.
</p>
<p>The display of the model in the XY plane is essentially the same as
in
the Zap window. In the other planes, scattered points will show up as
circles, and other segments of contours will appear to the extent that
they intersect the plane.
</p>
<p>The XYZ Window can be zoomed with the "-" and "=" hot keys and
panned
with the mouse.
In Movie mode, the mouse buttons behave the
same as in the Zap Window, and they act separately in the three image
panels
for selecting the current image point or starting a movie in that
panel.
Basic modeling can also be done in the XY plane, again with the same
mouse button
functions as in the Zap window. </p>
<p><a name="Slicer Window"> <dd>
  <h3>The Slicer Window</h3>
</dd>
</a></p>
<center> <img src="3dmodimages/slicer.jpg" alt="Slicer Window"> </center>
<p>The Slicer Window provides a much more flexible view of structures
than the
XYZ Window because it can display a slice at an arbitrary orientation
through the image volume. The orientation is set by adjusting the X,
Y, and Z rotation sliders in the second toolbar. In the example, one
of the oblique microtubules was centered in the window, then the
Z rotation was adjusted slightly to orient the microtubule vertically,
then the X rotation was adjusted to bring the microtubule into
longitudinal section. Small changes in the X and Y sliders usually
cause big
changes in the image appearance, whereas the Z slider will primarily
rotate the
image clockwise and counterclockwise unless X or Y angles are large.
</p>
<p>The center of the displayed slice is the current
image point and is marked by a red cross. This center point may be
moved either by changing the current image point in some other window,
or by clicking on the image in this Slicer Window with any mouse
button.
</p>
<p>The most useful items in the slicer toolbars are the following.
</p>
<ul>
  <li>The arrow buttons can be used to change zoom, and the text box
displays the current zoom and allows a custom zoom to be entered. </li>
  <li>The checkerboard allows you to toggle between rapid,
low-resolution drawing using nearest-neighbor interpolation, and
high resolution drawing using quadratic and cubic
interpolation. The latter may be considerably slower, but it will
also be more accurate as well as giving a smoother image. </li>
  <li>The lock button will prevent the slice position from being moved.
There are three main uses for this feature. First, it allows you to
maintain a selected view in a Slicer Window while changing to other
views in other windows (including other Slicers). Second, it allows
you to model in the slicer without having the slice jump around.
Third, it prevents the slow drawing in the slicer from slowing down
the program when you want to work in or movie through other windows. </li>
  <li>The help button describes hot keys and other features. </li>
  <li>The box to the right of the sliders portrays the portion of the
slice being viewed as a red plane inside of a representation of the
whole image volume. </li>
  <li>The image thickness spin box lets you display a slice thicker
than 1 pixel thick. The Slicer computes a projection through the
number of slices that you select, effectively averaging those slices. </li>
  <li>The model thickness spin box lets you control the thickness of
the
slice of model that is displayed on the image. In the example, the
circles at each microtubule point are considered to lie in the XY
plane and only a fragment of each intersects the tilted slice.
Increasing the model thickness would make the whole circle show up. </li>
</ul>
<p>The middle and right mouse buttons will start a movie in the Slicer
window, as in the Zap window.&nbsp; The program will movie through
slices in a direction prependicular to the current slice, and will even
adjust its direction if you change the rotation sliders while it is
movieing.<br>
</p>
<p>It is possible to model in the Slicer, again with the same mouse
button functions as in the Zap window. This provides a convenient way
to track trajectories on 3D. If the lock button is not on,
every mouse click will bring the selected point to the center.
Sometimes
this behavior is desirable, sometimes not. If not, just lock the
slicer
for modeling.
</p>
<p>The power of the Slicer comes at a cost - it is the first window
that we have seen where the computation time can easily make the
display unacceptably slow. Display time depends on three factors:
image thickness, high versus low resolution, and image size. If you
need to average through many slices with a high resolution display, be
sure to make the image as small as possible. If you must work with a
very slow slicer window, remember that the hot sliders can be tamed
with the Ctrl key.
</p>
<p><a name="Setting Z-scale"> <dd>
  <h3>Setting Z-scale and Pixel Size</h3>
</dd>
</a>In order for your model to look right in 3D, you may need to set a
property
called the "Z-scale" correctly. Both the Z-scale and the pixel size
must be set to get accurate quantitative information about the model,
because these values are used for calculating length, surface area
or volume from object, contour or mesh data.
To adjust these fields in the model header
select the Model Header menu item from the Edit menu in the
3dmod <a href="#Information Window">Information Window</a>.
</p>
<p>The Z-Scale is the ratio of the thickness between successive images
to the pixel size. Its two most common uses are to adjust for
section thickness in serial section reconstructions and section
thinning
in tomography. For serial sections, divide the section thickness in
nanometers by the pixel size at which the data were digitized, again
in nanometers. For tomograms, divide the original thickness at which
the section was cut on the microtome (in nanometers) by the actual
thickness of
material in the tomogram (pixels of material times pixel size in
nanometers).
</p>
<p>The Pixel Size field should contain both a value for the size of the
pixel in the digitized data, and the units for that value.
Units can be one of the following; A, nm, um, mm, m, km. For example,
you could enter "0.015 um" or "15 nm".
</p>
<p><a name="Viewing Model"> <dd>
  <h3>Viewing the Model in 3D</h3>
</dd>
</a>
<table border="0" align="center">
  <tbody>
    <tr>
      <td valign="top" align="center"><img src="3dmodimages/modvraw.png"
 alt="View of raw model"> <br>
      </td>
      <td valign="top" align="center"><img
 src="3dmodimages/modvnomesh.png"
 alt="View of model with spheres and lines enhanced"> <br>
      </td>
      <td valign="top" align="center"><img
 src="3dmodimages/modvmesh.png" alt="View of fully meshed model"> <br>
      </td>
    </tr>
  </tbody>
</table>
</p>
<p>These are different views of the example model in the Model View
Window, which can be opened while running 3dmod by selecting Model
View from the Image menu, or by typing the hot key "v".
This same window can be opened in
a standalone mode with
<br>
<code> 3dmodv example.mod</code>
<br>
The model has been
tilted around the X and Y axes using the arrow keys on the keypad.
The model can also be rotated with the middle mouse button, or using
arrows and text boxes in the
Control dialog box that can be opened using the Edit-Controls menu
entry, but the arrow keys are often more convenient. A single keystrike
rotates the model by one step. Continuous rotation is started by
pressing the keypad Enter key followed by the desired arrow key;
another press of the Enter key stops the rotation.
</p>
<p>On the left is the initial view of the model, before any of the
default viewing parameters have been changed. These parameters are
initially set to show open and closed contour objects with contour line
tracings, and scattered points as wire baskets. The middle view shows
two changes that can be made immediately, without having to compute
surface meshes for the contours. The microtubule lines (green) have
been made
thicker and the scattered points are displayed as lighted surfaces.
On the right is the display after making a meshes for the objects (as
explained below) and setting all objects to display as lighted
surfaces. These display settings are all changed in the 3dmodv
Objects dialog box, opened with the Edit-Objects menu item or the O hot
key. </p>
<p>
<table border="0" align="center">
  <tbody>
    <tr>
      <td valign="top" align="center"><img
 src="3dmodimages/objedmtlines.png"
 alt="Objects Window: Setting line width"> <br>
      </td>
      <td valign="top" align="center"><img
 src="3dmodimages/objedspheremesh.png"
 alt="Objects Window: Setting spheres to mesh"> <br>
      </td>
      <td valign="top" align="center"><img
 src="3dmodimages/objedmaterial.png"
 alt="Objects Window: Lighting both sides of sheet"> <br>
      </td>
    </tr>
  </tbody>
</table>
</p>
<p>The Objects dialog box contains controls for selecting the current
object to be edited, buttons for turning individual objects on or off,
and a set of panels for setting different object properties or
controlling the overall display. A panel is selected by clicking on
its name in the list.
</p>
<p>The example on the left shows how the appearance of the green lines
was changed for the middle model view panel above. The "Lines" panel
was selected, the line width was increased from 1 to 3, and
"Anti-alias rendering" was turned on to smooth out the jagged edges of
the lines.
</p>
<p>The example in the middle shows how the scattered points were
displayed as solid objects. The selection for "Draw Data Type" was
changed from "Contour" to "Mesh". 3dmod automatically changed "Drawing
Style" from "Line" to "Fill" to produce the most commonly desired
appearance.
</p>
<p>The example on the right shows a change that was required after
meshes
were computed and displayed for all
objects. By default, objects are lit only on one surface, which is
always the outer
surface for closed contour objects. (Note the dark surfaces on the
interior of the microtubules.) However, a sheet like the chromosome
boundary (yellow) does not have an obvious interior surface, and its
lit surface happened to face downward, toward the chromosome. This
problem was solved by checking the "Light Both Sides" option in the
"Material" panel. The other method of solving this is to go back to
the 3dmod Object Edit dialog box and change the "Front Face" from
"Outside" to "Inside", then recompute the mesh.
</p>
<p>The appearance of the magenta scattered point was improved between
the middle
and right views of the model by pressing the "g" hot key twice to
increase sphere drawing quality. When there are many spheres, this
degree of quality could
significantly increase drawing time for the display, so it is not the
default.
The sphere drawing quality can also be controlled in the "Points"
panel, which allows one to change the global quality setting (just as
with the "g" and "G" hot keys) as well as set a quality for individual
objects.<br>
</p>
<p>When the Model View window is opened from 3dmod, it is possible to
display the image data together with the model in this window.&nbsp;
Use the Edit-Image menu entry to open a dialog to control many aspects
of the image
projection.&nbsp; The following images show an example of this display.<br>
</p>
<p><br>
<table border="0" align="center">
  <tbody>
    <tr>
      <td valign="top" align="center"><img
 src="3dmodimages/imageInModv.jpg" alt="Model View: Image on model"> <br>
      </td>
      <td valign="top" align="center"><img
 src="3dmodimages/editImage.png" alt="Edit Image Window"> <br>
      </td>
    </tr>
  </tbody>
</table>
</p>
<p><a name="Skinning Model"> <dd>
  <h3>Putting a skin on model data</h3>
</dd>
</a>Skinning is the name used for calculating a three-dimensional
surface from contour data. This surface, once calculated, is
represented by
a mesh of triangles that can be stored within each object.
If any contour points within that object are edited then the mesh
for that object must be recalculated in order for it to match
the contour data.
The <a href="man/imodmesh.html">imodmesh</a> program must be used
to calculate the mesh from the contour data within a model
since the skinning calculation can take many seconds for large objects.
</p>
<p>To skin the example model, this command was used:
<br>
<code>imodmesh -C -t 1 -d 10 example.mod</code>
</p>
<p>By default, imodmesh will construct meshes only between pairs of
contours, which will leave holes at the top and the bottom of a closed
contour object because
there is nothing to connect the highest and lowest contours to.
The "-C" option tells imodmesh to fill in these holes
or "Cap" them off.
</p>
<p>In the model view on the right, the lines of the microtubules appear
as tubes because imodmesh created cylindical meshes around them. It
did this because of the
"-t" option, which is followed by a list of open contour object numbers
that should be given tubular meshes
(here, just object 1). The "-d" option is then used to specify the
diameter of the tubes, in pixels (10).
</p>
<p>It is easy to lose your meshed model if you are modeling in 3dmod,
save the model, run imodmesh, look at the meshed model with 3dmodv,
then continue modeling in 3dmod and save the unmeshed model again.
There are two ways to
avoid this problem. You can exit from 3dmod before you run imodmesh, so
that you will be working with the meshed model when you
start 3dmod again. Or, after running imodmesh, be sure to read the
meshed model back into 3dmod with the Open Model entry in the File
menu.
</p>
<p>Sometimes the mesh data structure can get so large that interactive
viewing is very slow. There are two ways to make a mesh with a lower
resolution, the "-R" option to skip points within contours and
the and "-i" option to skip Z levels. With "-R", imodmesh will skip
points that are within a certain distance of the line segments between
the remaining points, thus preserving the shape of
curves. For example,
<br>
<code>imodmesh -C -o 4 -R 0.75 -i 2 example.mod</code>
<br>
Here, a new mesh is created only for object 4 (-o 4), and
points will
be skipped, but the surface defined by the mesh will always be within
0.75
pixel of the original data (-R 0.75). In addition, the "-i 2" makes
imodmesh connect every other Z plane (i.e., at intervals of 2 in Z),
reducing the mesh size by 2.
</p>
<p>Each time you run imodmesh, the existing file is saved as a backup
file
with a "~" added to its name. You can also erase all of the mesh data
from your model using the "-e" option to imodmesh.
</p>
<p>Imodmesh also has an option (-l) to store a low resolution mesh
alongside a
regular mesh, so that a big model can be manipulated rapidly in
low-resolution mode then switched to high-resolution mode for studying
details.
Other commonly needed options are -s and -P to connect contours across
gaps; see the <a href="man/imodmesh.html">imodmesh</a> man page for
details.
</p>
<p><a name="Advanced Topics"> <dd>
  <h3>Advanced topics</h3>
</dd>
</a>This section is to make you aware of some other features in 3dmod,
so
that you can
investigate them when the need arises. Consult the help windows of
the relevant dialog boxes, or the <a href="man/3dmod.html">3dmod</a>
man page, for more details.
The first few items are related to
the
Contour/Surface/Point window, shown here.
</p>
<center> <img src="3dmodimages/surfcontpt.png"
 alt="Surface/Contour/Point
Dialog Box"> </center>
<ul>
  <li><b>Surfaces.</b> Surfaces are an optional level of organization
between
objects and contours. They are particularly useful when you want to
keep track of many components of one kind, without making a
separate object for each. Quantitative information can then be
derived for each different surface. The top section of this dialog
box has some controls for creating and navigating through surfaces,
and its help window has more information about them. </li>
  <li><b>Open and closed contours.</b> Some of the contours in a closed
contour object can be defined as open, which means that their starting
and
ending points
will not be connected. This is useful when modeling a feature that is
partially or completely cut by the boundary of a data set.
See the <a href="man/imodmesh.html">imodmesh</a> man page as well as
the help window for this dialog box for details. </li>
  <li><b>4D modeling.</b> 3dmod can load multiple image files, which
occupy a
fourth dimension referred to as "time". Thus, contours in an object can
be at different times. </li>
  <li><b>Point sizes.</b> Not all points in a scattered point object
need to
be the same size; individual points can be given different sizes using
the controls in the Point section of this dialog box. There is even a
way to draw a closed contour around a feature and have it converted to
a scattered point with the equivalent radius (see the dialog box
accessed
from the Edit-Contour-Move menu entry). </li>
  <li><b>Ghost displays.</b> You can project a "ghost" of contours on
adjacent
sections onto the current section to help you see where to draw the
next contour. </li>
  <li><b>Preferences.</b> You can set preferences that are stored
between
sessions
of 3dmod, such as the assignment of
the three mouse buttons. Use the Edit-Options menu entry to open the
3dmod Preferences dialog box. </li>
  <li><b>Automated modeling.</b> There are two facilities for automated
modeling.
The Auto Contouring dialog box, opened from the Edit-Contour menu,
will draw contours around areas that are above or below a selected
threshold of intensity. The Line Track plugin, opened from the Special
menu, will draw
contours along a linear feature such as a membrane, either by filling
in points
between two points placed along the feature, or by copying a contour
from one section to the next and adjusting its position to fit changes
in the boundary or the object. </li>
  <li><b>Pixel View window.</b> Use the Image-Pixel View menu entry to
open a
window
that displays a grid of pixel intensity values. The actual values
from the image file are shown. </li>
  <li><b>Graph Window.</b> Use the Image-Graph menu entry to open a
window
that can display a graph of pixel values along a line or along a
contour. </li>
  <li><b>Tumbler Window.</b> Use the Image-Tumbler menu entry to open a
window
that will show a projection through a small volume of data as the
volume is tilted to different orientations. </li>
  <li><b>Making movies.</b> In addition to being able to snapshot a
window
with a hot key, you can open two dialog boxes that will help you
collect a series of snapshots for making movies. The Edit-Movies
entry in the menu of the 3dmod Info Window opens a box for capturing
movies from the Zap window, and the File-Movies entry in the menu of
the Model View Window opens a box for making movies of the model
view.&nbsp; The latter also has an option for capturing a very high
resolution snapshot of the model view that can be used for making
figures.<br>
  </li>
  <li><b>Object color.</b> You can change an object's color using the
Edit-Object-Color menu entry from the 3dmod Info Window, as well as
using the Edit-Objects dialog box from the Model View Window.</li>
  <li><span style="font-weight: bold;">Saving views.</span>&nbsp; The
Edit-Views entry in the menu of
the Model View Window opens a dialog that allows you to save distinct
views of the model, which can differ in many features such as
orientation, the selection of objects displayed, and object properties
such as color and lighting characteristics.&nbsp; Once you have saved
the views you switch between them easily.<br>
  </li>
  <li><b>Editing contours.</b> The Edit-Contour menu has a number of
advanced
editing features, including ones to move or copy contours from one
object to another, and ones to break and
join contours. </li>
  <li><b>Tooltips.</b> If you leave the mouse over a button or other
control
for over half a second, a tooltip will appear for that control. </li>
</ul>
</body>
</html>
