     BBoouullddeerr LLaabboorraattoorryy ffoorr 33--DDiimmeennssiioonnaall EElleeccttrroonn MMiiccrroossccooppyy ooff CCeellllss

MAKEGRADTABLE(1)					       MAKEGRADTABLE(1)

NNAAMMEE
  makegradtable - make a magnification gradient table

SSYYNNOOPPSSIISS
  makegradtable [options] output_file

DDEESSCCRRIIPPTTIIOONN
  Makegradtable can be used to construct a magnification gradient table from
  two kinds of data: gradients based upon analysis of montaged images at high
  tilt, and transformations that align images taken at different Z heights.
  In the one case it will read a log file from running Findgradient(1), and in
  the other case it will read the transformation file produced by Xfalign(1)
  and possibly edited in Midas(1).  These data can be smoothed and
  extrapolated as needed.  To do this, the program will transform the beam
  intensity values into: 1 / (Intensity - crossover).  Gradients are nearly
  linearly related to this transformed intensity value, so lines can be fit to
  the points and used for smoothing and extrapolation. 

  To run the program, you must have a file of the intensities extracted from
  the original image file header, which can be obtained with 
    extracttilts -int input_file output_file
  You must also supply the intensity of beam crossover for the given spot
  size.

  To derive a gradient table from montages, enter the name of the log file
  from Findgradient with the FindgradFile option.  This file should contain
  program output once for each intensity that is to be included in the
  gradient table.  The output can be from running each section separately or
  from running several sections together (i.e., ones taken at the same
  intensity).  If more than one run of Findgradient was needed to analyze the
  montages, the log files can simply be concatenated; just be sure that each
  intensity is represented only once.  The section numbers given in the log
  file will be used to look up the intensities from the intensity file.

  To derive a gradient table from images taken at different Z heights, the
  original image stack should consist of image pairs where the intensity is
  kept the same for the two images of a pair, and the stage is moved by the
  same amount and in the same direction for each pair.  Transformations can
  be obtained with Xfalign(1) using the -bpair option, which will just align
  the paired images to each other.  When running Makegradtable, enter the name
  of the transform file with the TransformFile option and enter the Z height
  change if it is different from 10 microns.  The program will obtain
  gradients from every second transform in the file.

  The program will produce a version 2 mag gradient table with the following
  format, with the last line repeated for each intensity:
     Version_number
     crossover_intensity
     intensity   %_mag_change_per_micron  degrees_rotation_per_micron
     ...

  Makegradtable uses the PIP package for input exclusively (see the manual
  page for pip(1)).  The following options can be specified either as command
  line arguments (with the -) or one per line in a command file or parameter
  file (without the -):

INSERT OPTION TEXT HERE

  -StandardInput
     Read parameter entries from standard input.

HHIISSTTOORRYY
  Written by David Mastronarde, February 2006
