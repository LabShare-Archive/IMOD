Version = 1.0
Pip = 1

[Field = InputFile]
short = input
long = InputFile
type = FNM
usage = Input image file
tooltip = 
manpage = Input image file.  Input files may also be entered after all 
arguments on the command line, as long as an output file is the last name
on the command line.  Files entered with this option will be 
processed before files at the end of the command line, if any.

[Field = OutputFile]
short = output
long = OutputFile
type = FNM
usage = Output image file
tooltip = 
manpage = Output image file.  The last filename on the command line will
also be treated as an output file, following any specified by this option.

[Field = FileOfInputs]
short = fileinlist
long = FileOfInputs
type = FN
usage = Name of file with list of input files and sections to read
tooltip = 
manpage = Name of file with list of input files and sections to read.  The
format of the file is the number of input files on the first line, the first
file to read on the next line, the list of sections to read on
next line, next filename on next line, etc.  If this
option is used, no input filenames may be specified with the -input option
or following options on the command line.

[Field = FileOfOutputs]
short = fileoutlist
long = FileOfOutputs
type = FN
usage = Name of file with list of output files and number of sections in each
tooltip = Name of file with list of output files and number of sections to 
place in each
manpage = Name of file with list of output files and number of sections to 
place in each.  The
format of the file is the number of output files on the first line, the first
file to write on the next line, number of sections to write on
next line, next filename on next line, etc.  If this
option is used, no output filenames may be specified with the -output option
or as the last file on the command line.

[Field = SectionsToRead]
short = secs
long = SectionsToRead
type = LIM
usage = List of sections to read from input file, numbered from 0.  
The default is all sections.  Ranges are allowed.
tooltip = 
manpage = List of sections to read from an input file, numbered from 0.
Ranges may be entered (e.g., 1-3,5,8), and / may be used to specify all
sections in the file.  If multiple lists are entered, each
one will be applied to the respective input file.  If no list is entered for
a file, all sections will be read.

[Field = NumberToOutput]
short = numout
long = NumberToOutput
type = IAM
usage = Number of sections to write to an output file
tooltip = 
manpage = Number of sections to write to each output file, when there are
multiple output files.  These numbers may be listed in sequence in one entry,
or in several entries.

[Field = SizeToOutputInXandY]
short = size
long = SizeToOutputInXandY
type = IP
usage = Size of output image in X and Y; default is size of first input 
file.
tooltip = 
manpage = The dimensions of the output image in X and Y.
The default size is the same as that of the first input file.


[Field = ModeToOutput]
short = mode
long = ModeToOutput
type = I
usage = Storage mode of output file; 0 for byte, 1 for integer, 2 for real
tooltip = 
manpage = The storage mode of the output file; 0 for byte, 1 for 16-bit 
integer, or 2 for 32-bit floating point.  The default is the mode of the first
input file.

[Field = OffsetsInXandY]
short = offset
long = OffsetsInXandY
type = FAM
usage = X and Y center offsets for each section, or one X,Y pair to apply to 
all sections
tooltip = 
manpage = X and Y center offsets for each section.  This is an offset to the
center of the area from which image will be taken, so a positive offset in X
will move images to the left.  Enter one X,Y pair to apply a single offset to
all sections.

[Field = ApplyOffsetsFirst]
short = applyfirst
long = ApplyOffsetsFirst
type = B
usage = Apply offsets in X and Y before transforming image (default is after)
tooltip = 
manpage = Apply offsets in X and Y before transforming image, which will make
a rotated image come from a predictable location.  The default is to apply
offsets after, which shifts the transformed image instead.

[Field = TransformFile]
short = xform
long = TransformFile
type = FN
usage = File with linear transformations to apply to images
tooltip = 
manpage = File with one or more linear transformations to apply to images

[Field = UseTransformLines]
short = uselines
long = UseTransformLines
type = LIM
usage = List of line numbers of transforms to apply, numbered from 0.
tooltip = 
manpage = A list of the line numbers of lines of transforms to use in the
transform file (numbered from 0).  Ranges are allowed.  The default is for the
line numbers to match the input section numbers.  To have a single
transform applied to all of the sections, just enter a single number.

[Field = RotateByAngle]
short = rotate
long = RotateByAngle
type = F
usage = Rotate all images by the given angle
tooltip = Rotate all images by the given angle in degrees, counterclockwise
positive.
manpage =  Rotate all images by the given angle in degrees, positive for a
counterclockwise rotation.  Rotation is applied after binning and 
transformation, if any. If 
the rotation is by +90 or -90 degrees and no
output size
is specified, then the X and Y sizes of the image will be transposed so
the the output file will show the whole rotated image.  For any other rotation 
angles, you will get the same output size as the input image unless you
enter a new size explicitly.

[Field = ExpandByFactor]
short = expand
long = ExpandByFactor
type = F
usage = Scale all images in size by the given factor
tooltip =
manpage = Scale all images in size by the given factor, greater than 1 to 
expand, or less than 1 to shrink.  Scaling is applied after binning and
transformation, if any.  If no output size is specified, the size of the input
image will be scaled appropriately so that the output will contain the entire
image.

[Field = BinByFactor]
short = bin
long = BinByFactor
type = I
usage = Use binning to reduce images in size by the given factor
tooltip = 
manpage = Use binning to reduce images in size by the given factor.  Binning
is applied before all other image transformations.  If no output size is
specified, the size of the input image will be scaled appropriately so that
the output will contain the entire image.

[Field = LinearInterpolation]
short = linear
long = LinearInterpolation
type = B
usage = Use linear instead of cubic interpolation to transform images
tooltip = 
manpage = Use linear instead of cubic interpolation to transform images.
Linear interpolation is more suitable when images are
very noisy, but cubic interpolation will preserve fine detail better when
noise is not an issue.  Images are
transformed when the -xform, -expand, -rotate, -distort, or -gradient
option is entered.

[Field = FloatDensities]
short = float
long = FloatDensities
type = I
usage = Rescale densities of sections separately to fill data range (1), to 
bring to common mean and SD (2), to shift to common mean (3), or to shift to
common mean and rescale (4)
tooltip = 
manpage = Adjust densities of sections individually.  Enter 1 for each section
to fill the data range, 2 to scale sections to common mean and standard
deviation, 3 to shift sections to a common mean without scaling, or 4 to
shift sections to a common mean then rescale the minimum and maximum densities
to the Min and Max values specified with the -scale option.

[Field = ContrastBlackWhite]
short = contrast
long = ContrastBlackWhite
type = IP
usage = Rescale densities to match contrast in 3dmod with the
given black and white values
tooltip = 
manpage = Rescale densities to match the contrast seen in 3dmod(1) with the
given black and white values.  This works properly only when the output file
will be bytes.  It will not work if the data were loaded into
3dmod with intensity scaling; use mrcbyte(1) in that case.

[Field = ScaleMinAndMax]
short = scale
long = ScaleMinAndMax
type = FP
usage = Apply one density scaling to all sections to map current min and max 
to the given Min and Max
tooltip = 
manpage = Rescale the densities of all sections by the same factors so that
the original minimum and maximum density will be mapped to the Min and Max
values that are entered.

[Field = MultiplyAndAdd]
short = multadd
long = MultiplyAndAdd
type = FPM
usage = Scale all sections by multiplying by first value then adding the second
tooltip = 
manpage = Rescale the densities of all sections by multiplying by the first
entered value then adding the second value.  This option must be entered either
once only, or once per input file.

[Field = DistortionField]
short = distort
long = DistortionField
type = FN
usage = Image distortion field file to use for undistorting images
tooltip = 
manpage = Image distortion field file to use for undistorting images.  The 
undistortion is applied before any transformations.

[Field = ImagesAreBinned]
short = imagebinned
long = ImagesAreBinned
type = I
usage = The current binning of the images
tooltip = 
manpage = The current binning of the images, so that the distortion field can
be applied correctly.  This entry is required unless
the program can determine the binning unambiguously from the image size.

[Field = GradientFile]
short  = gradient
long = GradientFile
type = FN
usage = File with magnification gradients to be applied for each image
tooltip = 
manpage = File with magnification gradients to be applied for each image.
This should be a file listing the tilt angle, the percent magnification change
per micron of Z height, and the degrees of rotation per micron of Z height
for each image, such as is produced by Extractmaggrad.  The mag gradient
correction is applied before a distortion field correction and before any
transformations.

[Field = TestLimits]
short = test
long = TestLimits
type = IP
usage = Total size of working array, and size of binning array
tooltip = 
manpage = To test the code for reading in and binning images in chunks,
enter limits for the total size of the working array, and for the size of 
the array used for binning.

[Field = ParameterFile]
short = param
long = ParameterFile
type = PF
usage = Read parameter entries from file
tooltip = 
manpage = Read parameter entries as keyword-value pairs from a parameter file.

[Field = usage]
short = help
long = usage
type = B
usage = Print help output
tooltip = 
manpage = 
