Version = 1.2

[function = main]
[[if = test-gui]]
run.function.test1 =
[[]]
run.function.create =
[[if = test-gui]]
assert.exists.file = eraser%{axis}.log
run.function.create =
assert.exists.file = eraser%{axis}.log~
[[]]
bn.use-fixed-stack = 
[[if = test-gui]]
run.function.test2 =
[[]]
bn.done =


[function = create]
bn.create-fixed-stack =
wait.process.ccd-eraser = done


[function = test1]
#
# copytomocoms
#
assert.exists.file = align%{axis}.com
assert.exists.file = eraser%{axis}.com
assert.exists.file = mtffilter%{axis}.com
[[ifnot = montage]]
	assert.exists.file = newst%{axis}.com
	assert.exists.file = prenewst%{axis}.com
[[]]
[[if = montage]]
	assert.exists.file = blend%{axis}.com
	assert.exists.file = preblend%{axis}.com
[[]]
assert.exists.file = sample%{axis}.com
assert.exists.file = tilt%{axis}.com
assert.exists.file = tomopitch%{axis}.com
assert.exists.file = track%{axis}.com
assert.exists.file = xcorr%{axis}.com
#
# ccd eraser
#
bn.advanced =
# values
assert.tf.peak-criterion = 10.
assert.tf.difference-criterion = 8.
assert.cb.automatic-x-ray-replacement = 1
assert.tf.grow-criterion = 4.
assert.tf.edge-exclusion = 4
assert.tf.maximum-radius=%{maximum-radius}
assert.tf.annulus-width = 2.0
assert.tf.xy-scan-size = 100
assert.tf.scan-criterion = 3.
assert.bn.find-x-rays = 0
assert.bn.view-x-ray-model = 0
assert.tf.input-file = %{dataset}%{axis}.st
assert.tf.output-file = %{dataset}%{axis}_fixed.st
assert.tf.border-pixels = 2
assert.tf.polynomial-order = 2
assert.cb.include-adjacent-points = 1
assert.bn.create-fixed-stack = 0
assert.bn.view-fixed-stack = 0
assert.bn.use-fixed-stack = 0
# enabled
assert.enabled.tf.peak-criterion =
assert.enabled.tf.difference-criterion=
assert.enabled.cb.automatic-x-ray-replacement=
assert.enabled.tf.grow-criterion = 
assert.enabled.tf.edge-exclusion = 
assert.enabled.tf.maximum-radius = 
assert.enabled.tf.annulus-width = 
assert.enabled.tf.xy-scan-size = 
assert.enabled.tf.scan-criterion = 
assert.enabled.bn.find-x-rays = 
assert.enabled.bn.view-x-ray-model = 
assert.enabled.tf.input-file = 
assert.enabled.tf.output-file = 
assert.enabled.tf.border-pixels = 
assert.enabled.tf.polynomial-order = 
assert.enabled.cb.include-adjacent-points = 
assert.enabled.bn.create-fixed-stack = 
assert.enabled.bn.view-fixed-stack = 
assert.enabled.bn.use-fixed-stack = 
#enable/disable
cb.automatic-x-ray-replacement = 0
assert.disabled.tf.peak-criterion = 
assert.disabled.tf.difference-criterion = 
assert.disabled.tf.grow-criterion = 
assert.disabled.tf.edge-exclusion =
assert.disabled.tf.maximum-radius = 
assert.disabled.tf.annulus-width = 
assert.disabled.tf.xy-scan-size = 
assert.disabled.tf.scan-criterion = 
assert.disabled.bn.find-x-rays = 
assert.disabled.bn.view-x-ray-model = 
cb.automatic-x-ray-replacement = 1
bn.basic =
assert.enabled.tf.peak-criterion = 
assert.enabled.tf.difference-criterion = 
assert.enabled.tf.maximum-radius = 
assert.enabled.bn.create-fixed-stack = 
assert.enabled.bn.view-fixed-stack = 
assert.enabled.bn.use-fixed-stack = 
#
# manual pixel region replacement
#
bn.advanced =
# values
assert.cb.manual-replacement = off
assert.tf.all-section-replacement-list =
assert.tf.line-replacement-list = 
assert.bn.create-manual-replacement-model = 0
# enabled
assert.enabled.cb.manual-replacement =
assert.disabled.tf.all-section-replacement-list =
assert.disabled.tf.line-replacement-list = 
assert.disabled.bn.create-manual-replacement-model =
#enable/disable
cb.manual-replacement = on
assert.enabled.tf.all-section-replacement-list = 
assert.enabled.tf.line-replacement-list = 
assert.enabled.bn.create-manual-replacement-model = 
cb.manual-replacement = off
bn.basic =
#
# done buttons
#
set.adoc.function = tests.adoc
run.function.buttons =
set.adoc.function =
#
# test find x-rays
#
bn.find-x-rays =
wait.process.ccd-eraser = done
bn.find-x-rays =
wait.process.ccd-eraser = done
#
# test missing data
#
bn.use-fixed-stack =
wait.popup.missing-erased-stack = OK

[function = test2]
#
# button states
#
assert.bn.find-x-rays = 1
assert.bn.create-fixed-stack = 1
assert.bn.use-fixed-stack = 1
