.na
.nh
.TH imod 1 2.50 BL3DFS
.SH NAME
imod \- Make a model from a 3-D image stack.
.SH SYNOPSIS
imod [options] [image filenames]  [model filename]
.SH DESCRIPTION
.P
Imod is typically invoked with one image file, but multiple image
filenames can also be given.
The model filename 
is optional; if imod is called without a model file it will create 
a new model.  
The user can load new model files using a menu 
selection once imod is running.  If the model file does not already
exist, imod will create a new model under that name.  The image files
may also be omitted, in which case imod will draw the model on top of
blank images.  A file containing a list of image files can be used in
place of the image file names on the command line.  If multiple
files of different sizes
are loaded, then the size of the display in each dimension will be
limited to the minimum size of the various files.
If imod is invoked
with options but no filenames, then a dialog window will open to allow
selection of an image file.  

.P
The model must be in the IMOD model format.  Images must be in the MRC
image format, or in the TIFF format, if the appropriate TIFF library is
available.  MRC files of almost any mode can be read in: byte, 16-bit integer,
real, complex real, complex integer, or color (RGB).  TIFF files may be byte,
16-bit integer, or color; they may be organized in strips but not in tiles.
TIFF files with various kinds of compression can
be read, depending on the
capabilities of the libraries on the system.  When multiple files are read
in, they do not need to be the same mode or even the same format (except that
if any file is an RGB file, all files must be.)  Whenever a TIFF file, an
RGB-mode file, or more than one file is specified, images are loaded only 
as they are needed into an image cache.  This has various implications that
are mentioned below.  Starting a movie through the images will eventually
load all of the
data into the cache, at which point the program will perform very similarly
to the way it does without the cache.  In addition, there is a dialog box
to fill the cache in various ways, available through the 
Edit-Image-Cache Filler menu entry.
Several other restrictions on image files exist.
If any TIFF or RGB-mode files are loaded,
the image volume cannot be flipped (Y and Z exchanged).  The Pixel View
window, high-resolution mode in the Graph window, and the f and F hotkeys
for finding pixel values will all give zeros for a TIFF file.  If RGB files are
loaded, only the Zap and Model View windows can be opened.

.P
Two windows will open upon startup: the Information Window 
and an image window.
The Information Window is the main control window; it has
a menu bar and has indicators that give information about the selected
model point and the selected graphics voxel.  The bottom of the
information window also has a status box that shows the
progress of certain operations while using imod. 
While the image is loading, the Information Window will report
the status of the image load.  Selecting the Quit menu item from
the File menu will cancel the image load.  If the image cache
feature is used, the image window will open up after the first
image section is loaded; otherwise, the image window won't open
until the entire image has been loaded.

The ZaP Window is the default image display window used by
imod.  It allows one to view an image at any magnification and
to pan the image around inside a resizable window. 
Most manual model editing is done within the ZaP Window.

.P
Additional windows that may be
opened via menu selection are the Slicer, XYZ, Tumbler, 
Tilt, Graph, Pixel View, and Model View windows.
   The Slicer Window allows one to view slices through the 3-D 
image data.  If the image cache is turned on, only images in
the cache will be displayed in views that contain data from 
multiple Z sections.
   The XYZ Image Window displays slices of the 3-D image in
planes perpendicular to the X,Y and Z axis.
   The Tumbler Window allows one to view a small projected view
of the area around the current point.
   The Tilt Window allows one to load a tilt image file and have 
it linked to the XYZ Image Window.
   The Graph Window graphs intensity along a given
axis or along a given contour.
   The Pixel View Window shows the actual pixel values from the
image file around a given point.
   The Model View Window views the model in a 3D rendering
while it's being built.
.P

.SS Options
imod will accept the standard
Xt toolkit options along with the following options:
.TP
.B -x <min,max>
.PD 0
.TP
.B -y <min,max>
.TP
.B -z <min[,max]>
.PD
The 
.B -x, -y 
and 
.B -z 
options can be used to load in a sub-area
of the original image.  The offsets are saved in the model 
so if a different area is loaded the model is automatically
transformed to match the new sub area. 
.TP
.B -m
This option overrides
the model transformation behavior and causes the model to
be loaded without any transformations.  The default model
position data will be loaded.
.TP
.B -xyz
This option causes the default image window to be the
XYZ window instead of the ZaP window.
.TP
.B -S
This option causes a slicer window
instead of the ZaP window to be opened when the program starts.
.TP
.B -Y
This option causes the image data to be flipped after it
has been loaded.  This allows one to model image planes
that are normal to the Y-axis.
The default is to model planes normal to the Z-axis.
It is possible to flip back and forth between these two modeling
orientations using the 
.I Edit Image 
menu item 
.I Flip.
.TP
.B -h  -help
Print some quick help for imod's command line options to 
the terminal.
.TP
.B -C <value>
The 
.B -C
option controls the image cache used by imod. 
The default
value is 0 which means imod will try to load the entire image into memory.  
This option
can force a given number of images to be cached.  Alternatively, one
can limit the size of the cache in megabytes by entering a value with m
or M on the end.  For example,
.B -C 200M
will limit the cache to 200 megabytes.  The reason
for using this option is either to decrease start up time or
to view large data sets that can't fit into main memory.
This features works best
with the ZaP Window, which always loads the image that it needs into the cache.
Other image windows
will only be able to access image data that are already within the cache.
.TP
.B -p <filename>
Load a file containing a piece list for the input image.  
This allows one to montage image sections together or to view
images that are either missing sections or have sections out of order.
The piece list is an ASCII text file with the following format.
There are as many lines as
the input image has frames (the z dimension of the image file).
Each line contains three values
<X> <Y> and <Z> which represent the starting location of each frame
in the input image stack.
Using the piece list option will also turn on the image cache
with a default size equal to the total number of
image z-planes that contain data.  The image cache can't be turned off,
but the size can be changed with the
.B -C
option.
.TP
.B -P <nx,ny>
Create an internal piece list to display images from the file in a montage
of
.I nx
by
.I ny
pieces.  If an external piece list file is entered with the
.B -p
option, then this option is ignored; with this option, montage information 
in the
file header is ignored.
.TP
.B -o <nx,ny>
When creating an internal piece list with the
.B -p
option, set the overlap between pieces to
.I nx
in the X direction and
.I ny
in the Y direction.  Enter negative numbers to get space (gutters) between
the pieces.
.TP
.B -f
Load file as individual frames, overriding montage information in the image
file header.  It is possible for an image file to have piece coordinates stored
in its header rather than in a separate piece list file.  Imod will 
automatically load such a file as a montage, so this option is available to
override this behavior and force loading as individual frames.

.TP
.B -c <value>
The 
.B -c
option selects a starting color table used for displaying
image data.  This allows additional copies of imod to run and
display images with different contrasts.  The default 
.I value 
is 1 and the allowed range is 1-12.  This option is ignored on
8-bit and RGB graphics displays.  On SGI machines, imod attempts to
determine the number of other imods that are already running and selects a
color table value one
higher than this number.  The color table can be changed from within imod
using the
.I Edit Image 
menu item 
.I Colormap.
.TP
.B -rgb
Display images in 24-bit color mode rather than using a color table.  This 
option is needed on an SGI when trying to display color images, i.e. MRC files 
in RGB-mode or TIFF files containing RGB images.
.TP
.B -G
Display an RGB-mode MRC file in gray-scale rather than in color.  If there are
multiple MRC files, if the file is specified by an image list, or if the
file on the command line is a color TIFF file, it will be displayed in color
regardless of this option.
.TP
.B -s <min,max>
The 
.B -s
option will scale image intensities linearly so that the min and max values
will be displayed as black (0) and white (255) on the screen.  Without this
option, intensities are scaled between the minimum and maximum intensities in
the image file.  Images can be rescaled after imod is running using the
.I Edit Image 
menu item 
.I Reload.

.SH Information Window
The Information Window is imod's main control window and it is
open at all times while imod is running.  All other windows can
be opened and closed without restarting imod.

.TP 
.I The Model Selection Display Gadgets.
The current 
.I Object, Contour
and
.I Point
are displayed and can be changed using the arrow buttons.
Models are a collection of objects, and each object has
its own display color, drawing style and list of contours.  
Each contour in turn contains a list of points.
When drawing the current contour the beginning point is green,
the end point is red and the current point is yellow.
One can also move between the current Object, Contour and Point
using hot keys in selected image windows.
.br
.B p/o
\- Go to the next/previous Object.
.br
.B C/c
\- Go to the next/previous Contour.
.br
.B ]/[
\- Go to the next/previous Point.
.TP
.I The Image Position Display Gadgets.
The current image size and position is displayed and can be
edited using the arrow buttons.  The arrow keys on the keyboard
can also be used to move the current image point. The current
Z coordinate can be moved with the
.B Page Up 
and
.B Page Down
keys.
.TP
.I Image level Sliders.
The Black and White sliders can be used to adjust the contrast
and brightness of the input image for all the image windows.
A linear intensity ramp is made from the black level to the
white level.  The Function keys also can be used to control the
image level from other image windows.
.nf
F1, F2  Controls the Black slider level.
F3, F4  Controls the White slider level.
F5, F6  Controls the image contrast by moving the 
          Black and White sliders either apart or closer.
F7, F8  Controls the image brightness by moving the
          Black and White sliders in tandem.
F9      Select Color map ramp # 1.
F10     Cycle through Color map ramps, 1 - 2 - 3 - 4 - 1.
F11     Toggle the reversed colormap.
F12     Toggle False Color.
.fi
.TP
.I The Float Checkbox.
When this box is checked, imod will attempt to maintain comparable image
contrast when going from one section to the next.  It automatically adjusts
the sliders when you change sections in a ZaP window, based on the mean and
standard deviation of image intensity in the sections.
.TP
.I The Mode Toggle Buttons.
One can toggle between 
.I Movie mode
and
.I Model mode.
The model can't be edited while in movie mode.
When imod first opens a new model it switches to movie mode.  

.TP
.I The Menu bar
Menus for imod are selected by holding down the left mouse 
button while inside the information window.  Some menus have
keyboard shortcuts (shown in parentheses).  Menu entries with ... open a
dialog box, control window, or display window.
.nf

.I File Menu
New Model         Create a new model.
Open Model...     Load a model from disk.
Save Model        Save model.  (s)
Save Model as...  Save model with new name.
Write Model as    Write model as Imod, wimp, NFF or Synu files.
Memory to TIFF... Write the whole section of a raw color image
                    stored inside imod to a TIFF file, in order to
                    turn a montaged image bigger than the screen
                    into a single large image.
About             Info about imod.
Quit              Quit imod.

.I Edit Menu
Model
   Header...   Set the model's Z-Scale for viewing, its pixel 
                  size, resolution (spacing between points during
                  contour drawing), and whether the model is drawn
                  or not. 
   Offsets...  Offset the model data in X, Y and Z.
   Clean       Delete all objects that contain no points (i.e., 
                  that have no contours, or only contours with no 
                  points).

Object
   New       Create a new object.  Opens Object Type dialog box.
   Delete    Delete current object.
   Color...  Open requester for changing object color.
   Type...   Edit Object type.
   Go To...  Select the current object with a slider.
   Move...   Move all contours from current object to another
                object.
   Info      Calculate volume and surface area of current object.
   Clean     Delete empty contours in the current object.

Surface
   New       Create a new contour with a new surface number.  (N)
   Go To...  Select a different surface with a slider in the
                Contour Type window.
   Move...   Move contours in a surface to a different object or 
                a different surface using the Contour Move window.

Contour
   New       Create a new contour.  (n)
   Delete    Deletes the current contour.  (D)
   Move...   Move current contour to a different object or
               surface.
   Sort      Sort contours in the object by their Z values and by 
                their time values.
   Auto...   Make new contours using threshold.
   Type...   Edit contour internal data, such as
                surface #, time index and labels.
   Go To...  Select the current contour with a slider.
   Info      Print area and/or length of contour.
   Break...  Break contour into two contours.  Closed contours can
                have two break points.
   Fix by Z  Break a closed contour at every change in Z, creating
                as many contours as necessary so that each lies in
                a single Z plane.
   Join...   Join two contours together.  Closed contours will be 
                joined at the nearest point; open contours will be
                joined such that the joined contour will have
                points up to the first selected point from the
                first contour and from the second selected point
                to the last point from the second contour.
   Invert    Invert the order of points in the current contour.
   Copy...   Copy contours to a different object, Z-level, or
                time.
   Loopback  Add points to the end of a contour so that it loops
                back from its current end to its start along the 
                same path.  Such a contour can be used to make a
                complex cap over an elongated, oddly shaped
                contour.
   Fill In   For an open contour that traverses through Z, add
                points by interpolation to fill in any gaps where
                the contour skips one or more sections.

Point
   Delete        Delete Current point.  (Delete)
   Sort by dist  Sort points in a contour by interpoint distance.
   Sort by Z     Sort points in a contour by Z value.
   Distance      Show distance between current and last model
                    points.
   Value         Show current voxel value from image file.
   Go To...      Select the current point with a slider.
   Size...       Set size of individual points.

Image
   Process...      Process images by filtering.
   Colormap...     Change color table number.
   Reload...       Open the image scale reload requester.
   Flip            Exchange Y and Z dimensions of the image data.
   Fill Cache      Fill the cache if there is one.
   Cache Filler... Open a dialog box to control cache filling and
                      select autofilling.

Movies...    Open window to control movie limits in X, Y, Z and
                 time.

.I Image Menu
   Graph       Open an image Graph window.  (G)
   Slicer      Open an image Slicer window.  (\\)
   Tumbler     Open a 3-D Tumbler window.
   Tilt...     Load Extra Tilt Image for viewing.
   Model View  Open an imod model view window.  (v)
   ZaP         Open the ZaP window.
   XYZ         Open the XYZ window.
   Pixel View  Open window displaying pixel values.

.I Special menu
.fi
This menu provides access to plugins found by imod when it starts.  Plugins
may include ones for working with data from 4D microscopes, the Bead Fixer
to assist with correcting models of fiducial markers for aligning tilt series,
and the Line Tracker, which performs semi-automated modeling of linear
features such as membranes.

.I Help Menu 
.br
This menu provides help for controls used in imod.  
Topics include 
.I Man Page, Menus, 
and 
.I Hot Keys.

.SH ZaP Window
The ZaP window allows one to zoom and pan inside of
a model window that shows image sections perpendicular to the
Z-axis.
.P
   To Zoom press the - and = Keys.  
To pan, press the left mouse button and drag the mouse.  Alternatively, use
the arrow keys: the ones on the numeric keypad in movie mode, or the set of
4 arrow keys in model mode.

.P
   There is a toolbar at the top of the ZaP window that
controls additional behavior.  Press the help button on the
toolbar for help.  The space bar on the
keyboard can toggle the toolbar visibility.
.P 
   The mouse buttons are assigned different functions in movie 
and model modes.  The keyboard 
.B m 
key toggles between movie and model modes.  
Other sub modes can further change the mouse controls.
.TP
Left mouse button
One can drag the image in the ZaP Window by moving the mouse
while holding down the left mouse button.  If the rubber band is on and the
button is held down while the pointer is near the band, one can drag a
corner or edge of the band to adjust its size.
When the button is clicked in model mode, the nearest modeling point is 
selected.  If no points
are in proximity to the cursor, then no
point is selected.  The selected point's
color is yellow.  In movie mode the current position is selected.
.TP
Middle mouse button
In model mode, this creates a point after the current model point (or before,
if the modeling direction is set with 
.B i
or the toolbar button.)
Holding down the middle mouse button will
create additional points as the mouse moves.
In movie mode, this starts the movie through sections in the
forward direction.
If the rubber band is on and the button is held down while the pointer is near
the band, one can drag the whole band to a new position.
.TP
Right mouse button
In model mode, the selected point is modified to be at the current
location.
Holding down the right mouse button will cause 
additional points to be moved, until the end of the contour is reached.
If the Ctrl key is held down, then this mouse button can be used to delete
points under the cursor.  Clicking the button will delete the point(s) at
the curretn mouse position; holding the button down and moving the mouse will
delete all of the points that the cursor sweeps over.
In movie mode, the right mouse button starts the movie through sections in the
reverse direction.

.TP
Keyboard Controls
Controls that edit models are disabled in movie mode.
.nf    

        Modeling and display control keys
        ---------------------------------
o  -  Go to previous object
p  -  Go to next object
]  -  Go to previous point
[  -  Go to next point
C  -  Go to next contour
c  -  Go to previous contour
5  -  Go to previous contour in current surface
6  -  Go to next contour in current surface
7  -  Go to previous surface in current object
8  -  Go to next surface in current object
e  -  Unselect current point
E  -  Unselect current contour
{  -  Go to first point in contour
}  -  Go to last point in contour
n  -  Create a new contour
N  -  Create a new contour with a new surface number
0  -  Create a new object
Delete - Delete current model point
D  -  Delete current contour
M  -  Move contour to selected object
b  -  Build a contour while in auto contour mode
m  -  Toggle model edit mode and movie mode
t  -  Toggle model drawing on/off
T  -  Toggle point cursor on/off
g  -  Toggle previous contour ghost draw mode
s  -  Save Model File
f  -  Print current pixel value in information window
F  -  Find the maximum pixel within 10 pixels and report its value
,  -  Decrease movie speed
 .  -  Increase movie speed
-  -  Decrease Zoom
=  -  Increase Zoom
3  -  Start or stop a movie through time in the forward direction
4  -  Start or stop a movie through time in the backward direction

        Other keys active in the ZaP window only
        ----------------------------------------
S  -  Snapshot image in window to RGB file
Ctrl-S - Snapshot image in window to TIFF file
i  -  Toggle the modeling direction
Z  -  Toggle auto section advance on and off
B  -  Toggle rubber band on and off
I  -  Print information about window, image size, and offsets,
         also bring the Information Window to the front
R  -  Resize window to size of image or rubber band
Keypad Ins - Add point(s) in model mode, like middle mouse button
Esc - Close ZaP window

        Keys to control position or move the current viewing point
        -----------------------------------------------------------
Page Up       -  Increase Z
Page Down     -  Decrease Z
Up Arrow      -  Increase Y
Down Arrow    -  Decrease Y
Right Arrow   -  Increase X
Left Arrow    -  Decrease X
End           -  Go to Z = 1
Home          -  Go to Z = max
Insert        -  Go to middle Z of stack
h,l           -  Previous,Next Time Index
j,k           -  Previous,Next Z Index

Keypad Arrows -  Move current model point in model mode,
              -  Pan in ZaP window in movie mode. 
Arrows        -  Pan in ZaP window in model mode

        Window control keys
        -----------------------------------------
\\  -  Open Slicer Window
v  -  Open Model View Window
G  -  Open Graph window
z  -  Open ZaP window (from XYZ window)
.fi

.SH Slicer Window
Multiple Slicer Windows can be opened. Each Slicer Window
shows a different slice through a 3-D volume.  Three sliders
are used to select the orientation of the slice by setting the angles of
rotation of the data volume around the X, Y and Z axes.
A small
display next to the sliders gives a visual cue to the slice
location.  One can model in the Slicer Window, using the middle mouse button
to insert a point after the current point, or the right button to modify the
current point.
The Tool bar on top of the Slicer has the following buttons, from
left to right.
   The Up and Down arrows adjust the magnification in the
slicer display window.
   The Show Slice button will draw where the slice
intersects the X- Y- and Z-planes in the XYZ window, and the Z-plane in the
ZaP window.  
   The Lock button will keep the Slicer from changing its
current position when locked.
   The checkerboard button toggles between nearest neighbor
and slower, cubic interpolation.
   The option menu selects whether the angle sliders, depth controls, or 
just the Slicer image will be displayed.
   The Help button opens up on line help.
.TP
.I Hot Keys in the Slicer
.nf
-/=  -  Decrease/Increase zoom
_/+  -  Decrease/Increase displayed image thickness
9/0  -  Decrease/Increase displayed model thickness
s    -  Show slice in ZaP and XYZ windows
S    -  Snapshot to RGB file
Ctrl-S - Snapshot to TIFF file
x/y/z  - Align current and last model points along X, Y or Z axis
X/Y/Z  - Align first and last points of current contour along
            X, Y or Z axis

Numeric Keypad:
4/6  -  (Left/Right) Decrease/Increase last adjusted angle by 0.1
2/8  -  (Down/Up) Decrease/Increase last adjusted angle by 0.5
0    -  (Insert) Set last adjusted angle to 0
.fi

.SH XYZ Window
The XYZ window displays three slices: through an XY plane in the lower
left, through a YZ plane in the lower right, and through an XZ plane in
the upper left.  Marker lines and crosses indicate the position of the
current point and of the slices within the volume.  Like the ZaP window,
it can be resized, and the image can be zoomed with hotkeys and panned
with the left mouse button.  Limited modeling capability is available 
in the XY plane.  One can movie through one or more of the planes 
simultaneously.  
In addition, the marker lines can be dragged with the
mouse to riffle through images in a plane.
.P
.TP
.I Hot Keys in the XYZ Window
.nf
-/=  -  Decrease/Increase zoom
r    -  Toggle between low and high resolution display modes
S    -  Snapshot to RGB file
Ctrl-S - Snapshot to TIFF file
.fi
.TP
.I Mouse Buttons in the XYZ Window
 Actions in Movie Mode:
    Clicking the left mouse button will select the current
point.  In one of the three image planes, this will generally change the
coordinates displayed in the other two planes.  Clicking in the horizontal
gutter region occupied by the X marker line will change the current X
coordinate and the plane displayed in the YZ panel.  Clicking in the
vertical gutter region will select a new Y coordinate and XZ plane.  Clicking
in the upper right region will select a new Z coordinate and XY plane, as
indicated by the crossed marker lines.
    Dragging with the left mouse button depressed will either pan the image
within the window or riffle through one of the planes, depending on where
the mouse is when the button is first pressed.  If it is in one of the
image panels, dragging will pan the image (provided it is larger than the 
window.)
In the horizontal or vertical gutter regions, dragging will riffle through
YZ or XZ planes, respectively.  In the upper right region, dragging will
change the XY plane; this is most effective if the mouse is moved along
the diagonal in this region.
    Clicking the middle mouse button in one of the image panels will start
or stop a movie in the forward direction in that panel.
    Clicking the right mouse button in one of the image panels will start
or stop a movie in the backward direction in that panel.

 Actions in Model Mode:
    Clicking the left mouse button near a model point in the XY plane will
select that point as the current model point.  Clicking anywhere else will
cause the same result as in movie mode.
    Dragging with the left mouse button is the same as in movie mode.
    Clicking with the middle mouse button in the XY plane will add a point 
to the current contour and has no effect elsewhere.
    Dragging with the middle mouse button depressed will add a series of
points to the current contour.
    Clicking with the right mouse button in the XY plane will move the
current model point to that location.
.SH Tumbler Window
The Tumbler Window is opened by selecting the Tumbler item
from the Image menu.  The area around the current point
will be shown in the Tumbler Window.
.nf
The arrow keys tumble the image.
The -/= keys zoom the image.
The F1,F2,F3,F4 keys adjust the contrast.
The 'b' key toggles on/off the bounding box.
.fi
.SH Tilt Window
The Tilt Window is opened by selecting the Tilt menu item
from the Image menu. 
Once the Tilt Window is selected a file requester appears.
One can enter an mrc file name or enter an ascii file name
with the following format.
.nf
	tilt	First line is mrc image file name.
	0	Lines 2-4 are translation values for x,y,z
	0 
	0 
	1	Lines 5-7 are scale values for x,y,z.
	1 
	1 
	0	Lines 8-10 are angles x,y,z.
	0 
	0 
	-10	Lines 11-end are a list of tilts.
	5
	0
	5
	10
.fi
If a file name is given the tilt image is then loaded; otherwise
the current image in imod is used.
The tilt window will draw the current contour.
.TP
Keyboard control hot keys for the tilt window image area.
.nf
m 	Toggle Movie on / off.
-	Decrease Stereo Parallax.
+	Increase Stereo Parallax.

Page Up     - Increase tilt angle view.
Page Down   - Decrease tilt angle view.

Function Keys 
F1-F2 Adjust Black level.
F3-F4 Adjust White level.
.fi
.SH Graph Window
This window graphs image intensity along the image 
X-axis, Y-axis, Z-axis or along the current contour.
A histogram of image intensities can also be graphed.
The type of graph can be chosen by using the option menu
located in the tool bar.
The [+] and [-] buttons in the tool bar adjust the zoom
in the drawing area.
The [LOCK] button stops the window from tracking the current point.
The [RESOLUTION] button toggles between taking data from the
image buffer and taking data from the file.

.SH Model View Window
This window shows the model in 3D, continually updated as the model is
edited.  The window behaves the same as when it is started with the
imodv command.
See the manual page for imodv(1).

.SH AUTOSAVE AND BACKUP FILES
The program will back up the current model to the file 
model_file_name#autosave# every few minutes.  If no model file has been
saved yet, the name of the autosave file is just #autosave#.  The
autosave file is
eliminated whenever the model is saved, and when the program exits normally.
The IMOD_AUTOSAVE environment variable sets the number of
seconds between automatic saves.  If it is set to 0 then
this feature will be disabled.  The first time that you save a model file,
the existing model file will be renamed to model_file_name~, and any existing
file by that name will be deleted.  This backup file will not be overwritten
each time that you save thereafter, so that it will preserve the state of the
model when imod was started.

The IMOD_AUTOSAVE_DIR environment variable can be set 
to specify a directory in which
the autosave file will be written.  Thus, one can specify a directory on
a local disk (e.g., /usr/tmp) and avoid the long delays required to write
a large model to a disk over the network.

.SH SURFACES, OPEN CONTOURS, LABELS, AND POINT SIZES
Several features can be controlled from the Contour Type window.  One is
the surface, which is an optional level of organization between contours and
objects.  With surfaces, one can keep track of, navigate between, and
manipulate groups of contours without having to use a separate object for each
group.  Each contour in an object has a surface number, which is 0 if surfaces
are never employed.  To start a new surface, use 
.B N
or the New Surf button 
in the Contour Type window to obtain a new, empty contour
with the new surface number.  
Thereafter, each new contour will have the same
surface number as the previous contour being modeled, until a new surface is
started again.  The Contour Type window has controls for moving within and
between surfaces and for visualizing contours of the current surface.  The
Contour Move window has options for moving contours from one surface to
another or for moving an entire surface to a new object.

The Contour Type window has buttons for controlling two kinds of ghost
displays.  The Surface Ghost button allows one to highlight contours of the
current surface.  The Section Ghost buttons control the display of ghost
contours from adjacent sections, which is also toggled by the g hotkey.

The Contour Type window has a button for defining individual contours as
open in an object defined as having closed contours.  This is useful for
displaying a partially cut edge of an object.  See imodmesh(1) for more
details.

This window also has a text box for displaying and editing the time index of
the current contour.  If you have loaded multiple image files and want to
model contours at specific times (i.e., displayed only on images from a 
specific file), you must first activate time editing with a button in
the Edit-Object-Type window.  Once this feature is selected,
newly created contours will be assigned to the currently displayed time.

The Contour Type window also has text boxes in which one can enter labels
for individual contours and points.  Finally, it has a text box and slider for
assigning a size value to an individual point.  While this value can be
anything, not just a size, it is interpreted as a size when the type of the 
object is scattered points rather than contours.

.SH IMAGE LIST FILES
An image list file can be entered instead of an image file on the imod
command line.  This ASCII file can specify a series
of image files that represent different times, so that one can step through
time as well as X, Y, and Z.  An image list file can also be used to
specify both an image file and a piece list with a single file.  In either
case, the cache is turned on.
Lines beginning with # are treated as comments and ignored.

The format of the file is:

.nf
IMOD image list               [must be the first line of the file]
VERSION 0   or   VERSION 1    [must appear somewhere in file]
.fi

To specify a series of files at different times, include a series of
entries of the form (the second entries for time labels are optional,
and default label if it is omitted is the image filename):

.nf
IMAGE image_filename
TIME time_label               [The label can be any desired text]
.fi

If the first file 
might not exist, precede the list of images with a line:
.br
.nf
SIZE nx,ny,nz                 [nx,ny,nz are the image dimensions 
                               to be assumed for the first file]
.fi

To specify an image file and piece coordinates, include the following:

.nf
IMAGE image_filename
XYZ                           [on a line by itself]
x  y  z                       [piece coordinates, one line per section]
 . . .
.fi

.SH PLUGIN ENVIRONMENT
Imod will load special plugin libraries that are in the
directory pointed to by the IMOD_PLUGIN_DIR environment 
variable.  The directories /usr/IMOD/plugins, /usr/local/IMOD/plugins,
and /usr/freeware/lib/imodplugs/ are loaded by default if they
exist.  To write your own plugins, look for the IMOD
software development kit on the IMOD home page at 
http://bio3d.colorado.edu/imod

.SH AUTHORS
.nf
Jim Kremer
David Mastronarde
.SH SEE ALSO
.nf
Viewing programs  imodv, mrcv
Model conversion  imod2nff, imod2wmod, imod2synu, wmod2imod 
                  and imod2rib.
Image conversion  tomrc, frommrc (convert to/from sgi images)
                  tif2mrc, raw2mrc.
.if
.SH BUGS
Please email all bug reports to mast@colorado.edu.
