<head>
<title>Drawing Tools Plugin Help</title>
</head>
<body>
<a name="TOP"></a>
<h3>Drawing Tools Plugin Help</h3><br>
--------------------------<br><br>
This plugin provides a set of <b>drawing tools</b> which allows you to 
rapidly draw, modify and erase contours. To use these tools make sure 
3dmod is on <i>"Model"</i> mode, the <i>"Drawing Tools"</i> 
plugin window is open and you've selected the <i>"Draw Mode"</i> 
you wish to use.
Notice in the Zap window that many of the tools use a red
<b>"sculpt circle"</b>, the size of which can be changed using mouse
wheel or the keys [q] and [w].
<br>
<br><i>Click here to see the <b><a href='http://www.andrewnoske.com/student/imod.php'>
video tutorial</a></b></i>
<br>
<br>
<br>
<b>List of Default Drawing Modes</b><br>
--------------------------<br>
<ol>
<li><b>Normal</b> - lets you use normal contour drawing behavior.</li>
<li><b>Warp</b> - allows you to quickly correct bad regions of contour 
  by warping <i>[second_button]</i> or warp-and-smoothing <i>[third_button]</i> the contour 
  points closest to (if you click on a contour) or within (if you click near a contour) 
  the sculpt circle. Holding <i>[shift+third_button]</i> lets you break apart contours.</li>
<li><b>Sculpt</b> - lets you quickly draw contours by holding the point 
  addition mouse button <i>[second_button]</i> and pushing the contour 
  outwards or inwards with the sculpt circle. Holding down <i>[shift]</i> 
  as well lets you will pinch contours toward the center instead.</li>
<li><b>Join</b> - is similar to Sculpt, but also allows you to merge 
  two contours by pushing one contour over another or split a contour 
  by pushing a gap through the middle. Using <em>[third_button]</em> lets 
  you join or split contours using a rectangle.</li>
<li><strong>LiveWire</strong> - an edge detection tool to help you quickly trace around 
  dark membranes  <i>[second_button]</i>, similar to the &quot;magnetic lasso&quot; tool in Photoshop. *</li>
<li><b>The Wand</b> - a adaptive flood filling algorithm where you can click and 
  drag <i>[second_button]</i> to rapidly fill in an area of similar greyscale. Using the <em>[third_button]</em> you can use the little scuplt circle to make minor touchups to the selected contour.</li>
<li><b>Eraser</b> - allows you to delete contours <i>[second_button]</i> or points
  <i>[third_button]</i> touching the sculpt circle. Holding <i>[shift+second_button]</i>
  lets you break apart contours.</li>
<li><b>Measure</b> - allows you to draw a straight line between any 
  two points <i>[second_button]</i> and displays the distance between these 
  points in the relevant units.</li>
</ol>
<p><em>* With the LiveWire tool be warned that it seems to crash and doesn't work on certain images. Either it works brilliantly or not at all, but be sure to save regularly.</em></p>
<p><b>Extra Drawing Modes</b><br>
--------------------------</p>
<p>NOTE: The list above shows the default order of drawing tools, but by clicking any of
  the numbers (to the right of the tools) it's possible to change the order and/or add to the list one of these other
  modes:</p>

<ul>
  <li><b>Transform</b> - allows you to move <i>[second_button]</i>, <i>scale [third_button]</i>, rotate <i>[shift+second_button]</i> or 
    stretch <i>[shift+third_button]</i> the currently selected contour.</li>
  <li><b>Curve</b> - allows you to draw a smooth contour by clicking a sequence
  of points <i>[second_button]</i> and then end the contour by pressing
  [space] or connecting the end of the contour to the beginning. To disconnect
  from the selected contour without adjustment press [n].</li>
<li><b>Circle</b> - allows you to rapidly draw circles by clicking and dragging 
  the mouse <i>[second_button]</i> from one edge of the circle to the far edge. 
  Using the <i>[third_button]</i>, you can also quickly stretch/squash the
  circle (or whatever contour is selected) into shape (to make ovals).</li>
<li><strong>Correct</strong> - allows you to delete <em>[second_button]</em> segments of a contour within a &quot;correction&quot; circle, and/or which are cut off by a the circle. This feature may be useful to help prune contours produced by automatic segmentation, but which were oversegmented, and contain undesireable regions. To make sure an area is selected, you can click inside. Using the <em>[third_button]</em> behaves like a small sculpt circle. </li>
</ul>

<p>&nbsp;</p>
<p>
  <br>
  <b>Hot Key Summary</b><br>
  ---------------------
<table width="100%" border="0" cellpadding="1" cellspacing="0">
  <tr>
    <td width="10%"><b>[1]-[9] </b></td>
    <td width="90%">Select corresponding draw mode (see above)</td>
  </tr>
  <tr>
    <td><b>[w]</b></td>
    <td>Increase size of sculpt circle (hold shift to go faster)</td>
  </tr>
  <tr>
    <td><strong>[q]</strong></td>
    <td>Decrease size of  point painter circle.</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><b>[r]</b></td>
    <td>Reduce current contour</td>
  </tr>
  <tr>
    <td><b>[e]</b></td>
    <td>Smooth current contour by moving points</td>
  </tr>
  <tr>
    <td><b>[E]</b></td>
    <td>Smooth current contour  without moving existing points</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><b>[a]</b></td>
    <td>Find next intersecting contour edge</td>
  </tr>
  <tr>
    <td><b>[i]</b></td>
    <td>Invert points in current contour</td>
  </tr>
  <tr>
    <td><b>[I]</b></td>
    <td>Reorder points in current contour to start at selected point</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><strong>[y]</strong></td>
    <td>Go to next largest value using find property
  (see: More Actions - find points/contours)</td>
  </tr>
  <tr>
    <td><strong>[Y]</strong></td>
    <td>Go to next smallest value using find property</td>
  </tr>
  <tr>
    <td><strong>[l]</strong></td>
    <td>Recalculate values of contours/points using find property
  and select the smallest</td>
  </tr>
  <tr>
    <td><strong>[L]</strong></td>
    <td>Recalculate values of contours/points using find property
  and select the largest</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><b>[ctrl+x]</b></td>
    <td>Cut current contour</td>
  </tr>
  <tr>
    <td><b>[ctrl+c]</b></td>
    <td>Copy current contour</td>
  </tr>
  <tr>
    <td><b>[ctrl+v]</b></td>
    <td>Paste contour into current slice and object, centered on mouse</td>
  </tr>
  <tr>
    <td><b>[ctrl+V]</b></td>
    <td>Paste contour into current slice and object in same XY position</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><strong>[space]</strong></td>
    <td>Copy current contour to current slice (use also [?])</td>
  </tr>
  <tr>
    <td><strong>[shift]</strong></td>
    <td>Hold Shift down to alter the behavior of certain draw modes</td>
  </tr>
</table>
<p><br>
  <br>
  <br>
  <br>
  <b>Tips</b><br>
  ---------------------<br>
  <br>
  Holding and dragging <b>[shift+first_button]</b> allows you to quickly
  scroll up and down through the slices.<br>
  <br>
  Be warned that the sculpt and join tool were designed for 2D 
  closed contours and so I would not recommend using these tools 
  with open or scattered contours which span multiple slices.<br>
  <br>
  If you select a contour using the "transform" tool, you can
  copy it to nearby slices by simply scrolling to a different
  slice and mouse clicking [second_button]. In this way transform can
  be useful to quickly mark-up simple shapes.
  <br>
  The join tool and, to a lesser extent, the sculpt tool can become
  sluggish for objects with numerous contours. 
  To improve performance you should consider adding an extra object and 
  then use <i>'edit > object > move'</i> to merge the contours into the 
  desired object periodically.<br> 
  <br>
  Another way to improve performance can be to reduce contours. Use
  <b>'Reduce Contour'</b> to reduce the current contours, by selectively
  removing points,  or <b>'Reduce Object'</b> to reduce ALL contours
  in the current object. Use <b>'Smooth Contour'</b> to smooth the
  current contours, by adding points, or <b>'Smooth Object'</b> to
  smooth ALL contours in the current object. <br>
  Reducing objects can often substantially reduce the number of points in 
  the model, but be very careful you don't lose information in
  the process.<br>
  <br>
  Under <b>More Actions</b> are a number of other options to sort, transform,
  move, copy, expand and modify contours. These have been listed in more 
  detail below and it's recommended you read about them all - especially 
  the 'crop contours' feature.<br>
  <br>
  In 3dmod (without the drawing tool plugin) there are several 
  useful drawing tools you might not know about:
<ol>
<li>You can select multiple contours by holding
[ctrl+first_button].</li>
<li>You can delete points by holding [shift+third_button].</li>
<li>You can transform selected contour(s) by toggling
the Zap "contour transform mode" with [P] - this mode is
similar to the "transform" drawing tool.</li>
</ol>
<p>
<b>More Actions</b><br>
---------------------<br>
<br>
In addition to the options on the plugin you can see, a large number of 
additional tools are available when you click the "More Actions" button.
A small description of each is written below. Note that most of these tools
allow you to specify a range of contours and/or apply the action to only
dotted or solid contours.
<br>
<ul>
<li><b>clean model and fix contours</b> - Contains a number of options to clean 
multiple objects and 'fix' contours by removing bad, redundant or 
out-of-bounds points and more. It's recommended you run this on all
finished models, and also contains an option to make all contours clockwise
or anticlockwise. </li>
<li><b>find intersecting edges [a]</b> - Finds closed contours which cross
their own path or the path of other contours. In most situations (eg: closed 
membranes) no two lines should ever intersect; especially a line crossing 
itself; so it's a good idea to use this tool before converting your contours 
into the final mesh model. One of the options is to automatically 'delete 
intersecting contours in current object', but I'd suggest you leave it on 
'list all intersecting edges' then use [a] to check them all individually.</li>
<li><b>sort contours</b> - Physically sorts contours using the criteria you
select. Among the many options you can sort a range (by default all) of 
contours by: <i>surface number, number points, contour length, area, max segment 
length, avg gray value, interpolated, random, mean value in x/y/z or min
value x/y/z</i>!</li>
<li><b>find contours [y]</b> - Use [y] to find the contour or point with the 
next biggest value based on the criteria you select. Clicking this will let 
you choose the criteria (same list as above) and value to start at... 
from there use [y] and [Y] to iterate through contours. Using this it's
possible, say, to find contours with 5 points (or in surface #5) without 
needing to sort them.</li>
<li><b>delete contours</b> - Allows you to delete any contours which meet your
specified criteria. You can chose to run it over a range of contours in
the current object, or ALL contours in a range of objects. The 'criteria 
for deletion' you can chose from include 'slices / z value' and/or 
'number of points'... but keep in mind this delete feature can be 
used to delete a range of contours after you've sorted them using some 
other criteria. This tool was originally created to allow easy deletion 
of contours off every Nth slice etc.</li>
<li><b>crop contours</b> - Will crop and 'cut open' contours in the current
object which go outside the tomogram boundaries or rubber band area. This 
feature can be VERY HANDY. The edges of tomograms typically look messy after
manual segmentation AND it's a pain to manually mark individual membranes 
which intersect the edge as open. I suggest use Interpolator plugin and the
sculpt tool and just allow all your contours to go outside the boundary. 
THEN, when you're done (and maybe saved a backup!), run this tool and it
will automatically calculate intersection points and cut open all the relevant 
segments of contour!
</li>
<li><b>copy contours</b> - Use this to copy or move a range of contours from
the current object to another object.</li>
<li><b>transform contours</b> - Use this to precisely translate;
scale and/or rotate a range of contours in the current object.</li>
<li><b>modify contours</b> - Allows you to modify contour properties over
a range of contours in the current object.</li>
<li><b>move point</b> - Use this to move the current point or the current
contour to a precise position. The move can be relative or absolute.
<i>If you click 'Mouse and Keyboard' you can set the shortcut key [d]
to bring up this dialog or several other options - by default it will all 
point in the selected contour to the end.</i></li>
<li><b>expand contours</b> - Use this to expand a ring around a range of 
open or closed contours within the current object. In other words, a single 
circular contour will become two concentric circles some thickness apart. 
This is useful if you've drawn through center of a thick membrane and 
then decide to model both sides. There are also options here to shrink  
or grow the contour by some thickness (without turning each closed contour 
into two contours).</li>
<li><b>print basic model info</b> - Prints some basic information about the 
current object including the average distance between points; average points 
per contour; and number of empty contours.</li>
<li><b>print detailed object info</b> - Prints detailed information about the 
current object. This includes: <i>bounding coordinates, the number and fraction
of contours which are: empty, single points, interpolated, anti-clockwise, 
open, and also the total and average number of points, length, 
segment length and area of all contours</i>.</li>
<li><b>print detailed contour info</b> - Prints detailed information about the 
current contour; or a range of them. In addition to bounding box, area and
length, there is an option to print out all segment lengths or all point
sizes and positions.</li>
<li><b>reset values</b> - Resets all settings (for this Drawing Tools plugin) 
to default.</li>
</ul>
<p>
---------------------<br>
<br>
This plugin was created by <b>Andrew Noske</b> (<u>andrew.noske&lt;at&gt;gmail&lt;dot&gt;com</u>).<br>
 If you encounter bugs please e-mail me before e-mailing the
IMOD group (to reduce traffic). <br>
In your e-mail please tell me exactly how and when the problem
occurred and attach the model file you were using with
enough information that I can replicate the error/crash.
<p><i>NOTE: Maintaining this plugin is part of the is part of the
  &quot;<a href="http://www.slashsegmentation.com/">SLASH segmententation</a>&quot;
  initiative. Please contact me for citation information.</i><br>
<hr>
<p><font size="2"> <b>Acknowledgements:</b> <i>Brad Marsh</i> at the Institute for Molecular Bioscience (www.imb.uq.edu.au) for helping  encourage this work - without this nor any of my other plugins would exist. <i>Jeffrey Bush </i>at the  The National Center for
  Microscopy and Imaging Research (www.ncmir.ucsd.edu) for helping me add the amazing LiveWire code, and <em>Mark Ellisman</em> for encouraging us to give back to IMOD.<i> David Mastronarde</i> and the team at The Boulder Lab for 3-D Electron Microscopy
  (bio3d.colorado.edu) for their wonderful support of all my plugins.</font></body>
